  [1m[35m (12.4ms)[0m  [1m[35mDROP DATABASE IF EXISTS "restaurant_app_test"[0m
  [1m[35m (180.7ms)[0m  [1m[35mCREATE DATABASE "restaurant_app_test" ENCODING = 'unicode'[0m
  [1m[35mSQL (0.5ms)[0m  [1m[35mCREATE EXTENSION IF NOT EXISTS "plpgsql"[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "dishes" CASCADE[0m
  [1m[35m (8.8ms)[0m  [1m[35mCREATE TABLE "dishes" ("id" bigserial primary key, "name" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "items" CASCADE[0m
  [1m[35m (4.4ms)[0m  [1m[35mCREATE TABLE "items" ("id" bigserial primary key, "name" character varying, "price" bigint, "calories" integer, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "restaurants" CASCADE[0m
  [1m[35m (5.9ms)[0m  [1m[35mCREATE TABLE "restaurants" ("id" bigserial primary key, "name" character varying, "address" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (7.0ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY)[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (2.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (1.2ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20230510211554)[0m
  [1m[35m (0.7ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES
(20230510210553),
(20230510210707);

[0m
  [1m[35m (6.2ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.4ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.6ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "key"[0m  [["key", "environment"], ["value", "test"], ["created_at", "2023-05-10 21:50:20.154135"], ["updated_at", "2023-05-10 21:50:20.154135"]]
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "schema_sha1"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.2ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "key"[0m  [["key", "schema_sha1"], ["value", "27a1b7d2420ff302bc869141d099eeb10a4a0cab"], ["created_at", "2023-05-10 21:50:20.159847"], ["updated_at", "2023-05-10 21:50:20.159847"]]
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (0.3ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "schema_sha1"], ["LIMIT", 1]]
  [1m[36mActiveRecord::SchemaMigration Pluck (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (0.3ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "schema_sha1"], ["LIMIT", 1]]
  [1m[36mActiveRecord::SchemaMigration Pluck (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (0.7ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mActiveRecord::SchemaMigration Pluck (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (0.3ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mActiveRecord::SchemaMigration Pluck (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (0.4ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (17.6ms)[0m  [1m[35mDROP DATABASE IF EXISTS "restaurant_app_test"[0m
  [1m[35m (98.6ms)[0m  [1m[35mCREATE DATABASE "restaurant_app_test" ENCODING = 'unicode'[0m
  [1m[35mSQL (0.2ms)[0m  [1m[35mCREATE EXTENSION IF NOT EXISTS "plpgsql"[0m
  [1m[35m (0.3ms)[0m  [1m[35mDROP TABLE IF EXISTS "dishes" CASCADE[0m
  [1m[35m (6.2ms)[0m  [1m[35mCREATE TABLE "dishes" ("id" bigserial primary key, "name" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (0.3ms)[0m  [1m[35mDROP TABLE IF EXISTS "items" CASCADE[0m
  [1m[35m (4.7ms)[0m  [1m[35mCREATE TABLE "items" ("id" bigserial primary key, "name" character varying, "price" bigint, "callories" integer, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "restaurants" CASCADE[0m
  [1m[35m (4.8ms)[0m  [1m[35mCREATE TABLE "restaurants" ("id" bigserial primary key, "name" character varying, "address" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (4.6ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY)[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (1.1ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20230510211554)[0m
  [1m[35m (0.8ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES
(20230510210553),
(20230510210707);

[0m
  [1m[35m (3.7ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.6ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "key"[0m  [["key", "environment"], ["value", "test"], ["created_at", "2023-05-10 23:10:42.976466"], ["updated_at", "2023-05-10 23:10:42.976466"]]
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "schema_sha1"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.3ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "key"[0m  [["key", "schema_sha1"], ["value", "113b501a8e45ebdc0e6a9a1b608796f29606fc47"], ["created_at", "2023-05-10 23:10:42.983604"], ["updated_at", "2023-05-10 23:10:42.983604"]]
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (0.3ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "schema_sha1"], ["LIMIT", 1]]
  [1m[36mActiveRecord::SchemaMigration Pluck (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (0.4ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mActiveRecord::SchemaMigration Pluck (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (0.2ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mActiveRecord::SchemaMigration Pluck (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (0.2ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (11.7ms)[0m  [1m[35mDROP DATABASE IF EXISTS "restaurant_app_test"[0m
  [1m[35m (84.9ms)[0m  [1m[35mCREATE DATABASE "restaurant_app_test" ENCODING = 'unicode'[0m
  [1m[35mSQL (0.2ms)[0m  [1m[35mCREATE EXTENSION IF NOT EXISTS "plpgsql"[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "dishes" CASCADE[0m
  [1m[35m (5.7ms)[0m  [1m[35mCREATE TABLE "dishes" ("id" bigserial primary key, "name" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (0.3ms)[0m  [1m[35mDROP TABLE IF EXISTS "items" CASCADE[0m
  [1m[35m (4.1ms)[0m  [1m[35mCREATE TABLE "items" ("id" bigserial primary key, "name" character varying, "price" bigint, "calories" integer, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "restaurants" CASCADE[0m
  [1m[35m (4.3ms)[0m  [1m[35mCREATE TABLE "restaurants" ("id" bigserial primary key, "name" character varying, "address" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (4.1ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY)[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (1.0ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20230510211554)[0m
  [1m[35m (0.7ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES
(20230510210553),
(20230510210707);

[0m
  [1m[35m (3.4ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.3ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "key"[0m  [["key", "environment"], ["value", "test"], ["created_at", "2023-05-10 23:16:46.942349"], ["updated_at", "2023-05-10 23:16:46.942349"]]
  [1m[36mTRANSACTION (1.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "schema_sha1"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.3ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "key"[0m  [["key", "schema_sha1"], ["value", "27a1b7d2420ff302bc869141d099eeb10a4a0cab"], ["created_at", "2023-05-10 23:16:46.949187"], ["updated_at", "2023-05-10 23:16:46.949187"]]
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (0.3ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "schema_sha1"], ["LIMIT", 1]]
  [1m[36mActiveRecord::SchemaMigration Pluck (1.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (0.6ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mActiveRecord::SchemaMigration Pluck (0.9ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (0.9ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mActiveRecord::SchemaMigration Pluck (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (0.5ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (22.4ms)[0m  [1m[35mDROP DATABASE IF EXISTS "restaurant_app_test"[0m
  [1m[35m (107.1ms)[0m  [1m[35mCREATE DATABASE "restaurant_app_test" ENCODING = 'unicode'[0m
  [1m[35mSQL (0.3ms)[0m  [1m[35mCREATE EXTENSION IF NOT EXISTS "plpgsql"[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "dishes" CASCADE[0m
  [1m[35m (5.4ms)[0m  [1m[35mCREATE TABLE "dishes" ("id" bigserial primary key, "name" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (0.3ms)[0m  [1m[35mDROP TABLE IF EXISTS "items" CASCADE[0m
  [1m[35m (4.5ms)[0m  [1m[35mCREATE TABLE "items" ("id" bigserial primary key, "name" character varying, "price" bigint, "callories" integer, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "restaurants" CASCADE[0m
  [1m[35m (4.5ms)[0m  [1m[35mCREATE TABLE "restaurants" ("id" bigserial primary key, "name" character varying, "address" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (4.2ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY)[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.9ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20230510211554)[0m
  [1m[35m (0.7ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES
(20230510210553),
(20230510210707);

[0m
  [1m[35m (3.4ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.3ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "key"[0m  [["key", "environment"], ["value", "test"], ["created_at", "2023-05-10 23:17:43.138219"], ["updated_at", "2023-05-10 23:17:43.138219"]]
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "schema_sha1"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.3ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "key"[0m  [["key", "schema_sha1"], ["value", "113b501a8e45ebdc0e6a9a1b608796f29606fc47"], ["created_at", "2023-05-10 23:17:43.144026"], ["updated_at", "2023-05-10 23:17:43.144026"]]
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (0.3ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "schema_sha1"], ["LIMIT", 1]]
  [1m[36mActiveRecord::SchemaMigration Pluck (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (0.3ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "schema_sha1"], ["LIMIT", 1]]
  [1m[36mActiveRecord::SchemaMigration Pluck (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (1.0ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "schema_sha1"], ["LIMIT", 1]]
  [1m[36mActiveRecord::SchemaMigration Pluck (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (0.4ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "schema_sha1"], ["LIMIT", 1]]
  [1m[36mActiveRecord::SchemaMigration Pluck (0.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (0.4ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "schema_sha1"], ["LIMIT", 1]]
  [1m[36mActiveRecord::SchemaMigration Pluck (1.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (0.4ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "schema_sha1"], ["LIMIT", 1]]
  [1m[36mActiveRecord::SchemaMigration Pluck (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (0.4ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "schema_sha1"], ["LIMIT", 1]]
  [1m[36mActiveRecord::SchemaMigration Pluck (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (0.3ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "schema_sha1"], ["LIMIT", 1]]
  [1m[36mActiveRecord::SchemaMigration Pluck (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (0.3ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "schema_sha1"], ["LIMIT", 1]]
  [1m[36mActiveRecord::SchemaMigration Pluck (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (0.8ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "schema_sha1"], ["LIMIT", 1]]
  [1m[36mActiveRecord::SchemaMigration Pluck (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (0.3ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "schema_sha1"], ["LIMIT", 1]]
  [1m[36mActiveRecord::SchemaMigration Pluck (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (0.3ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "schema_sha1"], ["LIMIT", 1]]
  [1m[36mActiveRecord::SchemaMigration Pluck (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (0.3ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "schema_sha1"], ["LIMIT", 1]]
  [1m[36mActiveRecord::SchemaMigration Pluck (1.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (0.4ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "schema_sha1"], ["LIMIT", 1]]
  [1m[36mActiveRecord::SchemaMigration Pluck (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (0.4ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "schema_sha1"], ["LIMIT", 1]]
  [1m[36mActiveRecord::SchemaMigration Pluck (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (0.4ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "schema_sha1"], ["LIMIT", 1]]
  [1m[36mActiveRecord::SchemaMigration Pluck (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (0.3ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "schema_sha1"], ["LIMIT", 1]]
  [1m[36mActiveRecord::SchemaMigration Pluck (1.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (0.3ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "schema_sha1"], ["LIMIT", 1]]
  [1m[36mActiveRecord::SchemaMigration Pluck (1.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (0.3ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mActiveRecord::SchemaMigration Pluck (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (1.0ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mActiveRecord::SchemaMigration Pluck (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (0.8ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (15.3ms)[0m  [1m[35mDROP DATABASE IF EXISTS "restaurant_app_test"[0m
  [1m[35m (97.4ms)[0m  [1m[35mCREATE DATABASE "restaurant_app_test" ENCODING = 'unicode'[0m
  [1m[35mSQL (0.2ms)[0m  [1m[35mCREATE EXTENSION IF NOT EXISTS "plpgsql"[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "dishes" CASCADE[0m
  [1m[35m (5.9ms)[0m  [1m[35mCREATE TABLE "dishes" ("id" bigserial primary key, "name" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "items" CASCADE[0m
  [1m[35m (4.1ms)[0m  [1m[35mCREATE TABLE "items" ("id" bigserial primary key, "name" character varying, "price" bigint, "callories" integer, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, "restaurant_id" bigint)[0m
  [1m[35m (2.8ms)[0m  [1m[35mCREATE INDEX "index_items_on_restaurant_id" ON "items" ("restaurant_id")[0m
  [1m[35m (0.3ms)[0m  [1m[35mDROP TABLE IF EXISTS "restaurants" CASCADE[0m
  [1m[35m (4.3ms)[0m  [1m[35mCREATE TABLE "restaurants" ("id" bigserial primary key, "name" character varying, "address" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (4.6ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY)[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.9ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20230511000134)[0m
  [1m[35m (0.8ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES
(20230510210553),
(20230510210707),
(20230510211554);

[0m
  [1m[35m (3.4ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.4ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "key"[0m  [["key", "environment"], ["value", "test"], ["created_at", "2023-05-11 00:04:07.982933"], ["updated_at", "2023-05-11 00:04:07.982933"]]
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "schema_sha1"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.3ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "key"[0m  [["key", "schema_sha1"], ["value", "9bab7d51ab67872648c664e98c1eff2a03b31754"], ["created_at", "2023-05-11 00:04:07.988313"], ["updated_at", "2023-05-11 00:04:07.988313"]]
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (0.3ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "schema_sha1"], ["LIMIT", 1]]
  [1m[36mActiveRecord::SchemaMigration Pluck (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (0.3ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mActiveRecord::SchemaMigration Pluck (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (0.3ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mActiveRecord::SchemaMigration Pluck (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (0.3ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (22.2ms)[0m  [1m[35mDROP DATABASE IF EXISTS "restaurant_app_test"[0m
  [1m[35m (89.4ms)[0m  [1m[35mCREATE DATABASE "restaurant_app_test" ENCODING = 'unicode'[0m
  [1m[35mSQL (0.2ms)[0m  [1m[35mCREATE EXTENSION IF NOT EXISTS "plpgsql"[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "dishes" CASCADE[0m
  [1m[35m (5.4ms)[0m  [1m[35mCREATE TABLE "dishes" ("id" bigserial primary key, "name" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (0.3ms)[0m  [1m[35mDROP TABLE IF EXISTS "items" CASCADE[0m
  [1m[35m (4.6ms)[0m  [1m[35mCREATE TABLE "items" ("id" bigserial primary key, "name" character varying, "price" bigint, "callories" integer, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, "restaurant_id" bigint, "Dish_id" bigint)[0m
  [1m[35m (2.3ms)[0m  [1m[35mCREATE INDEX "index_items_on_Dish_id" ON "items" ("Dish_id")[0m
  [1m[35m (1.8ms)[0m  [1m[35mCREATE INDEX "index_items_on_restaurant_id" ON "items" ("restaurant_id")[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "restaurants" CASCADE[0m
  [1m[35m (4.9ms)[0m  [1m[35mCREATE TABLE "restaurants" ("id" bigserial primary key, "name" character varying, "address" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (4.0ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY)[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.9ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20230511000550)[0m
  [1m[35m (0.8ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES
(20230510210553),
(20230510210707),
(20230510211554),
(20230511000134);

[0m
  [1m[35m (3.4ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.4ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "key"[0m  [["key", "environment"], ["value", "test"], ["created_at", "2023-05-11 00:06:35.879690"], ["updated_at", "2023-05-11 00:06:35.879690"]]
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "schema_sha1"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.3ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "key"[0m  [["key", "schema_sha1"], ["value", "6aa1321d9c8239a27b97d3cc87cfe0f433417cc4"], ["created_at", "2023-05-11 00:06:35.885563"], ["updated_at", "2023-05-11 00:06:35.885563"]]
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (0.4ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "schema_sha1"], ["LIMIT", 1]]
  [1m[36mActiveRecord::SchemaMigration Pluck (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (0.3ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "schema_sha1"], ["LIMIT", 1]]
  [1m[36mActiveRecord::SchemaMigration Pluck (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (0.3ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mActiveRecord::SchemaMigration Pluck (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (0.2ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mActiveRecord::SchemaMigration Pluck (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (0.2ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (15.7ms)[0m  [1m[35mDROP DATABASE IF EXISTS "restaurant_app_test"[0m
  [1m[35m (92.0ms)[0m  [1m[35mCREATE DATABASE "restaurant_app_test" ENCODING = 'unicode'[0m
  [1m[35mSQL (0.2ms)[0m  [1m[35mCREATE EXTENSION IF NOT EXISTS "plpgsql"[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "dishes" CASCADE[0m
  [1m[35m (5.9ms)[0m  [1m[35mCREATE TABLE "dishes" ("id" bigserial primary key, "name" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (0.3ms)[0m  [1m[35mDROP TABLE IF EXISTS "items" CASCADE[0m
  [1m[35m (4.2ms)[0m  [1m[35mCREATE TABLE "items" ("id" bigserial primary key, "name" character varying, "price" bigint, "callories" integer, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, "restaurant_id" bigint, "dish_id" bigint)[0m
  [1m[35m (1.7ms)[0m  [1m[35mCREATE INDEX "index_items_on_dish_id" ON "items" ("dish_id")[0m
  [1m[35m (1.7ms)[0m  [1m[35mCREATE INDEX "index_items_on_restaurant_id" ON "items" ("restaurant_id")[0m
  [1m[35m (0.3ms)[0m  [1m[35mDROP TABLE IF EXISTS "restaurants" CASCADE[0m
  [1m[35m (3.8ms)[0m  [1m[35mCREATE TABLE "restaurants" ("id" bigserial primary key, "name" character varying, "address" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (3.9ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY)[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.8ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20230511000550)[0m
  [1m[35m (0.8ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES
(20230510210553),
(20230510210707),
(20230510211554),
(20230511000134);

[0m
  [1m[35m (3.7ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.3ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "key"[0m  [["key", "environment"], ["value", "test"], ["created_at", "2023-05-11 00:07:57.569935"], ["updated_at", "2023-05-11 00:07:57.569935"]]
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "schema_sha1"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.2ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "key"[0m  [["key", "schema_sha1"], ["value", "721923726a2024bac6b7d1a32351a80ac5075069"], ["created_at", "2023-05-11 00:07:57.575031"], ["updated_at", "2023-05-11 00:07:57.575031"]]
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "dishes" DISABLE TRIGGER ALL;ALTER TABLE "items" DISABLE TRIGGER ALL;ALTER TABLE "restaurants" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.0ms)[0m  [1m[31mDELETE FROM "dishes";
DELETE FROM "items";
DELETE FROM "restaurants";
INSERT INTO "dishes" ("id", "name", "created_at", "updated_at") VALUES (122903280, 'Appetizer', '2023-05-11 00:07:57.631788', '2023-05-11 00:07:57.631788'), (509217612, 'Main Course', '2023-05-11 00:07:57.631788', '2023-05-11 00:07:57.631788'), (693976031, 'Dessert', '2023-05-11 00:07:57.631788', '2023-05-11 00:07:57.631788');
INSERT INTO "items" ("id", "name", "price", "callories", "created_at", "updated_at", "restaurant_id", "dish_id") VALUES (920592244, 'Pan', 1000, 150, '2023-05-11 00:07:57.636186', '2023-05-11 00:07:57.636186', 648827877, 122903280), (802574032, 'Hamburguesa', 1500, 200, '2023-05-11 00:07:57.636186', '2023-05-11 00:07:57.636186', 648827877, 509217612), (416382555, 'Papa Frita', 1000, 300, '2023-05-11 00:07:57.636186', '2023-05-11 00:07:57.636186', 648827877, 693976031), (112585724, 'Lechuga', 200, 20, '2023-05-11 00:07:57.636186', '2023-05-11 00:07:57.636186', 1067778657, 122903280), (833805165, 'Tomate', 100, 50, '2023-05-11 00:07:57.636186', '2023-05-11 00:07:57.636186', 1067778657, 509217612), (683379417, 'Queso', 300, 200, '2023-05-11 00:07:57.636186', '2023-05-11 00:07:57.636186', 1067778657, 693976031), (532462148, 'Cebolla', 1000, 100, '2023-05-11 00:07:57.636186', '2023-05-11 00:07:57.636186', 144847564, 122903280), (251897809, 'Frutilla', 1000, 200, '2023-05-11 00:07:57.636186', '2023-05-11 00:07:57.636186', 144847564, 509217612), (939824966, 'Helado', 1000, 200, '2023-05-11 00:07:57.636186', '2023-05-11 00:07:57.636186', 144847564, 693976031);
INSERT INTO "restaurants" ("id", "name", "address", "created_at", "updated_at") VALUES (648827877, 'Nestizo', 'Viacura 4000', '2023-05-11 00:07:57.642970', '2023-05-11 00:07:57.642970'), (1067778657, 'NcDonalds', 'El Salto s/n', '2023-05-11 00:07:57.642970', '2023-05-11 00:07:57.642970'), (144847564, 'Huendis', 'Vitacura 2800', '2023-05-11 00:07:57.642970', '2023-05-11 00:07:57.642970')[0m
  [1m[36mTRANSACTION (1.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mALTER TABLE "dishes" ENABLE TRIGGER ALL;ALTER TABLE "items" ENABLE TRIGGER ALL;ALTER TABLE "restaurants" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (5.2ms)[0m  [1m[35mdo $$
  declare r record;
BEGIN
FOR r IN (
  SELECT FORMAT(
    'UPDATE pg_constraint SET convalidated=false WHERE conname = ''%I'' AND connamespace::regnamespace = ''%I''::regnamespace; ALTER TABLE %I.%I VALIDATE CONSTRAINT %I;',
    constraint_name,
    table_schema,
    table_schema,
    table_name,
    constraint_name
  ) AS constraint_check
  FROM information_schema.table_constraints WHERE constraint_type = 'FOREIGN KEY'
)
  LOOP
    EXECUTE (r.constraint_check);
  END LOOP;
END;
$$;
[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------
RoutesTest: test_should_route_to_dishes_index
---------------------------------------------
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------
RoutesTest: test_should_route_to_items_show
-------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------
RoutesTest: test_should_route_to_items_index
--------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------
RoutesTest: test_should_route_to_restaurants_index
--------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------
RoutesTest: test_should_route_to_dishes_show
--------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------
RoutesTest: test_should_route_to_restaurants_show
-------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------
DishTest: test_should_have_many_items
-------------------------------------
  [1m[36mDish Load (0.2ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."name" = $1 LIMIT $2[0m  [["name", "Dessert"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------
DishTest: test_should_validate_presence_of_name_at_db_level
-----------------------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------
DishTest: test_should_validate_presence_of_name_at_model_level
--------------------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------
DishTest: test_should_load_fixtures_correctly
---------------------------------------------
  [1m[36mDish Load (0.2ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."name" = $1 LIMIT $2[0m  [["name", "Dessert"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------
ItemTest: test_should_load_fixtures_correctly
---------------------------------------------
  [1m[36mItem Load (0.2ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."name" = $1 LIMIT $2[0m  [["name", "Hamburguesa"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------
ItemTest: test_item_belongs_to_a_dish
-------------------------------------
  [1m[36mItem Load (0.3ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."name" = $1 LIMIT $2[0m  [["name", "Hamburguesa"], ["LIMIT", 1]]
  [1m[36mDish Load (0.2ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."id" = $1 LIMIT $2[0m  [["id", 509217612], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------
ItemTest: test_should_validate_presence_of_callories_at_model_level
-------------------------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------
ItemTest: test_should_validate_presence_of_price_at_db_level
------------------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------
ItemTest: test_should_validate_presence_of_callories_at_db_level
----------------------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------
ItemTest: test_should_validate_presence_of_name_at_db_level
-----------------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------
ItemTest: test_should_validate_presence_of_name_at_model_level
--------------------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------
ItemTest: test_should_validate_presence_of_price_at_model_level
---------------------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------
ItemTest: test_item_belongs_to_a_restaurant
-------------------------------------------
  [1m[36mItem Load (0.2ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."name" = $1 LIMIT $2[0m  [["name", "Hamburguesa"], ["LIMIT", 1]]
  [1m[36mRestaurant Load (0.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 648827877], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------
RestaurantTest: test_should_have_many_items
-------------------------------------------
  [1m[36mRestaurant Load (0.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."name" = $1 LIMIT $2[0m  [["name", "NcDonalds"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------------
RestaurantTest: test_should_validate_presence_of_address_at_model_level
-----------------------------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------
RestaurantTest: test_should_validate_presence_of_address_at_db_level
--------------------------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------
RestaurantTest: test_should_validate_presence_of_name_at_db_level
-----------------------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------
RestaurantTest: test_should_load_fixtures_correctly
---------------------------------------------------
  [1m[36mRestaurant Load (0.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."name" = $1 LIMIT $2[0m  [["name", "NcDonalds"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------
RestaurantTest: test_should_validate_presence_of_name_at_model_level
--------------------------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (0.3ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "schema_sha1"], ["LIMIT", 1]]
  [1m[36mActiveRecord::SchemaMigration Pluck (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (0.4ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mActiveRecord::SchemaMigration Pluck (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (0.3ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mActiveRecord::SchemaMigration Pluck (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (0.3ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (16.6ms)[0m  [1m[35mDROP DATABASE IF EXISTS "restaurant_app_test"[0m
  [1m[35m (126.5ms)[0m  [1m[35mCREATE DATABASE "restaurant_app_test" ENCODING = 'unicode'[0m
  [1m[35mSQL (0.3ms)[0m  [1m[35mCREATE EXTENSION IF NOT EXISTS "plpgsql"[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "dishes" CASCADE[0m
  [1m[35m (8.0ms)[0m  [1m[35mCREATE TABLE "dishes" ("id" bigserial primary key, "name" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (0.3ms)[0m  [1m[35mDROP TABLE IF EXISTS "items" CASCADE[0m
  [1m[35m (6.1ms)[0m  [1m[35mCREATE TABLE "items" ("id" bigserial primary key, "name" character varying, "price" bigint, "callories" integer, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, "restaurant_id" bigint, "Dish_id" bigint)[0m
  [1m[35m (3.3ms)[0m  [1m[35mCREATE INDEX "index_items_on_Dish_id" ON "items" ("Dish_id")[0m
  [1m[35m (2.9ms)[0m  [1m[35mCREATE INDEX "index_items_on_restaurant_id" ON "items" ("restaurant_id")[0m
  [1m[35m (0.8ms)[0m  [1m[35mDROP TABLE IF EXISTS "restaurants" CASCADE[0m
  [1m[35m (7.2ms)[0m  [1m[35mCREATE TABLE "restaurants" ("id" bigserial primary key, "name" character varying, "address" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, "item_id" bigint)[0m
  [1m[35m (6.8ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY)[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (2.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (1.5ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20230511000550)[0m
  [1m[35m (1.0ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES
(20230510210553),
(20230510210707),
(20230510211554),
(20230511000134);

[0m
  [1m[35m (6.8ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.9ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.5ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "key"[0m  [["key", "environment"], ["value", "test"], ["created_at", "2023-05-11 00:11:43.330122"], ["updated_at", "2023-05-11 00:11:43.330122"]]
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.4ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mActiveRecord::InternalMetadata Load (0.9ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "schema_sha1"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.3ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "key"[0m  [["key", "schema_sha1"], ["value", "9ad9893b0ed4563133a880f67b5573048ca3d042"], ["created_at", "2023-05-11 00:11:43.340269"], ["updated_at", "2023-05-11 00:11:43.340269"]]
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (2.9ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (1.2ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "schema_sha1"], ["LIMIT", 1]]
  [1m[36mActiveRecord::SchemaMigration Pluck (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (0.3ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mActiveRecord::SchemaMigration Pluck (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (0.2ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mActiveRecord::SchemaMigration Pluck (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (0.2ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (16.4ms)[0m  [1m[35mDROP DATABASE IF EXISTS "restaurant_app_test"[0m
  [1m[35m (86.8ms)[0m  [1m[35mCREATE DATABASE "restaurant_app_test" ENCODING = 'unicode'[0m
  [1m[35mSQL (0.2ms)[0m  [1m[35mCREATE EXTENSION IF NOT EXISTS "plpgsql"[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "dishes" CASCADE[0m
  [1m[35m (5.4ms)[0m  [1m[35mCREATE TABLE "dishes" ("id" bigserial primary key, "name" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "items" CASCADE[0m
  [1m[35m (4.6ms)[0m  [1m[35mCREATE TABLE "items" ("id" bigserial primary key, "name" character varying, "price" bigint, "callories" integer, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, "restaurant_id" bigint, "Dish_id" bigint)[0m
  [1m[35m (2.1ms)[0m  [1m[35mCREATE INDEX "index_items_on_Dish_id" ON "items" ("Dish_id")[0m
  [1m[35m (2.1ms)[0m  [1m[35mCREATE INDEX "index_items_on_restaurant_id" ON "items" ("restaurant_id")[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "restaurants" CASCADE[0m
  [1m[35m (4.4ms)[0m  [1m[35mCREATE TABLE "restaurants" ("id" bigserial primary key, "name" character varying, "address" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (3.4ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY)[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (1.0ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20230511000550)[0m
  [1m[35m (0.8ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES
(20230510210553),
(20230510210707),
(20230510211554),
(20230511000134);

[0m
  [1m[35m (3.6ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.4ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "key"[0m  [["key", "environment"], ["value", "test"], ["created_at", "2023-05-11 00:11:59.911432"], ["updated_at", "2023-05-11 00:11:59.911432"]]
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "schema_sha1"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.2ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "key"[0m  [["key", "schema_sha1"], ["value", "6aa1321d9c8239a27b97d3cc87cfe0f433417cc4"], ["created_at", "2023-05-11 00:11:59.917244"], ["updated_at", "2023-05-11 00:11:59.917244"]]
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (0.4ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "schema_sha1"], ["LIMIT", 1]]
  [1m[36mActiveRecord::SchemaMigration Pluck (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (1.1ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "schema_sha1"], ["LIMIT", 1]]
  [1m[36mActiveRecord::SchemaMigration Pluck (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (1.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "dishes" DISABLE TRIGGER ALL;ALTER TABLE "items" DISABLE TRIGGER ALL;ALTER TABLE "restaurants" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.7ms)[0m  [1m[31mDELETE FROM "dishes";
DELETE FROM "items";
DELETE FROM "restaurants";
INSERT INTO "dishes" ("id", "name", "created_at", "updated_at") VALUES (122903280, 'Appetizer', '2023-05-11 00:13:17.185397', '2023-05-11 00:13:17.185397'), (509217612, 'Main Course', '2023-05-11 00:13:17.185397', '2023-05-11 00:13:17.185397'), (693976031, 'Dessert', '2023-05-11 00:13:17.185397', '2023-05-11 00:13:17.185397');
INSERT INTO "items" ("id", "name", "price", "callories", "created_at", "updated_at", "restaurant_id", "dish_id") VALUES (920592244, 'Pan', 1000, 150, '2023-05-11 00:13:17.191712', '2023-05-11 00:13:17.191712', 648827877, 122903280), (802574032, 'Hamburguesa', 1500, 200, '2023-05-11 00:13:17.191712', '2023-05-11 00:13:17.191712', 648827877, 509217612), (416382555, 'Papa Frita', 1000, 300, '2023-05-11 00:13:17.191712', '2023-05-11 00:13:17.191712', 648827877, 693976031), (112585724, 'Lechuga', 200, 20, '2023-05-11 00:13:17.191712', '2023-05-11 00:13:17.191712', 1067778657, 122903280), (833805165, 'Tomate', 100, 50, '2023-05-11 00:13:17.191712', '2023-05-11 00:13:17.191712', 1067778657, 509217612), (683379417, 'Queso', 300, 200, '2023-05-11 00:13:17.191712', '2023-05-11 00:13:17.191712', 1067778657, 693976031), (532462148, 'Cebolla', 1000, 100, '2023-05-11 00:13:17.191712', '2023-05-11 00:13:17.191712', 144847564, 122903280), (251897809, 'Frutilla', 1000, 200, '2023-05-11 00:13:17.191712', '2023-05-11 00:13:17.191712', 144847564, 509217612), (939824966, 'Helado', 1000, 200, '2023-05-11 00:13:17.191712', '2023-05-11 00:13:17.191712', 144847564, 693976031);
INSERT INTO "restaurants" ("id", "name", "address", "created_at", "updated_at") VALUES (648827877, 'Nestizo', 'Viacura 4000', '2023-05-11 00:13:17.200463', '2023-05-11 00:13:17.200463'), (1067778657, 'NcDonalds', 'El Salto s/n', '2023-05-11 00:13:17.200463', '2023-05-11 00:13:17.200463'), (144847564, 'Huendis', 'Vitacura 2800', '2023-05-11 00:13:17.200463', '2023-05-11 00:13:17.200463')[0m
  [1m[36mTRANSACTION (1.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.9ms)[0m  [1m[35mALTER TABLE "dishes" ENABLE TRIGGER ALL;ALTER TABLE "items" ENABLE TRIGGER ALL;ALTER TABLE "restaurants" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (4.0ms)[0m  [1m[35mdo $$
  declare r record;
BEGIN
FOR r IN (
  SELECT FORMAT(
    'UPDATE pg_constraint SET convalidated=false WHERE conname = ''%I'' AND connamespace::regnamespace = ''%I''::regnamespace; ALTER TABLE %I.%I VALIDATE CONSTRAINT %I;',
    constraint_name,
    table_schema,
    table_schema,
    table_name,
    constraint_name
  ) AS constraint_check
  FROM information_schema.table_constraints WHERE constraint_type = 'FOREIGN KEY'
)
  LOOP
    EXECUTE (r.constraint_check);
  END LOOP;
END;
$$;
[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------
DishTest: test_should_validate_presence_of_name_at_model_level
--------------------------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------
DishTest: test_should_have_many_items
-------------------------------------
  [1m[36mDish Load (0.2ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."name" = $1 LIMIT $2[0m  [["name", "Dessert"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------
DishTest: test_should_validate_presence_of_name_at_db_level
-----------------------------------------------------------
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------
DishTest: test_should_load_fixtures_correctly
---------------------------------------------
  [1m[36mDish Load (0.2ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."name" = $1 LIMIT $2[0m  [["name", "Dessert"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------
RestaurantTest: test_should_load_fixtures_correctly
---------------------------------------------------
  [1m[36mRestaurant Load (0.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."name" = $1 LIMIT $2[0m  [["name", "NcDonalds"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------
RestaurantTest: test_should_have_many_items
-------------------------------------------
  [1m[36mRestaurant Load (0.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."name" = $1 LIMIT $2[0m  [["name", "NcDonalds"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------
RestaurantTest: test_should_validate_presence_of_address_at_db_level
--------------------------------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------
RestaurantTest: test_should_validate_presence_of_name_at_db_level
-----------------------------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------------
RestaurantTest: test_should_validate_presence_of_address_at_model_level
-----------------------------------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------
RestaurantTest: test_should_validate_presence_of_name_at_model_level
--------------------------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------
RoutesTest: test_should_route_to_dishes_show
--------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------
RoutesTest: test_should_route_to_dishes_index
---------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------
RoutesTest: test_should_route_to_items_index
--------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------
RoutesTest: test_should_route_to_restaurants_index
--------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------
RoutesTest: test_should_route_to_items_show
-------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------
RoutesTest: test_should_route_to_restaurants_show
-------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------
ItemTest: test_item_belongs_to_a_restaurant
-------------------------------------------
  [1m[36mItem Load (0.3ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."name" = $1 LIMIT $2[0m  [["name", "Hamburguesa"], ["LIMIT", 1]]
  [1m[36mRestaurant Load (0.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 648827877], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------
ItemTest: test_should_load_fixtures_correctly
---------------------------------------------
  [1m[36mItem Load (0.2ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."name" = $1 LIMIT $2[0m  [["name", "Hamburguesa"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------
ItemTest: test_should_validate_presence_of_price_at_model_level
---------------------------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------
ItemTest: test_item_belongs_to_a_dish
-------------------------------------
  [1m[36mItem Load (0.2ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."name" = $1 LIMIT $2[0m  [["name", "Hamburguesa"], ["LIMIT", 1]]
  [1m[36mDish Load (0.2ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."id" = $1 LIMIT $2[0m  [["id", 509217612], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------
ItemTest: test_should_validate_presence_of_callories_at_model_level
-------------------------------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------
ItemTest: test_should_validate_presence_of_name_at_model_level
--------------------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------
ItemTest: test_should_validate_presence_of_price_at_db_level
------------------------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------
ItemTest: test_should_validate_presence_of_callories_at_db_level
----------------------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------
ItemTest: test_should_validate_presence_of_name_at_db_level
-----------------------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (0.4ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "schema_sha1"], ["LIMIT", 1]]
  [1m[36mActiveRecord::SchemaMigration Pluck (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "dishes" DISABLE TRIGGER ALL;ALTER TABLE "items" DISABLE TRIGGER ALL;ALTER TABLE "restaurants" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.8ms)[0m  [1m[31mDELETE FROM "dishes";
DELETE FROM "items";
DELETE FROM "restaurants";
INSERT INTO "dishes" ("id", "name", "created_at", "updated_at") VALUES (122903280, 'Appetizer', '2023-05-11 00:16:52.353171', '2023-05-11 00:16:52.353171'), (509217612, 'Main Course', '2023-05-11 00:16:52.353171', '2023-05-11 00:16:52.353171'), (693976031, 'Dessert', '2023-05-11 00:16:52.353171', '2023-05-11 00:16:52.353171');
INSERT INTO "items" ("id", "name", "price", "callories", "created_at", "updated_at", "restaurant_id", "dish_id") VALUES (920592244, 'Pan', 1000, 150, '2023-05-11 00:16:52.357764', '2023-05-11 00:16:52.357764', 648827877, 122903280), (802574032, 'Hamburguesa', 1500, 200, '2023-05-11 00:16:52.357764', '2023-05-11 00:16:52.357764', 648827877, 509217612), (416382555, 'Papa Frita', 1000, 300, '2023-05-11 00:16:52.357764', '2023-05-11 00:16:52.357764', 648827877, 693976031), (112585724, 'Lechuga', 200, 20, '2023-05-11 00:16:52.357764', '2023-05-11 00:16:52.357764', 1067778657, 122903280), (833805165, 'Tomate', 100, 50, '2023-05-11 00:16:52.357764', '2023-05-11 00:16:52.357764', 1067778657, 509217612), (683379417, 'Queso', 300, 200, '2023-05-11 00:16:52.357764', '2023-05-11 00:16:52.357764', 1067778657, 693976031), (532462148, 'Cebolla', 1000, 100, '2023-05-11 00:16:52.357764', '2023-05-11 00:16:52.357764', 144847564, 122903280), (251897809, 'Frutilla', 1000, 200, '2023-05-11 00:16:52.357764', '2023-05-11 00:16:52.357764', 144847564, 509217612), (939824966, 'Helado', 1000, 200, '2023-05-11 00:16:52.357764', '2023-05-11 00:16:52.357764', 144847564, 693976031);
INSERT INTO "restaurants" ("id", "name", "address", "created_at", "updated_at") VALUES (648827877, 'Nestizo', 'Viacura 4000', '2023-05-11 00:16:52.364363', '2023-05-11 00:16:52.364363'), (1067778657, 'NcDonalds', 'El Salto s/n', '2023-05-11 00:16:52.364363', '2023-05-11 00:16:52.364363'), (144847564, 'Huendis', 'Vitacura 2800', '2023-05-11 00:16:52.364363', '2023-05-11 00:16:52.364363')[0m
  [1m[36mTRANSACTION (4.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "dishes" ENABLE TRIGGER ALL;ALTER TABLE "items" ENABLE TRIGGER ALL;ALTER TABLE "restaurants" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.8ms)[0m  [1m[35mdo $$
  declare r record;
BEGIN
FOR r IN (
  SELECT FORMAT(
    'UPDATE pg_constraint SET convalidated=false WHERE conname = ''%I'' AND connamespace::regnamespace = ''%I''::regnamespace; ALTER TABLE %I.%I VALIDATE CONSTRAINT %I;',
    constraint_name,
    table_schema,
    table_schema,
    table_name,
    constraint_name
  ) AS constraint_check
  FROM information_schema.table_constraints WHERE constraint_type = 'FOREIGN KEY'
)
  LOOP
    EXECUTE (r.constraint_check);
  END LOOP;
END;
$$;
[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
-------------------------------------
ItemTest: test_item_belongs_to_a_dish
-------------------------------------
  [1m[36mItem Load (0.2ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."name" = $1 LIMIT $2[0m  [["name", "Hamburguesa"], ["LIMIT", 1]]
  [1m[36mDish Load (0.2ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."id" = $1 LIMIT $2[0m  [["id", 509217612], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------
ItemTest: test_should_validate_presence_of_price_at_model_level
---------------------------------------------------------------
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------
ItemTest: test_should_validate_presence_of_callories_at_model_level
-------------------------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------
ItemTest: test_should_validate_presence_of_name_at_db_level
-----------------------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------
ItemTest: test_should_validate_presence_of_name_at_model_level
--------------------------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------
ItemTest: test_should_validate_presence_of_callories_at_db_level
----------------------------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------
ItemTest: test_item_belongs_to_a_restaurant
-------------------------------------------
  [1m[36mItem Load (0.2ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."name" = $1 LIMIT $2[0m  [["name", "Hamburguesa"], ["LIMIT", 1]]
  [1m[36mRestaurant Load (0.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 648827877], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------
ItemTest: test_should_load_fixtures_correctly
---------------------------------------------
  [1m[36mItem Load (0.2ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."name" = $1 LIMIT $2[0m  [["name", "Hamburguesa"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------
ItemTest: test_should_validate_presence_of_price_at_db_level
------------------------------------------------------------
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------
DishTest: test_should_have_many_items
-------------------------------------
  [1m[36mDish Load (0.2ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."name" = $1 LIMIT $2[0m  [["name", "Dessert"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------
DishTest: test_should_load_fixtures_correctly
---------------------------------------------
  [1m[36mDish Load (0.2ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."name" = $1 LIMIT $2[0m  [["name", "Dessert"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------
DishTest: test_should_validate_presence_of_name_at_model_level
--------------------------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------
DishTest: test_should_validate_presence_of_name_at_db_level
-----------------------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------
RestaurantTest: test_should_have_many_items
-------------------------------------------
  [1m[36mRestaurant Load (0.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."name" = $1 LIMIT $2[0m  [["name", "NcDonalds"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (1.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------
RestaurantTest: test_should_validate_presence_of_name_at_model_level
--------------------------------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------
RestaurantTest: test_should_validate_presence_of_name_at_db_level
-----------------------------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------------
RestaurantTest: test_should_validate_presence_of_address_at_model_level
-----------------------------------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------
RestaurantTest: test_should_load_fixtures_correctly
---------------------------------------------------
  [1m[36mRestaurant Load (0.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."name" = $1 LIMIT $2[0m  [["name", "NcDonalds"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------
RestaurantTest: test_should_validate_presence_of_address_at_db_level
--------------------------------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------
RoutesTest: test_should_route_to_dishes_index
---------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------
RoutesTest: test_should_route_to_restaurants_show
-------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------
RoutesTest: test_should_route_to_restaurants_index
--------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------
RoutesTest: test_should_route_to_items_show
-------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------
RoutesTest: test_should_route_to_dishes_show
--------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------
RoutesTest: test_should_route_to_items_index
--------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (0.4ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "schema_sha1"], ["LIMIT", 1]]
  [1m[36mActiveRecord::SchemaMigration Pluck (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "dishes" DISABLE TRIGGER ALL;ALTER TABLE "items" DISABLE TRIGGER ALL;ALTER TABLE "restaurants" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.9ms)[0m  [1m[31mDELETE FROM "dishes";
DELETE FROM "items";
DELETE FROM "restaurants";
INSERT INTO "dishes" ("id", "name", "created_at", "updated_at") VALUES (122903280, 'Appetizer', '2023-05-11 00:18:54.630258', '2023-05-11 00:18:54.630258'), (509217612, 'Main Course', '2023-05-11 00:18:54.630258', '2023-05-11 00:18:54.630258'), (693976031, 'Dessert', '2023-05-11 00:18:54.630258', '2023-05-11 00:18:54.630258');
INSERT INTO "items" ("id", "name", "price", "callories", "created_at", "updated_at", "restaurant_id", "dish_id") VALUES (920592244, 'Pan', 1000, 150, '2023-05-11 00:18:54.635415', '2023-05-11 00:18:54.635415', 648827877, 122903280), (802574032, 'Hamburguesa', 1500, 200, '2023-05-11 00:18:54.635415', '2023-05-11 00:18:54.635415', 648827877, 509217612), (416382555, 'Papa Frita', 1000, 300, '2023-05-11 00:18:54.635415', '2023-05-11 00:18:54.635415', 648827877, 693976031), (112585724, 'Lechuga', 200, 20, '2023-05-11 00:18:54.635415', '2023-05-11 00:18:54.635415', 1067778657, 122903280), (833805165, 'Tomate', 100, 50, '2023-05-11 00:18:54.635415', '2023-05-11 00:18:54.635415', 1067778657, 509217612), (683379417, 'Queso', 300, 200, '2023-05-11 00:18:54.635415', '2023-05-11 00:18:54.635415', 1067778657, 693976031), (532462148, 'Cebolla', 1000, 100, '2023-05-11 00:18:54.635415', '2023-05-11 00:18:54.635415', 144847564, 122903280), (251897809, 'Frutilla', 1000, 200, '2023-05-11 00:18:54.635415', '2023-05-11 00:18:54.635415', 144847564, 509217612), (939824966, 'Helado', 1000, 200, '2023-05-11 00:18:54.635415', '2023-05-11 00:18:54.635415', 144847564, 693976031);
INSERT INTO "restaurants" ("id", "name", "address", "created_at", "updated_at") VALUES (648827877, 'Nestizo', 'Viacura 4000', '2023-05-11 00:18:54.641784', '2023-05-11 00:18:54.641784'), (1067778657, 'NcDonalds', 'El Salto s/n', '2023-05-11 00:18:54.641784', '2023-05-11 00:18:54.641784'), (144847564, 'Huendis', 'Vitacura 2800', '2023-05-11 00:18:54.641784', '2023-05-11 00:18:54.641784')[0m
  [1m[36mTRANSACTION (5.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mALTER TABLE "dishes" ENABLE TRIGGER ALL;ALTER TABLE "items" ENABLE TRIGGER ALL;ALTER TABLE "restaurants" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.8ms)[0m  [1m[35mdo $$
  declare r record;
BEGIN
FOR r IN (
  SELECT FORMAT(
    'UPDATE pg_constraint SET convalidated=false WHERE conname = ''%I'' AND connamespace::regnamespace = ''%I''::regnamespace; ALTER TABLE %I.%I VALIDATE CONSTRAINT %I;',
    constraint_name,
    table_schema,
    table_schema,
    table_name,
    constraint_name
  ) AS constraint_check
  FROM information_schema.table_constraints WHERE constraint_type = 'FOREIGN KEY'
)
  LOOP
    EXECUTE (r.constraint_check);
  END LOOP;
END;
$$;
[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------
DishTest: test_should_validate_presence_of_name_at_model_level
--------------------------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------
DishTest: test_should_have_many_items
-------------------------------------
  [1m[36mDish Load (0.2ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."name" = $1 LIMIT $2[0m  [["name", "Dessert"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------
DishTest: test_should_validate_presence_of_name_at_db_level
-----------------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------
DishTest: test_should_load_fixtures_correctly
---------------------------------------------
  [1m[36mDish Load (0.2ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."name" = $1 LIMIT $2[0m  [["name", "Dessert"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------
ItemTest: test_should_validate_presence_of_callories_at_db_level
----------------------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------
ItemTest: test_should_validate_presence_of_price_at_db_level
------------------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------
ItemTest: test_should_validate_presence_of_callories_at_model_level
-------------------------------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------
ItemTest: test_should_validate_presence_of_name_at_model_level
--------------------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------
ItemTest: test_should_load_fixtures_correctly
---------------------------------------------
  [1m[36mItem Load (0.2ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."name" = $1 LIMIT $2[0m  [["name", "Hamburguesa"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------
ItemTest: test_should_validate_presence_of_price_at_model_level
---------------------------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------
ItemTest: test_item_belongs_to_a_restaurant
-------------------------------------------
  [1m[36mItem Load (0.2ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."name" = $1 LIMIT $2[0m  [["name", "Hamburguesa"], ["LIMIT", 1]]
  [1m[36mRestaurant Load (0.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 648827877], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------
ItemTest: test_item_belongs_to_a_dish
-------------------------------------
  [1m[36mItem Load (0.2ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."name" = $1 LIMIT $2[0m  [["name", "Hamburguesa"], ["LIMIT", 1]]
  [1m[36mDish Load (0.2ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."id" = $1 LIMIT $2[0m  [["id", 509217612], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------
ItemTest: test_should_validate_presence_of_name_at_db_level
-----------------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------
RoutesTest: test_should_route_to_items_index
--------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------
RoutesTest: test_should_route_to_dishes_index
---------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------
RoutesTest: test_should_route_to_items_show
-------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------
RoutesTest: test_should_route_to_dishes_show
--------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------
RoutesTest: test_should_route_to_restaurants_index
--------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------
RoutesTest: test_should_route_to_restaurants_show
-------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------
RestaurantTest: test_should_validate_presence_of_address_at_db_level
--------------------------------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------
RestaurantTest: test_should_have_many_items
-------------------------------------------
  [1m[36mRestaurant Load (0.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."name" = $1 LIMIT $2[0m  [["name", "NcDonalds"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------------
RestaurantTest: test_should_validate_presence_of_address_at_model_level
-----------------------------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------
RestaurantTest: test_should_load_fixtures_correctly
---------------------------------------------------
  [1m[36mRestaurant Load (0.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."name" = $1 LIMIT $2[0m  [["name", "NcDonalds"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------
RestaurantTest: test_should_validate_presence_of_name_at_db_level
-----------------------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------
RestaurantTest: test_should_validate_presence_of_name_at_model_level
--------------------------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (0.4ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "schema_sha1"], ["LIMIT", 1]]
  [1m[36mActiveRecord::SchemaMigration Pluck (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "dishes" DISABLE TRIGGER ALL;ALTER TABLE "items" DISABLE TRIGGER ALL;ALTER TABLE "restaurants" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.8ms)[0m  [1m[31mDELETE FROM "dishes";
DELETE FROM "items";
DELETE FROM "restaurants";
INSERT INTO "dishes" ("id", "name", "created_at", "updated_at") VALUES (122903280, 'Appetizer', '2023-05-11 00:20:29.830157', '2023-05-11 00:20:29.830157'), (509217612, 'Main Course', '2023-05-11 00:20:29.830157', '2023-05-11 00:20:29.830157'), (693976031, 'Dessert', '2023-05-11 00:20:29.830157', '2023-05-11 00:20:29.830157');
INSERT INTO "items" ("id", "name", "price", "callories", "created_at", "updated_at", "restaurant_id", "dish_id") VALUES (920592244, 'Pan', 1000, 150, '2023-05-11 00:20:29.834574', '2023-05-11 00:20:29.834574', 648827877, 122903280), (802574032, 'Hamburguesa', 1500, 200, '2023-05-11 00:20:29.834574', '2023-05-11 00:20:29.834574', 648827877, 509217612), (416382555, 'Papa Frita', 1000, 300, '2023-05-11 00:20:29.834574', '2023-05-11 00:20:29.834574', 648827877, 693976031), (112585724, 'Lechuga', 200, 20, '2023-05-11 00:20:29.834574', '2023-05-11 00:20:29.834574', 1067778657, 122903280), (833805165, 'Tomate', 100, 50, '2023-05-11 00:20:29.834574', '2023-05-11 00:20:29.834574', 1067778657, 509217612), (683379417, 'Queso', 300, 200, '2023-05-11 00:20:29.834574', '2023-05-11 00:20:29.834574', 1067778657, 693976031), (532462148, 'Cebolla', 1000, 100, '2023-05-11 00:20:29.834574', '2023-05-11 00:20:29.834574', 144847564, 122903280), (251897809, 'Frutilla', 1000, 200, '2023-05-11 00:20:29.834574', '2023-05-11 00:20:29.834574', 144847564, 509217612), (939824966, 'Helado', 1000, 200, '2023-05-11 00:20:29.834574', '2023-05-11 00:20:29.834574', 144847564, 693976031);
INSERT INTO "restaurants" ("id", "name", "address", "created_at", "updated_at") VALUES (648827877, 'Nestizo', 'Viacura 4000', '2023-05-11 00:20:29.840317', '2023-05-11 00:20:29.840317'), (1067778657, 'NcDonalds', 'El Salto s/n', '2023-05-11 00:20:29.840317', '2023-05-11 00:20:29.840317'), (144847564, 'Huendis', 'Vitacura 2800', '2023-05-11 00:20:29.840317', '2023-05-11 00:20:29.840317')[0m
  [1m[36mTRANSACTION (6.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "dishes" ENABLE TRIGGER ALL;ALTER TABLE "items" ENABLE TRIGGER ALL;ALTER TABLE "restaurants" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (2.4ms)[0m  [1m[35mdo $$
  declare r record;
BEGIN
FOR r IN (
  SELECT FORMAT(
    'UPDATE pg_constraint SET convalidated=false WHERE conname = ''%I'' AND connamespace::regnamespace = ''%I''::regnamespace; ALTER TABLE %I.%I VALIDATE CONSTRAINT %I;',
    constraint_name,
    table_schema,
    table_schema,
    table_name,
    constraint_name
  ) AS constraint_check
  FROM information_schema.table_constraints WHERE constraint_type = 'FOREIGN KEY'
)
  LOOP
    EXECUTE (r.constraint_check);
  END LOOP;
END;
$$;
[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------
ItemTest: test_item_belongs_to_a_restaurant
-------------------------------------------
  [1m[36mItem Load (0.2ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."name" = $1 LIMIT $2[0m  [["name", "Hamburguesa"], ["LIMIT", 1]]
  [1m[36mRestaurant Load (0.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 648827877], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------
ItemTest: test_should_validate_presence_of_callories_at_model_level
-------------------------------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------
ItemTest: test_should_validate_presence_of_price_at_model_level
---------------------------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------
ItemTest: test_should_load_fixtures_correctly
---------------------------------------------
  [1m[36mItem Load (0.2ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."name" = $1 LIMIT $2[0m  [["name", "Hamburguesa"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------
ItemTest: test_should_validate_presence_of_name_at_db_level
-----------------------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------
ItemTest: test_should_validate_presence_of_name_at_model_level
--------------------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------
ItemTest: test_should_validate_presence_of_callories_at_db_level
----------------------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------
ItemTest: test_item_belongs_to_a_dish
-------------------------------------
  [1m[36mItem Load (0.2ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."name" = $1 LIMIT $2[0m  [["name", "Hamburguesa"], ["LIMIT", 1]]
  [1m[36mDish Load (0.2ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."id" = $1 LIMIT $2[0m  [["id", 509217612], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------
ItemTest: test_should_validate_presence_of_price_at_db_level
------------------------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------
RoutesTest: test_should_route_to_restaurants_show
-------------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------
RoutesTest: test_should_route_to_dishes_show
--------------------------------------------
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------
RoutesTest: test_should_route_to_restaurants_index
--------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------
RoutesTest: test_should_route_to_items_index
--------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------
RoutesTest: test_should_route_to_items_show
-------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------
RoutesTest: test_should_route_to_dishes_index
---------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------
DishTest: test_should_validate_presence_of_name_at_db_level
-----------------------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------
DishTest: test_should_load_fixtures_correctly
---------------------------------------------
  [1m[36mDish Load (0.2ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."name" = $1 LIMIT $2[0m  [["name", "Dessert"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mBEGIN[0m
-------------------------------------
DishTest: test_should_have_many_items
-------------------------------------
  [1m[36mDish Load (0.3ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."name" = $1 LIMIT $2[0m  [["name", "Dessert"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------
DishTest: test_should_validate_presence_of_name_at_model_level
--------------------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------
RestaurantTest: test_should_validate_presence_of_name_at_model_level
--------------------------------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------
RestaurantTest: test_should_load_fixtures_correctly
---------------------------------------------------
  [1m[36mRestaurant Load (0.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."name" = $1 LIMIT $2[0m  [["name", "NcDonalds"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------
RestaurantTest: test_should_validate_presence_of_name_at_db_level
-----------------------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------
RestaurantTest: test_should_validate_presence_of_address_at_db_level
--------------------------------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------------
RestaurantTest: test_should_validate_presence_of_address_at_model_level
-----------------------------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------
RestaurantTest: test_should_have_many_items
-------------------------------------------
  [1m[36mRestaurant Load (0.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."name" = $1 LIMIT $2[0m  [["name", "NcDonalds"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (0.4ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "schema_sha1"], ["LIMIT", 1]]
  [1m[36mActiveRecord::SchemaMigration Pluck (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "dishes" DISABLE TRIGGER ALL;ALTER TABLE "items" DISABLE TRIGGER ALL;ALTER TABLE "restaurants" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.8ms)[0m  [1m[31mDELETE FROM "dishes";
DELETE FROM "items";
DELETE FROM "restaurants";
INSERT INTO "dishes" ("id", "name", "created_at", "updated_at") VALUES (122903280, 'Appetizer', '2023-05-11 00:21:07.183301', '2023-05-11 00:21:07.183301'), (509217612, 'Main Course', '2023-05-11 00:21:07.183301', '2023-05-11 00:21:07.183301'), (693976031, 'Dessert', '2023-05-11 00:21:07.183301', '2023-05-11 00:21:07.183301');
INSERT INTO "items" ("id", "name", "price", "callories", "created_at", "updated_at", "restaurant_id", "dish_id") VALUES (920592244, 'Pan', 1000, 150, '2023-05-11 00:21:07.187795', '2023-05-11 00:21:07.187795', 648827877, 122903280), (802574032, 'Hamburguesa', 1500, 200, '2023-05-11 00:21:07.187795', '2023-05-11 00:21:07.187795', 648827877, 509217612), (416382555, 'Papa Frita', 1000, 300, '2023-05-11 00:21:07.187795', '2023-05-11 00:21:07.187795', 648827877, 693976031), (112585724, 'Lechuga', 200, 20, '2023-05-11 00:21:07.187795', '2023-05-11 00:21:07.187795', 1067778657, 122903280), (833805165, 'Tomate', 100, 50, '2023-05-11 00:21:07.187795', '2023-05-11 00:21:07.187795', 1067778657, 509217612), (683379417, 'Queso', 300, 200, '2023-05-11 00:21:07.187795', '2023-05-11 00:21:07.187795', 1067778657, 693976031), (532462148, 'Cebolla', 1000, 100, '2023-05-11 00:21:07.187795', '2023-05-11 00:21:07.187795', 144847564, 122903280), (251897809, 'Frutilla', 1000, 200, '2023-05-11 00:21:07.187795', '2023-05-11 00:21:07.187795', 144847564, 509217612), (939824966, 'Helado', 1000, 200, '2023-05-11 00:21:07.187795', '2023-05-11 00:21:07.187795', 144847564, 693976031);
INSERT INTO "restaurants" ("id", "name", "address", "created_at", "updated_at") VALUES (648827877, 'Nestizo', 'Viacura 4000', '2023-05-11 00:21:07.193409', '2023-05-11 00:21:07.193409'), (1067778657, 'NcDonalds', 'El Salto s/n', '2023-05-11 00:21:07.193409', '2023-05-11 00:21:07.193409'), (144847564, 'Huendis', 'Vitacura 2800', '2023-05-11 00:21:07.193409', '2023-05-11 00:21:07.193409')[0m
  [1m[36mTRANSACTION (2.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mALTER TABLE "dishes" ENABLE TRIGGER ALL;ALTER TABLE "items" ENABLE TRIGGER ALL;ALTER TABLE "restaurants" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (2.3ms)[0m  [1m[35mdo $$
  declare r record;
BEGIN
FOR r IN (
  SELECT FORMAT(
    'UPDATE pg_constraint SET convalidated=false WHERE conname = ''%I'' AND connamespace::regnamespace = ''%I''::regnamespace; ALTER TABLE %I.%I VALIDATE CONSTRAINT %I;',
    constraint_name,
    table_schema,
    table_schema,
    table_name,
    constraint_name
  ) AS constraint_check
  FROM information_schema.table_constraints WHERE constraint_type = 'FOREIGN KEY'
)
  LOOP
    EXECUTE (r.constraint_check);
  END LOOP;
END;
$$;
[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------------
RestaurantTest: test_should_validate_presence_of_address_at_model_level
-----------------------------------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------
RestaurantTest: test_should_validate_presence_of_address_at_db_level
--------------------------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------
RestaurantTest: test_should_have_many_items
-------------------------------------------
  [1m[36mRestaurant Load (0.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."name" = $1 LIMIT $2[0m  [["name", "NcDonalds"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------
RestaurantTest: test_should_validate_presence_of_name_at_db_level
-----------------------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------
RestaurantTest: test_should_load_fixtures_correctly
---------------------------------------------------
  [1m[36mRestaurant Load (0.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."name" = $1 LIMIT $2[0m  [["name", "NcDonalds"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------
RestaurantTest: test_should_validate_presence_of_name_at_model_level
--------------------------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------
ItemTest: test_should_validate_presence_of_callories_at_model_level
-------------------------------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------
ItemTest: test_should_validate_presence_of_price_at_db_level
------------------------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------
ItemTest: test_should_validate_presence_of_name_at_model_level
--------------------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------
ItemTest: test_should_load_fixtures_correctly
---------------------------------------------
  [1m[36mItem Load (0.2ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."name" = $1 LIMIT $2[0m  [["name", "Hamburguesa"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------
ItemTest: test_should_validate_presence_of_callories_at_db_level
----------------------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------
ItemTest: test_item_belongs_to_a_dish
-------------------------------------
  [1m[36mItem Load (0.2ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."name" = $1 LIMIT $2[0m  [["name", "Hamburguesa"], ["LIMIT", 1]]
  [1m[36mDish Load (0.3ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."id" = $1 LIMIT $2[0m  [["id", 509217612], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------
ItemTest: test_should_validate_presence_of_price_at_model_level
---------------------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------
ItemTest: test_item_belongs_to_a_restaurant
-------------------------------------------
  [1m[36mItem Load (0.2ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."name" = $1 LIMIT $2[0m  [["name", "Hamburguesa"], ["LIMIT", 1]]
  [1m[36mRestaurant Load (0.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 648827877], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------
ItemTest: test_should_validate_presence_of_name_at_db_level
-----------------------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------
DishTest: test_should_have_many_items
-------------------------------------
  [1m[36mDish Load (0.2ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."name" = $1 LIMIT $2[0m  [["name", "Dessert"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------
DishTest: test_should_load_fixtures_correctly
---------------------------------------------
  [1m[36mDish Load (0.2ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."name" = $1 LIMIT $2[0m  [["name", "Dessert"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------
DishTest: test_should_validate_presence_of_name_at_model_level
--------------------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------
DishTest: test_should_validate_presence_of_name_at_db_level
-----------------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------
RoutesTest: test_should_route_to_items_show
-------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------
RoutesTest: test_should_route_to_items_index
--------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------
RoutesTest: test_should_route_to_dishes_index
---------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------
RoutesTest: test_should_route_to_restaurants_index
--------------------------------------------------
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------
RoutesTest: test_should_route_to_dishes_show
--------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------
RoutesTest: test_should_route_to_restaurants_show
-------------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (1.5ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "schema_sha1"], ["LIMIT", 1]]
  [1m[36mActiveRecord::SchemaMigration Pluck (2.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (4.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.6ms)[0m  [1m[35mALTER TABLE "dishes" DISABLE TRIGGER ALL;ALTER TABLE "items" DISABLE TRIGGER ALL;ALTER TABLE "restaurants" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (21.3ms)[0m  [1m[31mDELETE FROM "dishes";
DELETE FROM "items";
DELETE FROM "restaurants";
INSERT INTO "dishes" ("id", "name", "created_at", "updated_at") VALUES (122903280, 'Appetizer', '2023-05-12 14:00:02.737503', '2023-05-12 14:00:02.737503'), (509217612, 'Main Course', '2023-05-12 14:00:02.737503', '2023-05-12 14:00:02.737503'), (693976031, 'Dessert', '2023-05-12 14:00:02.737503', '2023-05-12 14:00:02.737503');
INSERT INTO "items" ("id", "name", "price", "callories", "created_at", "updated_at", "restaurant_id", "dish_id") VALUES (920592244, 'Pan', 1000, 150, '2023-05-12 14:00:02.758411', '2023-05-12 14:00:02.758411', 648827877, 122903280), (802574032, 'Hamburguesa', 1500, 200, '2023-05-12 14:00:02.758411', '2023-05-12 14:00:02.758411', 648827877, 509217612), (416382555, 'Papa Frita', 1000, 300, '2023-05-12 14:00:02.758411', '2023-05-12 14:00:02.758411', 648827877, 693976031), (112585724, 'Lechuga', 200, 20, '2023-05-12 14:00:02.758411', '2023-05-12 14:00:02.758411', 1067778657, 122903280), (833805165, 'Tomate', 100, 50, '2023-05-12 14:00:02.758411', '2023-05-12 14:00:02.758411', 1067778657, 509217612), (683379417, 'Queso', 300, 200, '2023-05-12 14:00:02.758411', '2023-05-12 14:00:02.758411', 1067778657, 693976031), (532462148, 'Cebolla', 1000, 100, '2023-05-12 14:00:02.758411', '2023-05-12 14:00:02.758411', 144847564, 122903280), (251897809, 'Frutilla', 1000, 200, '2023-05-12 14:00:02.758411', '2023-05-12 14:00:02.758411', 144847564, 509217612), (939824966, 'Helado', 1000, 200, '2023-05-12 14:00:02.758411', '2023-05-12 14:00:02.758411', 144847564, 693976031);
INSERT INTO "restaurants" ("id", "name", "address", "created_at", "updated_at") VALUES (648827877, 'Nestizo', 'Viacura 4000', '2023-05-12 14:00:02.771752', '2023-05-12 14:00:02.771752'), (1067778657, 'NcDonalds', 'El Salto s/n', '2023-05-12 14:00:02.771752', '2023-05-12 14:00:02.771752'), (144847564, 'Huendis', 'Vitacura 2800', '2023-05-12 14:00:02.771752', '2023-05-12 14:00:02.771752')[0m
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "dishes" ENABLE TRIGGER ALL;ALTER TABLE "items" ENABLE TRIGGER ALL;ALTER TABLE "restaurants" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (17.3ms)[0m  [1m[35mdo $$
  declare r record;
BEGIN
FOR r IN (
  SELECT FORMAT(
    'UPDATE pg_constraint SET convalidated=false WHERE conname = ''%I'' AND connamespace::regnamespace = ''%I''::regnamespace; ALTER TABLE %I.%I VALIDATE CONSTRAINT %I;',
    constraint_name,
    table_schema,
    table_schema,
    table_name,
    constraint_name
  ) AS constraint_check
  FROM information_schema.table_constraints WHERE constraint_type = 'FOREIGN KEY'
)
  LOOP
    EXECUTE (r.constraint_check);
  END LOOP;
END;
$$;
[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------
RoutesTest: test_should_route_to_dishes_show
--------------------------------------------
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------
RoutesTest: test_should_route_to_restaurants_index
--------------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------
RoutesTest: test_should_route_to_dishes_index
---------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------
RoutesTest: test_should_route_to_items_index
--------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------
RoutesTest: test_should_route_to_items_show
-------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------
RoutesTest: test_should_route_to_restaurants_show
-------------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------
ItemTest: test_item_belongs_to_a_restaurant
-------------------------------------------
  [1m[36mItem Load (0.4ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."name" = $1 LIMIT $2[0m  [["name", "Hamburguesa"], ["LIMIT", 1]]
  [1m[36mRestaurant Load (0.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 648827877], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------
ItemTest: test_should_validate_presence_of_price_at_db_level
------------------------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------
ItemTest: test_should_load_fixtures_correctly
---------------------------------------------
  [1m[36mItem Load (0.3ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."name" = $1 LIMIT $2[0m  [["name", "Hamburguesa"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------
ItemTest: test_should_validate_presence_of_callories_at_model_level
-------------------------------------------------------------------
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------
ItemTest: test_item_belongs_to_a_dish
-------------------------------------
  [1m[36mItem Load (0.4ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."name" = $1 LIMIT $2[0m  [["name", "Hamburguesa"], ["LIMIT", 1]]
  [1m[36mDish Load (0.3ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."id" = $1 LIMIT $2[0m  [["id", 509217612], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------
ItemTest: test_should_validate_presence_of_callories_at_db_level
----------------------------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------
ItemTest: test_should_validate_presence_of_price_at_model_level
---------------------------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------
ItemTest: test_should_validate_presence_of_name_at_db_level
-----------------------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------
ItemTest: test_should_validate_presence_of_name_at_model_level
--------------------------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------
DishTest: test_should_validate_presence_of_name_at_model_level
--------------------------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------
DishTest: test_should_have_many_items
-------------------------------------
  [1m[36mDish Load (0.3ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."name" = $1 LIMIT $2[0m  [["name", "Dessert"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------
DishTest: test_should_load_fixtures_correctly
---------------------------------------------
  [1m[36mDish Load (0.3ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."name" = $1 LIMIT $2[0m  [["name", "Dessert"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------
DishTest: test_should_validate_presence_of_name_at_db_level
-----------------------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------
RestaurantTest: test_should_load_fixtures_correctly
---------------------------------------------------
  [1m[36mRestaurant Load (0.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."name" = $1 LIMIT $2[0m  [["name", "NcDonalds"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------
RestaurantTest: test_should_validate_presence_of_name_at_db_level
-----------------------------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------
RestaurantTest: test_should_have_many_items
-------------------------------------------
  [1m[36mRestaurant Load (0.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."name" = $1 LIMIT $2[0m  [["name", "NcDonalds"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------
RestaurantTest: test_should_validate_presence_of_address_at_db_level
--------------------------------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------------
RestaurantTest: test_should_validate_presence_of_address_at_model_level
-----------------------------------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------
RestaurantTest: test_should_validate_presence_of_name_at_model_level
--------------------------------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (0.4ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "schema_sha1"], ["LIMIT", 1]]
  [1m[36mActiveRecord::SchemaMigration Pluck (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "dishes" DISABLE TRIGGER ALL;ALTER TABLE "items" DISABLE TRIGGER ALL;ALTER TABLE "restaurants" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.8ms)[0m  [1m[31mDELETE FROM "dishes";
DELETE FROM "items";
DELETE FROM "restaurants";
INSERT INTO "dishes" ("id", "name", "created_at", "updated_at") VALUES (122903280, 'Appetizer', '2023-05-12 14:12:54.706662', '2023-05-12 14:12:54.706662'), (509217612, 'Main Course', '2023-05-12 14:12:54.706662', '2023-05-12 14:12:54.706662'), (693976031, 'Dessert', '2023-05-12 14:12:54.706662', '2023-05-12 14:12:54.706662');
INSERT INTO "items" ("id", "name", "price", "callories", "created_at", "updated_at", "restaurant_id", "dish_id") VALUES (920592244, 'Pan', 1000, 150, '2023-05-12 14:12:54.712463', '2023-05-12 14:12:54.712463', 648827877, 122903280), (802574032, 'Hamburguesa', 1500, 200, '2023-05-12 14:12:54.712463', '2023-05-12 14:12:54.712463', 648827877, 509217612), (416382555, 'Papa Frita', 1000, 300, '2023-05-12 14:12:54.712463', '2023-05-12 14:12:54.712463', 648827877, 693976031), (112585724, 'Lechuga', 200, 20, '2023-05-12 14:12:54.712463', '2023-05-12 14:12:54.712463', 1067778657, 122903280), (833805165, 'Tomate', 100, 50, '2023-05-12 14:12:54.712463', '2023-05-12 14:12:54.712463', 1067778657, 509217612), (683379417, 'Queso', 300, 200, '2023-05-12 14:12:54.712463', '2023-05-12 14:12:54.712463', 1067778657, 693976031), (532462148, 'Cebolla', 1000, 100, '2023-05-12 14:12:54.712463', '2023-05-12 14:12:54.712463', 144847564, 122903280), (251897809, 'Frutilla', 1000, 200, '2023-05-12 14:12:54.712463', '2023-05-12 14:12:54.712463', 144847564, 509217612), (939824966, 'Helado', 1000, 200, '2023-05-12 14:12:54.712463', '2023-05-12 14:12:54.712463', 144847564, 693976031);
INSERT INTO "restaurants" ("id", "name", "address", "created_at", "updated_at") VALUES (648827877, 'Nestizo', 'Viacura 4000', '2023-05-12 14:12:54.718569', '2023-05-12 14:12:54.718569'), (1067778657, 'NcDonalds', 'El Salto s/n', '2023-05-12 14:12:54.718569', '2023-05-12 14:12:54.718569'), (144847564, 'Huendis', 'Vitacura 2800', '2023-05-12 14:12:54.718569', '2023-05-12 14:12:54.718569')[0m
  [1m[36mTRANSACTION (1.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (22.9ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "dishes" ENABLE TRIGGER ALL;ALTER TABLE "items" ENABLE TRIGGER ALL;ALTER TABLE "restaurants" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (2.8ms)[0m  [1m[35mdo $$
  declare r record;
BEGIN
FOR r IN (
  SELECT FORMAT(
    'UPDATE pg_constraint SET convalidated=false WHERE conname = ''%I'' AND connamespace::regnamespace = ''%I''::regnamespace; ALTER TABLE %I.%I VALIDATE CONSTRAINT %I;',
    constraint_name,
    table_schema,
    table_schema,
    table_name,
    constraint_name
  ) AS constraint_check
  FROM information_schema.table_constraints WHERE constraint_type = 'FOREIGN KEY'
)
  LOOP
    EXECUTE (r.constraint_check);
  END LOOP;
END;
$$;
[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
-------------------------------------
DishTest: test_should_have_many_items
-------------------------------------
  [1m[36mDish Load (0.4ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."name" = $1 LIMIT $2[0m  [["name", "Dessert"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------
DishTest: test_should_validate_presence_of_name_at_model_level
--------------------------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------
DishTest: test_should_validate_presence_of_name_at_db_level
-----------------------------------------------------------
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------
DishTest: test_should_load_fixtures_correctly
---------------------------------------------
  [1m[36mDish Load (0.2ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."name" = $1 LIMIT $2[0m  [["name", "Dessert"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------
ItemTest: test_should_validate_presence_of_price_at_model_level
---------------------------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------
ItemTest: test_should_load_fixtures_correctly
---------------------------------------------
  [1m[36mItem Load (0.3ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."name" = $1 LIMIT $2[0m  [["name", "Hamburguesa"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------
ItemTest: test_should_validate_presence_of_name_at_db_level
-----------------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------
ItemTest: test_item_belongs_to_a_restaurant
-------------------------------------------
  [1m[36mItem Load (0.3ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."name" = $1 LIMIT $2[0m  [["name", "Hamburguesa"], ["LIMIT", 1]]
  [1m[36mRestaurant Load (0.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 648827877], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------
ItemTest: test_item_belongs_to_a_dish
-------------------------------------
  [1m[36mItem Load (0.2ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."name" = $1 LIMIT $2[0m  [["name", "Hamburguesa"], ["LIMIT", 1]]
  [1m[36mDish Load (0.2ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."id" = $1 LIMIT $2[0m  [["id", 509217612], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------
ItemTest: test_should_validate_presence_of_callories_at_model_level
-------------------------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------
ItemTest: test_should_validate_presence_of_callories_at_db_level
----------------------------------------------------------------
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------
ItemTest: test_should_validate_presence_of_price_at_db_level
------------------------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------
ItemTest: test_should_validate_presence_of_name_at_model_level
--------------------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------
RestaurantTest: test_should_validate_presence_of_address_at_db_level
--------------------------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------
RestaurantTest: test_should_validate_presence_of_name_at_db_level
-----------------------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------
RestaurantTest: test_should_validate_presence_of_name_at_model_level
--------------------------------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------
RestaurantTest: test_should_have_many_items
-------------------------------------------
  [1m[36mRestaurant Load (0.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."name" = $1 LIMIT $2[0m  [["name", "NcDonalds"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------------
RestaurantTest: test_should_validate_presence_of_address_at_model_level
-----------------------------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------
RestaurantTest: test_should_load_fixtures_correctly
---------------------------------------------------
  [1m[36mRestaurant Load (0.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."name" = $1 LIMIT $2[0m  [["name", "NcDonalds"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------
RoutesTest: test_should_route_to_items_index
--------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------
RoutesTest: test_should_route_to_restaurants_index
--------------------------------------------------
  [1m[36mTRANSACTION (4.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------
RoutesTest: test_should_route_to_restaurants_show
-------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------
RoutesTest: test_should_route_to_dishes_index
---------------------------------------------
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------
RoutesTest: test_should_route_to_items_show
-------------------------------------------
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------
RoutesTest: test_should_route_to_dishes_show
--------------------------------------------
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (0.4ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "schema_sha1"], ["LIMIT", 1]]
  [1m[36mActiveRecord::SchemaMigration Pluck (0.9ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "dishes" DISABLE TRIGGER ALL;ALTER TABLE "items" DISABLE TRIGGER ALL;ALTER TABLE "restaurants" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.2ms)[0m  [1m[31mDELETE FROM "dishes";
DELETE FROM "items";
DELETE FROM "restaurants";
INSERT INTO "dishes" ("id", "name", "created_at", "updated_at") VALUES (122903280, 'Appetizer', '2023-05-12 14:47:07.514656', '2023-05-12 14:47:07.514656'), (509217612, 'Main Course', '2023-05-12 14:47:07.514656', '2023-05-12 14:47:07.514656'), (693976031, 'Dessert', '2023-05-12 14:47:07.514656', '2023-05-12 14:47:07.514656');
INSERT INTO "items" ("id", "name", "price", "callories", "created_at", "updated_at", "restaurant_id", "dish_id") VALUES (920592244, 'Pan', 1000, 150, '2023-05-12 14:47:07.521585', '2023-05-12 14:47:07.521585', 648827877, 122903280), (802574032, 'Hamburguesa', 1500, 200, '2023-05-12 14:47:07.521585', '2023-05-12 14:47:07.521585', 648827877, 509217612), (416382555, 'Papa Frita', 1000, 300, '2023-05-12 14:47:07.521585', '2023-05-12 14:47:07.521585', 648827877, 693976031), (112585724, 'Lechuga', 200, 20, '2023-05-12 14:47:07.521585', '2023-05-12 14:47:07.521585', 1067778657, 122903280), (833805165, 'Tomate', 100, 50, '2023-05-12 14:47:07.521585', '2023-05-12 14:47:07.521585', 1067778657, 509217612), (683379417, 'Queso', 300, 200, '2023-05-12 14:47:07.521585', '2023-05-12 14:47:07.521585', 1067778657, 693976031), (532462148, 'Cebolla', 1000, 100, '2023-05-12 14:47:07.521585', '2023-05-12 14:47:07.521585', 144847564, 122903280), (251897809, 'Frutilla', 1000, 200, '2023-05-12 14:47:07.521585', '2023-05-12 14:47:07.521585', 144847564, 509217612), (939824966, 'Helado', 1000, 200, '2023-05-12 14:47:07.521585', '2023-05-12 14:47:07.521585', 144847564, 693976031);
INSERT INTO "restaurants" ("id", "name", "address", "created_at", "updated_at") VALUES (648827877, 'Nestizo', 'Viacura 4000', '2023-05-12 14:47:07.532169', '2023-05-12 14:47:07.532169'), (1067778657, 'NcDonalds', 'El Salto s/n', '2023-05-12 14:47:07.532169', '2023-05-12 14:47:07.532169'), (144847564, 'Huendis', 'Vitacura 2800', '2023-05-12 14:47:07.532169', '2023-05-12 14:47:07.532169')[0m
  [1m[36mTRANSACTION (14.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "dishes" ENABLE TRIGGER ALL;ALTER TABLE "items" ENABLE TRIGGER ALL;ALTER TABLE "restaurants" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (3.2ms)[0m  [1m[35mdo $$
  declare r record;
BEGIN
FOR r IN (
  SELECT FORMAT(
    'UPDATE pg_constraint SET convalidated=false WHERE conname = ''%I'' AND connamespace::regnamespace = ''%I''::regnamespace; ALTER TABLE %I.%I VALIDATE CONSTRAINT %I;',
    constraint_name,
    table_schema,
    table_schema,
    table_name,
    constraint_name
  ) AS constraint_check
  FROM information_schema.table_constraints WHERE constraint_type = 'FOREIGN KEY'
)
  LOOP
    EXECUTE (r.constraint_check);
  END LOOP;
END;
$$;
[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------
DishesControllerTest: test_should_get_index
-------------------------------------------
Started GET "/dishes/index" for 127.0.0.1 at 2023-05-12 10:47:07 -0400
Processing by DishesController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering dishes/index.html.erb within layouts/application
  Rendered dishes/index.html.erb within layouts/application (Duration: 3.8ms | Allocations: 434)
  Rendered layout layouts/application.html.erb (Duration: 16.7ms | Allocations: 2985)
Completed 500 Internal Server Error in 60ms (ActiveRecord: 0.0ms | Allocations: 7789)
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------
ItemTest: test_should_validate_presence_of_name_at_db_level
-----------------------------------------------------------
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------
ItemTest: test_should_validate_presence_of_price_at_db_level
------------------------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------
ItemTest: test_should_validate_presence_of_callories_at_model_level
-------------------------------------------------------------------
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------
ItemTest: test_should_validate_presence_of_callories_at_db_level
----------------------------------------------------------------
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------
ItemTest: test_item_belongs_to_a_dish
-------------------------------------
  [1m[36mItem Load (0.3ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."name" = $1 LIMIT $2[0m  [["name", "Hamburguesa"], ["LIMIT", 1]]
  [1m[36mDish Load (0.3ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."id" = $1 LIMIT $2[0m  [["id", 509217612], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------
ItemTest: test_should_load_fixtures_correctly
---------------------------------------------
  [1m[36mItem Load (0.3ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."name" = $1 LIMIT $2[0m  [["name", "Hamburguesa"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------
ItemTest: test_should_validate_presence_of_price_at_model_level
---------------------------------------------------------------
  [1m[36mTRANSACTION (6.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------
ItemTest: test_item_belongs_to_a_restaurant
-------------------------------------------
  [1m[36mItem Load (0.3ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."name" = $1 LIMIT $2[0m  [["name", "Hamburguesa"], ["LIMIT", 1]]
  [1m[36mRestaurant Load (0.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 648827877], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------
ItemTest: test_should_validate_presence_of_name_at_model_level
--------------------------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------
DishTest: test_should_validate_presence_of_name_at_model_level
--------------------------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------
DishTest: test_should_have_many_items
-------------------------------------
  [1m[36mDish Load (0.3ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."name" = $1 LIMIT $2[0m  [["name", "Dessert"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------
DishTest: test_should_load_fixtures_correctly
---------------------------------------------
  [1m[36mDish Load (0.3ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."name" = $1 LIMIT $2[0m  [["name", "Dessert"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------
DishTest: test_should_validate_presence_of_name_at_db_level
-----------------------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (1.9ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------
RoutesTest: test_should_route_to_restaurants_index
--------------------------------------------------
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------
RoutesTest: test_should_route_to_restaurants_show
-------------------------------------------------
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------
RoutesTest: test_should_route_to_items_show
-------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------
RoutesTest: test_should_route_to_dishes_index
---------------------------------------------
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (3.4ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------
RoutesTest: test_should_route_to_items_index
--------------------------------------------
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------
RoutesTest: test_should_route_to_dishes_show
--------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------
RestaurantsControllerTest: test_should_get_index
------------------------------------------------
Started GET "/restaurants/index" for 127.0.0.1 at 2023-05-12 10:47:08 -0400
Processing by RestaurantsController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering restaurants/index.html.erb within layouts/application
  Rendered restaurants/index.html.erb within layouts/application (Duration: 0.5ms | Allocations: 103)
  Rendered layout layouts/application.html.erb (Duration: 2.1ms | Allocations: 1040)
Completed 500 Internal Server Error in 4ms (ActiveRecord: 0.0ms | Allocations: 1616)
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------
IntemsControllerTest: test_should_get_index
-------------------------------------------
Started GET "/intems/index" for 127.0.0.1 at 2023-05-12 10:47:08 -0400
Processing by IntemsController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering intems/index.html.erb within layouts/application
  Rendered intems/index.html.erb within layouts/application (Duration: 0.5ms | Allocations: 106)
  Rendered layout layouts/application.html.erb (Duration: 2.1ms | Allocations: 1068)
Completed 500 Internal Server Error in 26ms (ActiveRecord: 0.0ms | Allocations: 1638)
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------
RestaurantTest: test_should_validate_presence_of_name_at_db_level
-----------------------------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (6.0ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------
RestaurantTest: test_should_validate_presence_of_name_at_model_level
--------------------------------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------------
RestaurantTest: test_should_validate_presence_of_address_at_model_level
-----------------------------------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------
RestaurantTest: test_should_have_many_items
-------------------------------------------
  [1m[36mRestaurant Load (0.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."name" = $1 LIMIT $2[0m  [["name", "NcDonalds"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------
RestaurantTest: test_should_validate_presence_of_address_at_db_level
--------------------------------------------------------------------
  [1m[36mTRANSACTION (2.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------
RestaurantTest: test_should_load_fixtures_correctly
---------------------------------------------------
  [1m[36mRestaurant Load (2.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."name" = $1 LIMIT $2[0m  [["name", "NcDonalds"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (6.0ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (0.7ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "schema_sha1"], ["LIMIT", 1]]
  [1m[36mActiveRecord::SchemaMigration Pluck (0.9ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "dishes" DISABLE TRIGGER ALL;ALTER TABLE "items" DISABLE TRIGGER ALL;ALTER TABLE "restaurants" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.6ms)[0m  [1m[31mDELETE FROM "dishes";
DELETE FROM "items";
DELETE FROM "restaurants";
INSERT INTO "dishes" ("id", "name", "created_at", "updated_at") VALUES (122903280, 'Appetizer', '2023-05-12 15:04:20.253121', '2023-05-12 15:04:20.253121'), (509217612, 'Main Course', '2023-05-12 15:04:20.253121', '2023-05-12 15:04:20.253121'), (693976031, 'Dessert', '2023-05-12 15:04:20.253121', '2023-05-12 15:04:20.253121');
INSERT INTO "items" ("id", "name", "price", "callories", "created_at", "updated_at", "restaurant_id", "dish_id") VALUES (920592244, 'Pan', 1000, 150, '2023-05-12 15:04:20.263834', '2023-05-12 15:04:20.263834', 648827877, 122903280), (802574032, 'Hamburguesa', 1500, 200, '2023-05-12 15:04:20.263834', '2023-05-12 15:04:20.263834', 648827877, 509217612), (416382555, 'Papa Frita', 1000, 300, '2023-05-12 15:04:20.263834', '2023-05-12 15:04:20.263834', 648827877, 693976031), (112585724, 'Lechuga', 200, 20, '2023-05-12 15:04:20.263834', '2023-05-12 15:04:20.263834', 1067778657, 122903280), (833805165, 'Tomate', 100, 50, '2023-05-12 15:04:20.263834', '2023-05-12 15:04:20.263834', 1067778657, 509217612), (683379417, 'Queso', 300, 200, '2023-05-12 15:04:20.263834', '2023-05-12 15:04:20.263834', 1067778657, 693976031), (532462148, 'Cebolla', 1000, 100, '2023-05-12 15:04:20.263834', '2023-05-12 15:04:20.263834', 144847564, 122903280), (251897809, 'Frutilla', 1000, 200, '2023-05-12 15:04:20.263834', '2023-05-12 15:04:20.263834', 144847564, 509217612), (939824966, 'Helado', 1000, 200, '2023-05-12 15:04:20.263834', '2023-05-12 15:04:20.263834', 144847564, 693976031);
INSERT INTO "restaurants" ("id", "name", "address", "created_at", "updated_at") VALUES (648827877, 'Nestizo', 'Viacura 4000', '2023-05-12 15:04:20.327730', '2023-05-12 15:04:20.327730'), (1067778657, 'NcDonalds', 'El Salto s/n', '2023-05-12 15:04:20.327730', '2023-05-12 15:04:20.327730'), (144847564, 'Huendis', 'Vitacura 2800', '2023-05-12 15:04:20.327730', '2023-05-12 15:04:20.327730')[0m
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "dishes" ENABLE TRIGGER ALL;ALTER TABLE "items" ENABLE TRIGGER ALL;ALTER TABLE "restaurants" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (3.3ms)[0m  [1m[35mdo $$
  declare r record;
BEGIN
FOR r IN (
  SELECT FORMAT(
    'UPDATE pg_constraint SET convalidated=false WHERE conname = ''%I'' AND connamespace::regnamespace = ''%I''::regnamespace; ALTER TABLE %I.%I VALIDATE CONSTRAINT %I;',
    constraint_name,
    table_schema,
    table_schema,
    table_name,
    constraint_name
  ) AS constraint_check
  FROM information_schema.table_constraints WHERE constraint_type = 'FOREIGN KEY'
)
  LOOP
    EXECUTE (r.constraint_check);
  END LOOP;
END;
$$;
[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------
RestaurantsControllerTest: test_should_get_index
------------------------------------------------
Started GET "/restaurants/index" for 127.0.0.1 at 2023-05-12 11:04:20 -0400
Processing by RestaurantsController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering restaurants/index.html.erb within layouts/application
  Rendered restaurants/index.html.erb within layouts/application (Duration: 2.0ms | Allocations: 290)
  Rendered layout layouts/application.html.erb (Duration: 6.8ms | Allocations: 2133)
Completed 500 Internal Server Error in 26ms (ActiveRecord: 0.0ms | Allocations: 5211)
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------
DishesControllerTest: test_should_get_index
-------------------------------------------
Started GET "/dishes/index" for 127.0.0.1 at 2023-05-12 11:04:20 -0400
Processing by DishesController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering dishes/index.html.erb within layouts/application
  Rendered dishes/index.html.erb within layouts/application (Duration: 0.4ms | Allocations: 103)
  Rendered layout layouts/application.html.erb (Duration: 4.6ms | Allocations: 1040)
Completed 500 Internal Server Error in 7ms (ActiveRecord: 0.0ms | Allocations: 1654)
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------
RoutesTest: test_should_route_to_dishes_index
---------------------------------------------
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------
RoutesTest: test_should_route_to_restaurants_index
--------------------------------------------------
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------
RoutesTest: test_should_route_to_dishes_show
--------------------------------------------
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------
RoutesTest: test_should_route_to_restaurants_show
-------------------------------------------------
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------
RoutesTest: test_should_route_to_items_show
-------------------------------------------
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------
RoutesTest: test_should_route_to_items_index
--------------------------------------------
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------
RestaurantTest: test_should_have_many_items
-------------------------------------------
  [1m[36mRestaurant Load (0.4ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."name" = $1 LIMIT $2[0m  [["name", "NcDonalds"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (1.9ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------
RestaurantTest: test_should_validate_presence_of_name_at_db_level
-----------------------------------------------------------------
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------
RestaurantTest: test_should_load_fixtures_correctly
---------------------------------------------------
  [1m[36mRestaurant Load (0.5ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."name" = $1 LIMIT $2[0m  [["name", "NcDonalds"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------
RestaurantTest: test_should_validate_presence_of_name_at_model_level
--------------------------------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------------
RestaurantTest: test_should_validate_presence_of_address_at_model_level
-----------------------------------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------
RestaurantTest: test_should_validate_presence_of_address_at_db_level
--------------------------------------------------------------------
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------
ItemTest: test_should_load_fixtures_correctly
---------------------------------------------
  [1m[36mItem Load (0.5ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."name" = $1 LIMIT $2[0m  [["name", "Hamburguesa"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------
ItemTest: test_item_belongs_to_a_restaurant
-------------------------------------------
  [1m[36mItem Load (1.3ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."name" = $1 LIMIT $2[0m  [["name", "Hamburguesa"], ["LIMIT", 1]]
  [1m[36mRestaurant Load (0.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 648827877], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------
ItemTest: test_should_validate_presence_of_price_at_db_level
------------------------------------------------------------
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------
ItemTest: test_should_validate_presence_of_callories_at_model_level
-------------------------------------------------------------------
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
-------------------------------------
ItemTest: test_item_belongs_to_a_dish
-------------------------------------
  [1m[36mItem Load (0.5ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."name" = $1 LIMIT $2[0m  [["name", "Hamburguesa"], ["LIMIT", 1]]
  [1m[36mDish Load (0.4ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."id" = $1 LIMIT $2[0m  [["id", 509217612], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------
ItemTest: test_should_validate_presence_of_price_at_model_level
---------------------------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------
ItemTest: test_should_validate_presence_of_name_at_db_level
-----------------------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------
ItemTest: test_should_validate_presence_of_name_at_model_level
--------------------------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------
ItemTest: test_should_validate_presence_of_callories_at_db_level
----------------------------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------
DishTest: test_should_have_many_items
-------------------------------------
  [1m[36mDish Load (0.3ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."name" = $1 LIMIT $2[0m  [["name", "Dessert"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------
DishTest: test_should_validate_presence_of_name_at_model_level
--------------------------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------
DishTest: test_should_load_fixtures_correctly
---------------------------------------------
  [1m[36mDish Load (0.3ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."name" = $1 LIMIT $2[0m  [["name", "Dessert"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------
DishTest: test_should_validate_presence_of_name_at_db_level
-----------------------------------------------------------
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------
IntemsControllerTest: test_should_get_index
-------------------------------------------
Started GET "/intems/index" for 127.0.0.1 at 2023-05-12 11:04:20 -0400
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (0.4ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "schema_sha1"], ["LIMIT", 1]]
  [1m[36mActiveRecord::SchemaMigration Pluck (1.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "dishes" DISABLE TRIGGER ALL;ALTER TABLE "items" DISABLE TRIGGER ALL;ALTER TABLE "restaurants" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.1ms)[0m  [1m[31mDELETE FROM "dishes";
DELETE FROM "items";
DELETE FROM "restaurants";
INSERT INTO "dishes" ("id", "name", "created_at", "updated_at") VALUES (122903280, 'Appetizer', '2023-05-12 15:05:47.372379', '2023-05-12 15:05:47.372379'), (509217612, 'Main Course', '2023-05-12 15:05:47.372379', '2023-05-12 15:05:47.372379'), (693976031, 'Dessert', '2023-05-12 15:05:47.372379', '2023-05-12 15:05:47.372379');
INSERT INTO "items" ("id", "name", "price", "callories", "created_at", "updated_at", "restaurant_id", "dish_id") VALUES (920592244, 'Pan', 1000, 150, '2023-05-12 15:05:47.378937', '2023-05-12 15:05:47.378937', 648827877, 122903280), (802574032, 'Hamburguesa', 1500, 200, '2023-05-12 15:05:47.378937', '2023-05-12 15:05:47.378937', 648827877, 509217612), (416382555, 'Papa Frita', 1000, 300, '2023-05-12 15:05:47.378937', '2023-05-12 15:05:47.378937', 648827877, 693976031), (112585724, 'Lechuga', 200, 20, '2023-05-12 15:05:47.378937', '2023-05-12 15:05:47.378937', 1067778657, 122903280), (833805165, 'Tomate', 100, 50, '2023-05-12 15:05:47.378937', '2023-05-12 15:05:47.378937', 1067778657, 509217612), (683379417, 'Queso', 300, 200, '2023-05-12 15:05:47.378937', '2023-05-12 15:05:47.378937', 1067778657, 693976031), (532462148, 'Cebolla', 1000, 100, '2023-05-12 15:05:47.378937', '2023-05-12 15:05:47.378937', 144847564, 122903280), (251897809, 'Frutilla', 1000, 200, '2023-05-12 15:05:47.378937', '2023-05-12 15:05:47.378937', 144847564, 509217612), (939824966, 'Helado', 1000, 200, '2023-05-12 15:05:47.378937', '2023-05-12 15:05:47.378937', 144847564, 693976031);
INSERT INTO "restaurants" ("id", "name", "address", "created_at", "updated_at") VALUES (648827877, 'Nestizo', 'Viacura 4000', '2023-05-12 15:05:47.423566', '2023-05-12 15:05:47.423566'), (1067778657, 'NcDonalds', 'El Salto s/n', '2023-05-12 15:05:47.423566', '2023-05-12 15:05:47.423566'), (144847564, 'Huendis', 'Vitacura 2800', '2023-05-12 15:05:47.423566', '2023-05-12 15:05:47.423566')[0m
  [1m[36mTRANSACTION (6.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "dishes" ENABLE TRIGGER ALL;ALTER TABLE "items" ENABLE TRIGGER ALL;ALTER TABLE "restaurants" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (3.5ms)[0m  [1m[35mdo $$
  declare r record;
BEGIN
FOR r IN (
  SELECT FORMAT(
    'UPDATE pg_constraint SET convalidated=false WHERE conname = ''%I'' AND connamespace::regnamespace = ''%I''::regnamespace; ALTER TABLE %I.%I VALIDATE CONSTRAINT %I;',
    constraint_name,
    table_schema,
    table_schema,
    table_name,
    constraint_name
  ) AS constraint_check
  FROM information_schema.table_constraints WHERE constraint_type = 'FOREIGN KEY'
)
  LOOP
    EXECUTE (r.constraint_check);
  END LOOP;
END;
$$;
[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------
ItemTest: test_should_validate_presence_of_name_at_db_level
-----------------------------------------------------------
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------
ItemTest: test_should_validate_presence_of_callories_at_model_level
-------------------------------------------------------------------
  [1m[36mTRANSACTION (3.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------
ItemTest: test_should_validate_presence_of_price_at_model_level
---------------------------------------------------------------
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------
ItemTest: test_should_load_fixtures_correctly
---------------------------------------------
  [1m[36mItem Load (0.3ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."name" = $1 LIMIT $2[0m  [["name", "Hamburguesa"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------
ItemTest: test_item_belongs_to_a_dish
-------------------------------------
  [1m[36mItem Load (0.3ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."name" = $1 LIMIT $2[0m  [["name", "Hamburguesa"], ["LIMIT", 1]]
  [1m[36mDish Load (0.3ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."id" = $1 LIMIT $2[0m  [["id", 509217612], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------
ItemTest: test_should_validate_presence_of_callories_at_db_level
----------------------------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------
ItemTest: test_should_validate_presence_of_price_at_db_level
------------------------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------
ItemTest: test_item_belongs_to_a_restaurant
-------------------------------------------
  [1m[36mItem Load (0.3ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."name" = $1 LIMIT $2[0m  [["name", "Hamburguesa"], ["LIMIT", 1]]
  [1m[36mRestaurant Load (0.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 648827877], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------
ItemTest: test_should_validate_presence_of_name_at_model_level
--------------------------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------
RestaurantTest: test_should_have_many_items
-------------------------------------------
  [1m[36mRestaurant Load (0.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."name" = $1 LIMIT $2[0m  [["name", "NcDonalds"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------------
RestaurantTest: test_should_validate_presence_of_address_at_model_level
-----------------------------------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------
RestaurantTest: test_should_load_fixtures_correctly
---------------------------------------------------
  [1m[36mRestaurant Load (0.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."name" = $1 LIMIT $2[0m  [["name", "NcDonalds"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------
RestaurantTest: test_should_validate_presence_of_name_at_db_level
-----------------------------------------------------------------
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------
RestaurantTest: test_should_validate_presence_of_address_at_db_level
--------------------------------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------
RestaurantTest: test_should_validate_presence_of_name_at_model_level
--------------------------------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------
RoutesTest: test_should_route_to_dishes_index
---------------------------------------------
  [1m[36mTRANSACTION (2.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------
RoutesTest: test_should_route_to_items_show
-------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------
RoutesTest: test_should_route_to_dishes_show
--------------------------------------------
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------
RoutesTest: test_should_route_to_restaurants_index
--------------------------------------------------
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------
RoutesTest: test_should_route_to_items_index
--------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------
RoutesTest: test_should_route_to_restaurants_show
-------------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------
RestaurantsControllerTest: test_should_get_index
------------------------------------------------
Started GET "/restaurants/index" for 127.0.0.1 at 2023-05-12 11:05:47 -0400
Processing by RestaurantsController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering restaurants/index.html.erb within layouts/application
  Rendered restaurants/index.html.erb within layouts/application (Duration: 1.2ms | Allocations: 289)
  Rendered layout layouts/application.html.erb (Duration: 21.2ms | Allocations: 2132)
Completed 500 Internal Server Error in 46ms (ActiveRecord: 0.0ms | Allocations: 5147)
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------
DishesControllerTest: test_should_get_index
-------------------------------------------
Started GET "/dishes/index" for 127.0.0.1 at 2023-05-12 11:05:47 -0400
Processing by DishesController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering dishes/index.html.erb within layouts/application
  Rendered dishes/index.html.erb within layouts/application (Duration: 0.6ms | Allocations: 106)
  Rendered layout layouts/application.html.erb (Duration: 2.5ms | Allocations: 1044)
Completed 500 Internal Server Error in 10ms (ActiveRecord: 0.0ms | Allocations: 1615)
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------
IntemsControllerTest: test_should_get_index
-------------------------------------------
Started GET "/intems/index" for 127.0.0.1 at 2023-05-12 11:05:47 -0400
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------
DishTest: test_should_validate_presence_of_name_at_model_level
--------------------------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------
DishTest: test_should_have_many_items
-------------------------------------
  [1m[36mDish Load (0.3ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."name" = $1 LIMIT $2[0m  [["name", "Dessert"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------
DishTest: test_should_validate_presence_of_name_at_db_level
-----------------------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------
DishTest: test_should_load_fixtures_correctly
---------------------------------------------
  [1m[36mDish Load (0.3ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."name" = $1 LIMIT $2[0m  [["name", "Dessert"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (5.4ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "schema_sha1"], ["LIMIT", 1]]
  [1m[36mActiveRecord::SchemaMigration Pluck (1.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "dishes" DISABLE TRIGGER ALL;ALTER TABLE "items" DISABLE TRIGGER ALL;ALTER TABLE "restaurants" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.5ms)[0m  [1m[31mDELETE FROM "dishes";
DELETE FROM "items";
DELETE FROM "restaurants";
INSERT INTO "dishes" ("id", "name", "created_at", "updated_at") VALUES (122903280, 'Appetizer', '2023-05-12 15:07:16.211914', '2023-05-12 15:07:16.211914'), (509217612, 'Main Course', '2023-05-12 15:07:16.211914', '2023-05-12 15:07:16.211914'), (693976031, 'Dessert', '2023-05-12 15:07:16.211914', '2023-05-12 15:07:16.211914');
INSERT INTO "items" ("id", "name", "price", "callories", "created_at", "updated_at", "restaurant_id", "dish_id") VALUES (920592244, 'Pan', 1000, 150, '2023-05-12 15:07:16.260098', '2023-05-12 15:07:16.260098', 648827877, 122903280), (802574032, 'Hamburguesa', 1500, 200, '2023-05-12 15:07:16.260098', '2023-05-12 15:07:16.260098', 648827877, 509217612), (416382555, 'Papa Frita', 1000, 300, '2023-05-12 15:07:16.260098', '2023-05-12 15:07:16.260098', 648827877, 693976031), (112585724, 'Lechuga', 200, 20, '2023-05-12 15:07:16.260098', '2023-05-12 15:07:16.260098', 1067778657, 122903280), (833805165, 'Tomate', 100, 50, '2023-05-12 15:07:16.260098', '2023-05-12 15:07:16.260098', 1067778657, 509217612), (683379417, 'Queso', 300, 200, '2023-05-12 15:07:16.260098', '2023-05-12 15:07:16.260098', 1067778657, 693976031), (532462148, 'Cebolla', 1000, 100, '2023-05-12 15:07:16.260098', '2023-05-12 15:07:16.260098', 144847564, 122903280), (251897809, 'Frutilla', 1000, 200, '2023-05-12 15:07:16.260098', '2023-05-12 15:07:16.260098', 144847564, 509217612), (939824966, 'Helado', 1000, 200, '2023-05-12 15:07:16.260098', '2023-05-12 15:07:16.260098', 144847564, 693976031);
INSERT INTO "restaurants" ("id", "name", "address", "created_at", "updated_at") VALUES (648827877, 'Nestizo', 'Viacura 4000', '2023-05-12 15:07:16.269930', '2023-05-12 15:07:16.269930'), (1067778657, 'NcDonalds', 'El Salto s/n', '2023-05-12 15:07:16.269930', '2023-05-12 15:07:16.269930'), (144847564, 'Huendis', 'Vitacura 2800', '2023-05-12 15:07:16.269930', '2023-05-12 15:07:16.269930')[0m
  [1m[36mTRANSACTION (5.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "dishes" ENABLE TRIGGER ALL;ALTER TABLE "items" ENABLE TRIGGER ALL;ALTER TABLE "restaurants" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (3.6ms)[0m  [1m[35mdo $$
  declare r record;
BEGIN
FOR r IN (
  SELECT FORMAT(
    'UPDATE pg_constraint SET convalidated=false WHERE conname = ''%I'' AND connamespace::regnamespace = ''%I''::regnamespace; ALTER TABLE %I.%I VALIDATE CONSTRAINT %I;',
    constraint_name,
    table_schema,
    table_schema,
    table_name,
    constraint_name
  ) AS constraint_check
  FROM information_schema.table_constraints WHERE constraint_type = 'FOREIGN KEY'
)
  LOOP
    EXECUTE (r.constraint_check);
  END LOOP;
END;
$$;
[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------
DishesControllerTest: test_should_get_index
-------------------------------------------
Started GET "/dishes/index" for 127.0.0.1 at 2023-05-12 11:07:16 -0400
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------
ItemTest: test_should_validate_presence_of_callories_at_model_level
-------------------------------------------------------------------
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------
ItemTest: test_should_validate_presence_of_name_at_db_level
-----------------------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------
ItemTest: test_should_validate_presence_of_price_at_db_level
------------------------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------
ItemTest: test_should_validate_presence_of_price_at_model_level
---------------------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------
ItemTest: test_should_load_fixtures_correctly
---------------------------------------------
  [1m[36mItem Load (0.3ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."name" = $1 LIMIT $2[0m  [["name", "Hamburguesa"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------
ItemTest: test_item_belongs_to_a_restaurant
-------------------------------------------
  [1m[36mItem Load (0.3ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."name" = $1 LIMIT $2[0m  [["name", "Hamburguesa"], ["LIMIT", 1]]
  [1m[36mRestaurant Load (0.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 648827877], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------
ItemTest: test_item_belongs_to_a_dish
-------------------------------------
  [1m[36mItem Load (0.3ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."name" = $1 LIMIT $2[0m  [["name", "Hamburguesa"], ["LIMIT", 1]]
  [1m[36mDish Load (0.3ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."id" = $1 LIMIT $2[0m  [["id", 509217612], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------
ItemTest: test_should_validate_presence_of_callories_at_db_level
----------------------------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------
ItemTest: test_should_validate_presence_of_name_at_model_level
--------------------------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------
RestaurantsControllerTest: test_should_get_index
------------------------------------------------
Started GET "/restaurants/index" for 127.0.0.1 at 2023-05-12 11:07:16 -0400
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------
RestaurantTest: test_should_validate_presence_of_address_at_db_level
--------------------------------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------
RestaurantTest: test_should_validate_presence_of_name_at_db_level
-----------------------------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------
RestaurantTest: test_should_load_fixtures_correctly
---------------------------------------------------
  [1m[36mRestaurant Load (0.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."name" = $1 LIMIT $2[0m  [["name", "NcDonalds"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------
RestaurantTest: test_should_have_many_items
-------------------------------------------
  [1m[36mRestaurant Load (0.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."name" = $1 LIMIT $2[0m  [["name", "NcDonalds"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------------
RestaurantTest: test_should_validate_presence_of_address_at_model_level
-----------------------------------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------
RestaurantTest: test_should_validate_presence_of_name_at_model_level
--------------------------------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------
IntemsControllerTest: test_should_get_index
-------------------------------------------
Started GET "/intems/index" for 127.0.0.1 at 2023-05-12 11:07:16 -0400
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------
RoutesTest: test_should_route_to_items_index
--------------------------------------------
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------
RoutesTest: test_should_route_to_restaurants_index
--------------------------------------------------
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------
RoutesTest: test_should_route_to_dishes_show
--------------------------------------------
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------
RoutesTest: test_should_route_to_dishes_index
---------------------------------------------
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------
RoutesTest: test_should_route_to_items_show
-------------------------------------------
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------
RoutesTest: test_should_route_to_restaurants_show
-------------------------------------------------
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------
DishTest: test_should_have_many_items
-------------------------------------
  [1m[36mDish Load (0.3ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."name" = $1 LIMIT $2[0m  [["name", "Dessert"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------
DishTest: test_should_validate_presence_of_name_at_model_level
--------------------------------------------------------------
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------
DishTest: test_should_validate_presence_of_name_at_db_level
-----------------------------------------------------------
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------
DishTest: test_should_load_fixtures_correctly
---------------------------------------------
  [1m[36mDish Load (0.4ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."name" = $1 LIMIT $2[0m  [["name", "Dessert"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (0.5ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "schema_sha1"], ["LIMIT", 1]]
  [1m[36mActiveRecord::SchemaMigration Pluck (1.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "dishes" DISABLE TRIGGER ALL;ALTER TABLE "items" DISABLE TRIGGER ALL;ALTER TABLE "restaurants" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.6ms)[0m  [1m[31mDELETE FROM "dishes";
DELETE FROM "items";
DELETE FROM "restaurants";
INSERT INTO "dishes" ("id", "name", "created_at", "updated_at") VALUES (122903280, 'Appetizer', '2023-05-12 15:08:50.926956', '2023-05-12 15:08:50.926956'), (509217612, 'Main Course', '2023-05-12 15:08:50.926956', '2023-05-12 15:08:50.926956'), (693976031, 'Dessert', '2023-05-12 15:08:50.926956', '2023-05-12 15:08:50.926956');
INSERT INTO "items" ("id", "name", "price", "callories", "created_at", "updated_at", "restaurant_id", "dish_id") VALUES (920592244, 'Pan', 1000, 150, '2023-05-12 15:08:50.933651', '2023-05-12 15:08:50.933651', 648827877, 122903280), (802574032, 'Hamburguesa', 1500, 200, '2023-05-12 15:08:50.933651', '2023-05-12 15:08:50.933651', 648827877, 509217612), (416382555, 'Papa Frita', 1000, 300, '2023-05-12 15:08:50.933651', '2023-05-12 15:08:50.933651', 648827877, 693976031), (112585724, 'Lechuga', 200, 20, '2023-05-12 15:08:50.933651', '2023-05-12 15:08:50.933651', 1067778657, 122903280), (833805165, 'Tomate', 100, 50, '2023-05-12 15:08:50.933651', '2023-05-12 15:08:50.933651', 1067778657, 509217612), (683379417, 'Queso', 300, 200, '2023-05-12 15:08:50.933651', '2023-05-12 15:08:50.933651', 1067778657, 693976031), (532462148, 'Cebolla', 1000, 100, '2023-05-12 15:08:50.933651', '2023-05-12 15:08:50.933651', 144847564, 122903280), (251897809, 'Frutilla', 1000, 200, '2023-05-12 15:08:50.933651', '2023-05-12 15:08:50.933651', 144847564, 509217612), (939824966, 'Helado', 1000, 200, '2023-05-12 15:08:50.933651', '2023-05-12 15:08:50.933651', 144847564, 693976031);
INSERT INTO "restaurants" ("id", "name", "address", "created_at", "updated_at") VALUES (648827877, 'Nestizo', 'Viacura 4000', '2023-05-12 15:08:50.941733', '2023-05-12 15:08:50.941733'), (1067778657, 'NcDonalds', 'El Salto s/n', '2023-05-12 15:08:50.941733', '2023-05-12 15:08:50.941733'), (144847564, 'Huendis', 'Vitacura 2800', '2023-05-12 15:08:50.941733', '2023-05-12 15:08:50.941733')[0m
  [1m[36mTRANSACTION (6.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "dishes" ENABLE TRIGGER ALL;ALTER TABLE "items" ENABLE TRIGGER ALL;ALTER TABLE "restaurants" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (6.1ms)[0m  [1m[35mdo $$
  declare r record;
BEGIN
FOR r IN (
  SELECT FORMAT(
    'UPDATE pg_constraint SET convalidated=false WHERE conname = ''%I'' AND connamespace::regnamespace = ''%I''::regnamespace; ALTER TABLE %I.%I VALIDATE CONSTRAINT %I;',
    constraint_name,
    table_schema,
    table_schema,
    table_name,
    constraint_name
  ) AS constraint_check
  FROM information_schema.table_constraints WHERE constraint_type = 'FOREIGN KEY'
)
  LOOP
    EXECUTE (r.constraint_check);
  END LOOP;
END;
$$;
[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------
RestaurantsControllerTest: test_should_get_index
------------------------------------------------
Started GET "/restaurants/index" for 127.0.0.1 at 2023-05-12 11:08:51 -0400
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------
IntemsControllerTest: test_should_get_index
-------------------------------------------
Started GET "/intems/index" for 127.0.0.1 at 2023-05-12 11:08:51 -0400
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------
DishTest: test_should_validate_presence_of_name_at_db_level
-----------------------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------
DishTest: test_should_have_many_items
-------------------------------------
  [1m[36mDish Load (0.3ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."name" = $1 LIMIT $2[0m  [["name", "Dessert"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------
DishTest: test_should_load_fixtures_correctly
---------------------------------------------
  [1m[36mDish Load (4.4ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."name" = $1 LIMIT $2[0m  [["name", "Dessert"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------
DishTest: test_should_validate_presence_of_name_at_model_level
--------------------------------------------------------------
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------
RestaurantTest: test_should_validate_presence_of_address_at_db_level
--------------------------------------------------------------------
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------------
RestaurantTest: test_should_validate_presence_of_address_at_model_level
-----------------------------------------------------------------------
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------
RestaurantTest: test_should_have_many_items
-------------------------------------------
  [1m[36mRestaurant Load (0.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."name" = $1 LIMIT $2[0m  [["name", "NcDonalds"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------
RestaurantTest: test_should_load_fixtures_correctly
---------------------------------------------------
  [1m[36mRestaurant Load (0.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."name" = $1 LIMIT $2[0m  [["name", "NcDonalds"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------
RestaurantTest: test_should_validate_presence_of_name_at_db_level
-----------------------------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------
RestaurantTest: test_should_validate_presence_of_name_at_model_level
--------------------------------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------
ItemTest: test_should_validate_presence_of_name_at_model_level
--------------------------------------------------------------
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------
ItemTest: test_should_load_fixtures_correctly
---------------------------------------------
  [1m[36mItem Load (0.4ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."name" = $1 LIMIT $2[0m  [["name", "Hamburguesa"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------
ItemTest: test_should_validate_presence_of_callories_at_db_level
----------------------------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------
ItemTest: test_should_validate_presence_of_price_at_model_level
---------------------------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------
ItemTest: test_item_belongs_to_a_dish
-------------------------------------
  [1m[36mItem Load (1.5ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."name" = $1 LIMIT $2[0m  [["name", "Hamburguesa"], ["LIMIT", 1]]
  [1m[36mDish Load (0.3ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."id" = $1 LIMIT $2[0m  [["id", 509217612], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------
ItemTest: test_item_belongs_to_a_restaurant
-------------------------------------------
  [1m[36mItem Load (0.7ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."name" = $1 LIMIT $2[0m  [["name", "Hamburguesa"], ["LIMIT", 1]]
  [1m[36mRestaurant Load (0.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 648827877], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------
ItemTest: test_should_validate_presence_of_callories_at_model_level
-------------------------------------------------------------------
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------
ItemTest: test_should_validate_presence_of_name_at_db_level
-----------------------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------
ItemTest: test_should_validate_presence_of_price_at_db_level
------------------------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------
DishesControllerTest: test_should_get_index
-------------------------------------------
Started GET "/dishes/index" for 127.0.0.1 at 2023-05-12 11:08:51 -0400
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------
RoutesTest: test_should_route_to_items_index
--------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------
RoutesTest: test_should_route_to_items_show
-------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------
RoutesTest: test_should_route_to_dishes_index
---------------------------------------------
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------
RoutesTest: test_should_route_to_dishes_show
--------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------
RoutesTest: test_should_route_to_restaurants_index
--------------------------------------------------
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------
RoutesTest: test_should_route_to_restaurants_show
-------------------------------------------------
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (0.4ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "schema_sha1"], ["LIMIT", 1]]
  [1m[36mActiveRecord::SchemaMigration Pluck (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "dishes" DISABLE TRIGGER ALL;ALTER TABLE "items" DISABLE TRIGGER ALL;ALTER TABLE "restaurants" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.4ms)[0m  [1m[31mDELETE FROM "dishes";
DELETE FROM "items";
DELETE FROM "restaurants";
INSERT INTO "dishes" ("id", "name", "created_at", "updated_at") VALUES (122903280, 'Appetizer', '2023-05-12 15:11:09.985609', '2023-05-12 15:11:09.985609'), (509217612, 'Main Course', '2023-05-12 15:11:09.985609', '2023-05-12 15:11:09.985609'), (693976031, 'Dessert', '2023-05-12 15:11:09.985609', '2023-05-12 15:11:09.985609');
INSERT INTO "items" ("id", "name", "price", "callories", "created_at", "updated_at", "restaurant_id", "dish_id") VALUES (920592244, 'Pan', 1000, 150, '2023-05-12 15:11:09.993103', '2023-05-12 15:11:09.993103', 648827877, 122903280), (802574032, 'Hamburguesa', 1500, 200, '2023-05-12 15:11:09.993103', '2023-05-12 15:11:09.993103', 648827877, 509217612), (416382555, 'Papa Frita', 1000, 300, '2023-05-12 15:11:09.993103', '2023-05-12 15:11:09.993103', 648827877, 693976031), (112585724, 'Lechuga', 200, 20, '2023-05-12 15:11:09.993103', '2023-05-12 15:11:09.993103', 1067778657, 122903280), (833805165, 'Tomate', 100, 50, '2023-05-12 15:11:09.993103', '2023-05-12 15:11:09.993103', 1067778657, 509217612), (683379417, 'Queso', 300, 200, '2023-05-12 15:11:09.993103', '2023-05-12 15:11:09.993103', 1067778657, 693976031), (532462148, 'Cebolla', 1000, 100, '2023-05-12 15:11:09.993103', '2023-05-12 15:11:09.993103', 144847564, 122903280), (251897809, 'Frutilla', 1000, 200, '2023-05-12 15:11:09.993103', '2023-05-12 15:11:09.993103', 144847564, 509217612), (939824966, 'Helado', 1000, 200, '2023-05-12 15:11:09.993103', '2023-05-12 15:11:09.993103', 144847564, 693976031);
INSERT INTO "restaurants" ("id", "name", "address", "created_at", "updated_at") VALUES (648827877, 'Nestizo', 'Viacura 4000', '2023-05-12 15:11:10.006935', '2023-05-12 15:11:10.006935'), (1067778657, 'NcDonalds', 'El Salto s/n', '2023-05-12 15:11:10.006935', '2023-05-12 15:11:10.006935'), (144847564, 'Huendis', 'Vitacura 2800', '2023-05-12 15:11:10.006935', '2023-05-12 15:11:10.006935')[0m
  [1m[36mTRANSACTION (6.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "dishes" ENABLE TRIGGER ALL;ALTER TABLE "items" ENABLE TRIGGER ALL;ALTER TABLE "restaurants" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (3.6ms)[0m  [1m[35mdo $$
  declare r record;
BEGIN
FOR r IN (
  SELECT FORMAT(
    'UPDATE pg_constraint SET convalidated=false WHERE conname = ''%I'' AND connamespace::regnamespace = ''%I''::regnamespace; ALTER TABLE %I.%I VALIDATE CONSTRAINT %I;',
    constraint_name,
    table_schema,
    table_schema,
    table_name,
    constraint_name
  ) AS constraint_check
  FROM information_schema.table_constraints WHERE constraint_type = 'FOREIGN KEY'
)
  LOOP
    EXECUTE (r.constraint_check);
  END LOOP;
END;
$$;
[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------
DishTest: test_should_load_fixtures_correctly
---------------------------------------------
  [1m[36mDish Load (0.4ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."name" = $1 LIMIT $2[0m  [["name", "Dessert"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------
DishTest: test_should_validate_presence_of_name_at_db_level
-----------------------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------
DishTest: test_should_have_many_items
-------------------------------------
  [1m[36mDish Load (0.4ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."name" = $1 LIMIT $2[0m  [["name", "Dessert"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------
DishTest: test_should_validate_presence_of_name_at_model_level
--------------------------------------------------------------
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------
DishesControllerTest: test_should_get_index
-------------------------------------------
Started GET "/dishes/index" for 127.0.0.1 at 2023-05-12 11:11:10 -0400
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------
RoutesTest: test_should_route_to_items_show
-------------------------------------------
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------
RoutesTest: test_should_route_to_restaurants_show
-------------------------------------------------
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------
RoutesTest: test_should_route_to_dishes_index
---------------------------------------------
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------
RoutesTest: test_should_route_to_dishes_show
--------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------
RoutesTest: test_should_route_to_items_index
--------------------------------------------
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------
RoutesTest: test_should_route_to_restaurants_index
--------------------------------------------------
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------
ItemTest: test_should_validate_presence_of_price_at_db_level
------------------------------------------------------------
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------
ItemTest: test_should_validate_presence_of_name_at_model_level
--------------------------------------------------------------
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------
ItemTest: test_should_validate_presence_of_price_at_model_level
---------------------------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------
ItemTest: test_item_belongs_to_a_dish
-------------------------------------
  [1m[36mItem Load (0.3ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."name" = $1 LIMIT $2[0m  [["name", "Hamburguesa"], ["LIMIT", 1]]
  [1m[36mDish Load (0.3ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."id" = $1 LIMIT $2[0m  [["id", 509217612], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------
ItemTest: test_should_validate_presence_of_name_at_db_level
-----------------------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------
ItemTest: test_should_validate_presence_of_callories_at_db_level
----------------------------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------
ItemTest: test_item_belongs_to_a_restaurant
-------------------------------------------
  [1m[36mItem Load (0.4ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."name" = $1 LIMIT $2[0m  [["name", "Hamburguesa"], ["LIMIT", 1]]
  [1m[36mRestaurant Load (0.4ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 648827877], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------
ItemTest: test_should_load_fixtures_correctly
---------------------------------------------
  [1m[36mItem Load (0.4ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."name" = $1 LIMIT $2[0m  [["name", "Hamburguesa"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------
ItemTest: test_should_validate_presence_of_callories_at_model_level
-------------------------------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------
RestaurantsControllerTest: test_should_get_index
------------------------------------------------
Started GET "/restaurants/index" for 127.0.0.1 at 2023-05-12 11:11:10 -0400
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------
ItemsControllerTest: test_should_get_index
------------------------------------------
Started GET "/items/index" for 127.0.0.1 at 2023-05-12 11:11:10 -0400
Processing by ItemsController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering items/index.html.erb within layouts/application
  Rendered items/index.html.erb within layouts/application (Duration: 1.8ms | Allocations: 290)
  Rendered layout layouts/application.html.erb (Duration: 11.8ms | Allocations: 2132)
Completed 500 Internal Server Error in 30ms (ActiveRecord: 0.0ms | Allocations: 5137)
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------------
RestaurantTest: test_should_validate_presence_of_address_at_model_level
-----------------------------------------------------------------------
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------
RestaurantTest: test_should_validate_presence_of_name_at_model_level
--------------------------------------------------------------------
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------
RestaurantTest: test_should_have_many_items
-------------------------------------------
  [1m[36mRestaurant Load (0.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."name" = $1 LIMIT $2[0m  [["name", "NcDonalds"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------
RestaurantTest: test_should_load_fixtures_correctly
---------------------------------------------------
  [1m[36mRestaurant Load (0.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."name" = $1 LIMIT $2[0m  [["name", "NcDonalds"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------
RestaurantTest: test_should_validate_presence_of_address_at_db_level
--------------------------------------------------------------------
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------
RestaurantTest: test_should_validate_presence_of_name_at_db_level
-----------------------------------------------------------------
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (0.5ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "schema_sha1"], ["LIMIT", 1]]
  [1m[36mActiveRecord::SchemaMigration Pluck (10.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "dishes" DISABLE TRIGGER ALL;ALTER TABLE "items" DISABLE TRIGGER ALL;ALTER TABLE "restaurants" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.4ms)[0m  [1m[31mDELETE FROM "dishes";
DELETE FROM "items";
DELETE FROM "restaurants";
INSERT INTO "dishes" ("id", "name", "created_at", "updated_at") VALUES (122903280, 'Appetizer', '2023-05-12 15:13:49.755075', '2023-05-12 15:13:49.755075'), (509217612, 'Main Course', '2023-05-12 15:13:49.755075', '2023-05-12 15:13:49.755075'), (693976031, 'Dessert', '2023-05-12 15:13:49.755075', '2023-05-12 15:13:49.755075');
INSERT INTO "items" ("id", "name", "price", "callories", "created_at", "updated_at", "restaurant_id", "dish_id") VALUES (920592244, 'Pan', 1000, 150, '2023-05-12 15:13:49.797277', '2023-05-12 15:13:49.797277', 648827877, 122903280), (802574032, 'Hamburguesa', 1500, 200, '2023-05-12 15:13:49.797277', '2023-05-12 15:13:49.797277', 648827877, 509217612), (416382555, 'Papa Frita', 1000, 300, '2023-05-12 15:13:49.797277', '2023-05-12 15:13:49.797277', 648827877, 693976031), (112585724, 'Lechuga', 200, 20, '2023-05-12 15:13:49.797277', '2023-05-12 15:13:49.797277', 1067778657, 122903280), (833805165, 'Tomate', 100, 50, '2023-05-12 15:13:49.797277', '2023-05-12 15:13:49.797277', 1067778657, 509217612), (683379417, 'Queso', 300, 200, '2023-05-12 15:13:49.797277', '2023-05-12 15:13:49.797277', 1067778657, 693976031), (532462148, 'Cebolla', 1000, 100, '2023-05-12 15:13:49.797277', '2023-05-12 15:13:49.797277', 144847564, 122903280), (251897809, 'Frutilla', 1000, 200, '2023-05-12 15:13:49.797277', '2023-05-12 15:13:49.797277', 144847564, 509217612), (939824966, 'Helado', 1000, 200, '2023-05-12 15:13:49.797277', '2023-05-12 15:13:49.797277', 144847564, 693976031);
INSERT INTO "restaurants" ("id", "name", "address", "created_at", "updated_at") VALUES (648827877, 'Nestizo', 'Viacura 4000', '2023-05-12 15:13:49.805996', '2023-05-12 15:13:49.805996'), (1067778657, 'NcDonalds', 'El Salto s/n', '2023-05-12 15:13:49.805996', '2023-05-12 15:13:49.805996'), (144847564, 'Huendis', 'Vitacura 2800', '2023-05-12 15:13:49.805996', '2023-05-12 15:13:49.805996')[0m
  [1m[36mTRANSACTION (6.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "dishes" ENABLE TRIGGER ALL;ALTER TABLE "items" ENABLE TRIGGER ALL;ALTER TABLE "restaurants" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (3.6ms)[0m  [1m[35mdo $$
  declare r record;
BEGIN
FOR r IN (
  SELECT FORMAT(
    'UPDATE pg_constraint SET convalidated=false WHERE conname = ''%I'' AND connamespace::regnamespace = ''%I''::regnamespace; ALTER TABLE %I.%I VALIDATE CONSTRAINT %I;',
    constraint_name,
    table_schema,
    table_schema,
    table_name,
    constraint_name
  ) AS constraint_check
  FROM information_schema.table_constraints WHERE constraint_type = 'FOREIGN KEY'
)
  LOOP
    EXECUTE (r.constraint_check);
  END LOOP;
END;
$$;
[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------
RestaurantsControllerTest: test_should_get_index
------------------------------------------------
Started GET "/restaurants/index" for 127.0.0.1 at 2023-05-12 11:13:50 -0400
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------
DishesControllerTest: test_should_get_index
-------------------------------------------
Started GET "/dishes/index" for 127.0.0.1 at 2023-05-12 11:13:50 -0400
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
------------------------------------------
ItemsControllerTest: test_should_get_index
------------------------------------------
Started GET "/items/index" for 127.0.0.1 at 2023-05-12 11:13:50 -0400
Processing by ItemsController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering items/index.html.erb within layouts/application
  Rendered items/index.html.erb within layouts/application (Duration: 1.4ms | Allocations: 290)
  Rendered layout layouts/application.html.erb (Duration: 7.3ms | Allocations: 2132)
Completed 500 Internal Server Error in 20ms (ActiveRecord: 0.0ms | Allocations: 5197)
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------
RoutesTest: test_should_route_to_restaurants_index
--------------------------------------------------
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------
RoutesTest: test_should_route_to_dishes_index
---------------------------------------------
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------
RoutesTest: test_should_route_to_items_index
--------------------------------------------
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------
RoutesTest: test_should_route_to_restaurants_show
-------------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------
RoutesTest: test_should_route_to_dishes_show
--------------------------------------------
  [1m[36mTRANSACTION (4.9ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------
RoutesTest: test_should_route_to_items_show
-------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
-------------------------------------
ItemTest: test_item_belongs_to_a_dish
-------------------------------------
  [1m[36mItem Load (0.7ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."name" = $1 LIMIT $2[0m  [["name", "Hamburguesa"], ["LIMIT", 1]]
  [1m[36mDish Load (0.3ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."id" = $1 LIMIT $2[0m  [["id", 509217612], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------
ItemTest: test_should_validate_presence_of_price_at_db_level
------------------------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------
ItemTest: test_should_validate_presence_of_callories_at_model_level
-------------------------------------------------------------------
  [1m[36mTRANSACTION (1.8ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------
ItemTest: test_should_load_fixtures_correctly
---------------------------------------------
  [1m[36mItem Load (0.3ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."name" = $1 LIMIT $2[0m  [["name", "Hamburguesa"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------
ItemTest: test_should_validate_presence_of_price_at_model_level
---------------------------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------
ItemTest: test_item_belongs_to_a_restaurant
-------------------------------------------
  [1m[36mItem Load (0.3ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."name" = $1 LIMIT $2[0m  [["name", "Hamburguesa"], ["LIMIT", 1]]
  [1m[36mRestaurant Load (0.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 648827877], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------
ItemTest: test_should_validate_presence_of_name_at_db_level
-----------------------------------------------------------
  [1m[36mTRANSACTION (12.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------
ItemTest: test_should_validate_presence_of_name_at_model_level
--------------------------------------------------------------
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------
ItemTest: test_should_validate_presence_of_callories_at_db_level
----------------------------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------
RestaurantTest: test_should_validate_presence_of_name_at_db_level
-----------------------------------------------------------------
  [1m[36mTRANSACTION (2.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------
RestaurantTest: test_should_have_many_items
-------------------------------------------
  [1m[36mRestaurant Load (0.4ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."name" = $1 LIMIT $2[0m  [["name", "NcDonalds"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (4.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------
RestaurantTest: test_should_validate_presence_of_address_at_db_level
--------------------------------------------------------------------
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------
RestaurantTest: test_should_validate_presence_of_name_at_model_level
--------------------------------------------------------------------
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------
RestaurantTest: test_should_load_fixtures_correctly
---------------------------------------------------
  [1m[36mRestaurant Load (0.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."name" = $1 LIMIT $2[0m  [["name", "NcDonalds"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------------
RestaurantTest: test_should_validate_presence_of_address_at_model_level
-----------------------------------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
-------------------------------------
DishTest: test_should_have_many_items
-------------------------------------
  [1m[36mDish Load (0.3ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."name" = $1 LIMIT $2[0m  [["name", "Dessert"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------
DishTest: test_should_load_fixtures_correctly
---------------------------------------------
  [1m[36mDish Load (4.3ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."name" = $1 LIMIT $2[0m  [["name", "Dessert"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------
DishTest: test_should_validate_presence_of_name_at_db_level
-----------------------------------------------------------
  [1m[36mTRANSACTION (5.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------
DishTest: test_should_validate_presence_of_name_at_model_level
--------------------------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (0.7ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "schema_sha1"], ["LIMIT", 1]]
  [1m[36mActiveRecord::SchemaMigration Pluck (1.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "dishes" DISABLE TRIGGER ALL;ALTER TABLE "items" DISABLE TRIGGER ALL;ALTER TABLE "restaurants" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.3ms)[0m  [1m[31mDELETE FROM "dishes";
DELETE FROM "items";
DELETE FROM "restaurants";
INSERT INTO "dishes" ("id", "name", "created_at", "updated_at") VALUES (122903280, 'Appetizer', '2023-05-12 15:14:53.676965', '2023-05-12 15:14:53.676965'), (509217612, 'Main Course', '2023-05-12 15:14:53.676965', '2023-05-12 15:14:53.676965'), (693976031, 'Dessert', '2023-05-12 15:14:53.676965', '2023-05-12 15:14:53.676965');
INSERT INTO "items" ("id", "name", "price", "callories", "created_at", "updated_at", "restaurant_id", "dish_id") VALUES (920592244, 'Pan', 1000, 150, '2023-05-12 15:14:53.684127', '2023-05-12 15:14:53.684127', 648827877, 122903280), (802574032, 'Hamburguesa', 1500, 200, '2023-05-12 15:14:53.684127', '2023-05-12 15:14:53.684127', 648827877, 509217612), (416382555, 'Papa Frita', 1000, 300, '2023-05-12 15:14:53.684127', '2023-05-12 15:14:53.684127', 648827877, 693976031), (112585724, 'Lechuga', 200, 20, '2023-05-12 15:14:53.684127', '2023-05-12 15:14:53.684127', 1067778657, 122903280), (833805165, 'Tomate', 100, 50, '2023-05-12 15:14:53.684127', '2023-05-12 15:14:53.684127', 1067778657, 509217612), (683379417, 'Queso', 300, 200, '2023-05-12 15:14:53.684127', '2023-05-12 15:14:53.684127', 1067778657, 693976031), (532462148, 'Cebolla', 1000, 100, '2023-05-12 15:14:53.684127', '2023-05-12 15:14:53.684127', 144847564, 122903280), (251897809, 'Frutilla', 1000, 200, '2023-05-12 15:14:53.684127', '2023-05-12 15:14:53.684127', 144847564, 509217612), (939824966, 'Helado', 1000, 200, '2023-05-12 15:14:53.684127', '2023-05-12 15:14:53.684127', 144847564, 693976031);
INSERT INTO "restaurants" ("id", "name", "address", "created_at", "updated_at") VALUES (648827877, 'Nestizo', 'Viacura 4000', '2023-05-12 15:14:53.695358', '2023-05-12 15:14:53.695358'), (1067778657, 'NcDonalds', 'El Salto s/n', '2023-05-12 15:14:53.695358', '2023-05-12 15:14:53.695358'), (144847564, 'Huendis', 'Vitacura 2800', '2023-05-12 15:14:53.695358', '2023-05-12 15:14:53.695358')[0m
  [1m[36mTRANSACTION (6.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "dishes" ENABLE TRIGGER ALL;ALTER TABLE "items" ENABLE TRIGGER ALL;ALTER TABLE "restaurants" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (3.2ms)[0m  [1m[35mdo $$
  declare r record;
BEGIN
FOR r IN (
  SELECT FORMAT(
    'UPDATE pg_constraint SET convalidated=false WHERE conname = ''%I'' AND connamespace::regnamespace = ''%I''::regnamespace; ALTER TABLE %I.%I VALIDATE CONSTRAINT %I;',
    constraint_name,
    table_schema,
    table_schema,
    table_name,
    constraint_name
  ) AS constraint_check
  FROM information_schema.table_constraints WHERE constraint_type = 'FOREIGN KEY'
)
  LOOP
    EXECUTE (r.constraint_check);
  END LOOP;
END;
$$;
[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------
RoutesTest: test_should_route_to_items_show
-------------------------------------------
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------
RoutesTest: test_should_route_to_restaurants_show
-------------------------------------------------
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------
RoutesTest: test_should_route_to_dishes_index
---------------------------------------------
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------
RoutesTest: test_should_route_to_items_index
--------------------------------------------
  [1m[36mTRANSACTION (1.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------
RoutesTest: test_should_route_to_dishes_show
--------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------
RoutesTest: test_should_route_to_restaurants_index
--------------------------------------------------
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
------------------------------------------
ItemsControllerTest: test_should_get_index
------------------------------------------
Started GET "/items/index" for 127.0.0.1 at 2023-05-12 11:14:53 -0400
Processing by ItemsController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering items/index.html.erb within layouts/application
  Rendered items/index.html.erb within layouts/application (Duration: 1.3ms | Allocations: 289)
  Rendered layout layouts/application.html.erb (Duration: 6.1ms | Allocations: 2131)
Completed 500 Internal Server Error in 18ms (ActiveRecord: 0.0ms | Allocations: 5197)
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------
DishesControllerTest: test_should_get_index
-------------------------------------------
Started GET "/dishes/index" for 127.0.0.1 at 2023-05-12 11:14:53 -0400
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------
DishTest: test_should_validate_presence_of_name_at_model_level
--------------------------------------------------------------
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------
DishTest: test_should_validate_presence_of_name_at_db_level
-----------------------------------------------------------
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------
DishTest: test_should_load_fixtures_correctly
---------------------------------------------
  [1m[36mDish Load (0.3ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."name" = $1 LIMIT $2[0m  [["name", "Dessert"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (4.8ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------
DishTest: test_should_have_many_items
-------------------------------------
  [1m[36mDish Load (0.3ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."name" = $1 LIMIT $2[0m  [["name", "Dessert"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------------
RestaurantTest: test_should_validate_presence_of_address_at_model_level
-----------------------------------------------------------------------
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------
RestaurantTest: test_should_validate_presence_of_name_at_model_level
--------------------------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------
RestaurantTest: test_should_have_many_items
-------------------------------------------
  [1m[36mRestaurant Load (0.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."name" = $1 LIMIT $2[0m  [["name", "NcDonalds"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------
RestaurantTest: test_should_validate_presence_of_address_at_db_level
--------------------------------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------
RestaurantTest: test_should_load_fixtures_correctly
---------------------------------------------------
  [1m[36mRestaurant Load (0.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."name" = $1 LIMIT $2[0m  [["name", "NcDonalds"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (4.9ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------
RestaurantTest: test_should_validate_presence_of_name_at_db_level
-----------------------------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------
ItemTest: test_should_validate_presence_of_name_at_model_level
--------------------------------------------------------------
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------
ItemTest: test_should_validate_presence_of_price_at_db_level
------------------------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------
ItemTest: test_should_load_fixtures_correctly
---------------------------------------------
  [1m[36mItem Load (0.3ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."name" = $1 LIMIT $2[0m  [["name", "Hamburguesa"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------
ItemTest: test_should_validate_presence_of_price_at_model_level
---------------------------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------
ItemTest: test_should_validate_presence_of_callories_at_db_level
----------------------------------------------------------------
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------
ItemTest: test_item_belongs_to_a_dish
-------------------------------------
  [1m[36mItem Load (0.4ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."name" = $1 LIMIT $2[0m  [["name", "Hamburguesa"], ["LIMIT", 1]]
  [1m[36mDish Load (0.5ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."id" = $1 LIMIT $2[0m  [["id", 509217612], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------
ItemTest: test_item_belongs_to_a_restaurant
-------------------------------------------
  [1m[36mItem Load (0.3ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."name" = $1 LIMIT $2[0m  [["name", "Hamburguesa"], ["LIMIT", 1]]
  [1m[36mRestaurant Load (0.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 648827877], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------
ItemTest: test_should_validate_presence_of_name_at_db_level
-----------------------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------
ItemTest: test_should_validate_presence_of_callories_at_model_level
-------------------------------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------
RestaurantsControllerTest: test_should_get_index
------------------------------------------------
Started GET "/restaurants/index" for 127.0.0.1 at 2023-05-12 11:14:54 -0400
Processing by RestaurantsController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering restaurants/index.html.erb within layouts/application
  Rendered restaurants/index.html.erb within layouts/application (Duration: 0.5ms | Allocations: 106)
  Rendered layout layouts/application.html.erb (Duration: 2.1ms | Allocations: 1068)
Completed 500 Internal Server Error in 5ms (ActiveRecord: 0.0ms | Allocations: 1644)
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (0.5ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "schema_sha1"], ["LIMIT", 1]]
  [1m[36mActiveRecord::SchemaMigration Pluck (0.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "dishes" DISABLE TRIGGER ALL;ALTER TABLE "items" DISABLE TRIGGER ALL;ALTER TABLE "restaurants" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.4ms)[0m  [1m[31mDELETE FROM "dishes";
DELETE FROM "items";
DELETE FROM "restaurants";
INSERT INTO "dishes" ("id", "name", "created_at", "updated_at") VALUES (122903280, 'Appetizer', '2023-05-12 15:15:56.694736', '2023-05-12 15:15:56.694736'), (509217612, 'Main Course', '2023-05-12 15:15:56.694736', '2023-05-12 15:15:56.694736'), (693976031, 'Dessert', '2023-05-12 15:15:56.694736', '2023-05-12 15:15:56.694736');
INSERT INTO "items" ("id", "name", "price", "callories", "created_at", "updated_at", "restaurant_id", "dish_id") VALUES (920592244, 'Pan', 1000, 150, '2023-05-12 15:15:56.721556', '2023-05-12 15:15:56.721556', 648827877, 122903280), (802574032, 'Hamburguesa', 1500, 200, '2023-05-12 15:15:56.721556', '2023-05-12 15:15:56.721556', 648827877, 509217612), (416382555, 'Papa Frita', 1000, 300, '2023-05-12 15:15:56.721556', '2023-05-12 15:15:56.721556', 648827877, 693976031), (112585724, 'Lechuga', 200, 20, '2023-05-12 15:15:56.721556', '2023-05-12 15:15:56.721556', 1067778657, 122903280), (833805165, 'Tomate', 100, 50, '2023-05-12 15:15:56.721556', '2023-05-12 15:15:56.721556', 1067778657, 509217612), (683379417, 'Queso', 300, 200, '2023-05-12 15:15:56.721556', '2023-05-12 15:15:56.721556', 1067778657, 693976031), (532462148, 'Cebolla', 1000, 100, '2023-05-12 15:15:56.721556', '2023-05-12 15:15:56.721556', 144847564, 122903280), (251897809, 'Frutilla', 1000, 200, '2023-05-12 15:15:56.721556', '2023-05-12 15:15:56.721556', 144847564, 509217612), (939824966, 'Helado', 1000, 200, '2023-05-12 15:15:56.721556', '2023-05-12 15:15:56.721556', 144847564, 693976031);
INSERT INTO "restaurants" ("id", "name", "address", "created_at", "updated_at") VALUES (648827877, 'Nestizo', 'Viacura 4000', '2023-05-12 15:15:56.748403', '2023-05-12 15:15:56.748403'), (1067778657, 'NcDonalds', 'El Salto s/n', '2023-05-12 15:15:56.748403', '2023-05-12 15:15:56.748403'), (144847564, 'Huendis', 'Vitacura 2800', '2023-05-12 15:15:56.748403', '2023-05-12 15:15:56.748403')[0m
  [1m[36mTRANSACTION (6.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "dishes" ENABLE TRIGGER ALL;ALTER TABLE "items" ENABLE TRIGGER ALL;ALTER TABLE "restaurants" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (3.6ms)[0m  [1m[35mdo $$
  declare r record;
BEGIN
FOR r IN (
  SELECT FORMAT(
    'UPDATE pg_constraint SET convalidated=false WHERE conname = ''%I'' AND connamespace::regnamespace = ''%I''::regnamespace; ALTER TABLE %I.%I VALIDATE CONSTRAINT %I;',
    constraint_name,
    table_schema,
    table_schema,
    table_name,
    constraint_name
  ) AS constraint_check
  FROM information_schema.table_constraints WHERE constraint_type = 'FOREIGN KEY'
)
  LOOP
    EXECUTE (r.constraint_check);
  END LOOP;
END;
$$;
[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------
DishesControllerTest: test_should_get_index
-------------------------------------------
Started GET "/dishes/index" for 127.0.0.1 at 2023-05-12 11:15:56 -0400
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
-------------------------------------
DishTest: test_should_have_many_items
-------------------------------------
  [1m[36mDish Load (0.3ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."name" = $1 LIMIT $2[0m  [["name", "Dessert"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------
DishTest: test_should_load_fixtures_correctly
---------------------------------------------
  [1m[36mDish Load (0.3ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."name" = $1 LIMIT $2[0m  [["name", "Dessert"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------
DishTest: test_should_validate_presence_of_name_at_db_level
-----------------------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------
DishTest: test_should_validate_presence_of_name_at_model_level
--------------------------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------
ItemTest: test_item_belongs_to_a_restaurant
-------------------------------------------
  [1m[36mItem Load (0.4ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."name" = $1 LIMIT $2[0m  [["name", "Hamburguesa"], ["LIMIT", 1]]
  [1m[36mRestaurant Load (0.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 648827877], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------
ItemTest: test_should_validate_presence_of_price_at_model_level
---------------------------------------------------------------
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------
ItemTest: test_should_validate_presence_of_callories_at_model_level
-------------------------------------------------------------------
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------
ItemTest: test_should_validate_presence_of_name_at_model_level
--------------------------------------------------------------
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------
ItemTest: test_should_validate_presence_of_name_at_db_level
-----------------------------------------------------------
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------
ItemTest: test_should_validate_presence_of_price_at_db_level
------------------------------------------------------------
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------
ItemTest: test_item_belongs_to_a_dish
-------------------------------------
  [1m[36mItem Load (0.3ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."name" = $1 LIMIT $2[0m  [["name", "Hamburguesa"], ["LIMIT", 1]]
  [1m[36mDish Load (0.3ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."id" = $1 LIMIT $2[0m  [["id", 509217612], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------
ItemTest: test_should_validate_presence_of_callories_at_db_level
----------------------------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------
ItemTest: test_should_load_fixtures_correctly
---------------------------------------------
  [1m[36mItem Load (0.4ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."name" = $1 LIMIT $2[0m  [["name", "Hamburguesa"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------
RoutesTest: test_should_route_to_dishes_show
--------------------------------------------
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------
RoutesTest: test_should_route_to_restaurants_index
--------------------------------------------------
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------
RoutesTest: test_should_route_to_dishes_index
---------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------
RoutesTest: test_should_route_to_restaurants_show
-------------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------
RoutesTest: test_should_route_to_items_index
--------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------
RoutesTest: test_should_route_to_items_show
-------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------
ItemsControllerTest: test_should_get_index
------------------------------------------
Started GET "/items/index" for 127.0.0.1 at 2023-05-12 11:15:57 -0400
Processing by RestaurantsController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering restaurants/index.html.erb within layouts/application
  Rendered restaurants/index.html.erb within layouts/application (Duration: 16.4ms | Allocations: 289)
  Rendered layout layouts/application.html.erb (Duration: 21.2ms | Allocations: 2132)
Completed 500 Internal Server Error in 33ms (ActiveRecord: 0.0ms | Allocations: 5144)
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------
RestaurantTest: test_should_load_fixtures_correctly
---------------------------------------------------
  [1m[36mRestaurant Load (0.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."name" = $1 LIMIT $2[0m  [["name", "NcDonalds"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------
RestaurantTest: test_should_validate_presence_of_name_at_db_level
-----------------------------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------
RestaurantTest: test_should_have_many_items
-------------------------------------------
  [1m[36mRestaurant Load (0.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."name" = $1 LIMIT $2[0m  [["name", "NcDonalds"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------
RestaurantTest: test_should_validate_presence_of_name_at_model_level
--------------------------------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------
RestaurantTest: test_should_validate_presence_of_address_at_db_level
--------------------------------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------------
RestaurantTest: test_should_validate_presence_of_address_at_model_level
-----------------------------------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------
RestaurantsControllerTest: test_should_get_index
------------------------------------------------
Started GET "/restaurants/index" for 127.0.0.1 at 2023-05-12 11:15:57 -0400
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (0.4ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "schema_sha1"], ["LIMIT", 1]]
  [1m[36mActiveRecord::SchemaMigration Pluck (1.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "dishes" DISABLE TRIGGER ALL;ALTER TABLE "items" DISABLE TRIGGER ALL;ALTER TABLE "restaurants" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.3ms)[0m  [1m[31mDELETE FROM "dishes";
DELETE FROM "items";
DELETE FROM "restaurants";
INSERT INTO "dishes" ("id", "name", "created_at", "updated_at") VALUES (122903280, 'Appetizer', '2023-05-12 15:16:22.027674', '2023-05-12 15:16:22.027674'), (509217612, 'Main Course', '2023-05-12 15:16:22.027674', '2023-05-12 15:16:22.027674'), (693976031, 'Dessert', '2023-05-12 15:16:22.027674', '2023-05-12 15:16:22.027674');
INSERT INTO "items" ("id", "name", "price", "callories", "created_at", "updated_at", "restaurant_id", "dish_id") VALUES (920592244, 'Pan', 1000, 150, '2023-05-12 15:16:22.061637', '2023-05-12 15:16:22.061637', 648827877, 122903280), (802574032, 'Hamburguesa', 1500, 200, '2023-05-12 15:16:22.061637', '2023-05-12 15:16:22.061637', 648827877, 509217612), (416382555, 'Papa Frita', 1000, 300, '2023-05-12 15:16:22.061637', '2023-05-12 15:16:22.061637', 648827877, 693976031), (112585724, 'Lechuga', 200, 20, '2023-05-12 15:16:22.061637', '2023-05-12 15:16:22.061637', 1067778657, 122903280), (833805165, 'Tomate', 100, 50, '2023-05-12 15:16:22.061637', '2023-05-12 15:16:22.061637', 1067778657, 509217612), (683379417, 'Queso', 300, 200, '2023-05-12 15:16:22.061637', '2023-05-12 15:16:22.061637', 1067778657, 693976031), (532462148, 'Cebolla', 1000, 100, '2023-05-12 15:16:22.061637', '2023-05-12 15:16:22.061637', 144847564, 122903280), (251897809, 'Frutilla', 1000, 200, '2023-05-12 15:16:22.061637', '2023-05-12 15:16:22.061637', 144847564, 509217612), (939824966, 'Helado', 1000, 200, '2023-05-12 15:16:22.061637', '2023-05-12 15:16:22.061637', 144847564, 693976031);
INSERT INTO "restaurants" ("id", "name", "address", "created_at", "updated_at") VALUES (648827877, 'Nestizo', 'Viacura 4000', '2023-05-12 15:16:22.070609', '2023-05-12 15:16:22.070609'), (1067778657, 'NcDonalds', 'El Salto s/n', '2023-05-12 15:16:22.070609', '2023-05-12 15:16:22.070609'), (144847564, 'Huendis', 'Vitacura 2800', '2023-05-12 15:16:22.070609', '2023-05-12 15:16:22.070609')[0m
  [1m[36mTRANSACTION (1.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "dishes" ENABLE TRIGGER ALL;ALTER TABLE "items" ENABLE TRIGGER ALL;ALTER TABLE "restaurants" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (3.2ms)[0m  [1m[35mdo $$
  declare r record;
BEGIN
FOR r IN (
  SELECT FORMAT(
    'UPDATE pg_constraint SET convalidated=false WHERE conname = ''%I'' AND connamespace::regnamespace = ''%I''::regnamespace; ALTER TABLE %I.%I VALIDATE CONSTRAINT %I;',
    constraint_name,
    table_schema,
    table_schema,
    table_name,
    constraint_name
  ) AS constraint_check
  FROM information_schema.table_constraints WHERE constraint_type = 'FOREIGN KEY'
)
  LOOP
    EXECUTE (r.constraint_check);
  END LOOP;
END;
$$;
[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------
DishesControllerTest: test_should_get_index
-------------------------------------------
Started GET "/dishes/index" for 127.0.0.1 at 2023-05-12 11:16:22 -0400
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------
RestaurantsControllerTest: test_should_get_index
------------------------------------------------
Started GET "/restaurants/index" for 127.0.0.1 at 2023-05-12 11:16:22 -0400
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------
ItemTest: test_should_validate_presence_of_callories_at_db_level
----------------------------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------
ItemTest: test_item_belongs_to_a_restaurant
-------------------------------------------
  [1m[36mItem Load (0.4ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."name" = $1 LIMIT $2[0m  [["name", "Hamburguesa"], ["LIMIT", 1]]
  [1m[36mRestaurant Load (0.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 648827877], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------
ItemTest: test_should_load_fixtures_correctly
---------------------------------------------
  [1m[36mItem Load (0.3ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."name" = $1 LIMIT $2[0m  [["name", "Hamburguesa"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------
ItemTest: test_should_validate_presence_of_name_at_model_level
--------------------------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------
ItemTest: test_item_belongs_to_a_dish
-------------------------------------
  [1m[36mItem Load (0.3ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."name" = $1 LIMIT $2[0m  [["name", "Hamburguesa"], ["LIMIT", 1]]
  [1m[36mDish Load (1.0ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."id" = $1 LIMIT $2[0m  [["id", 509217612], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------
ItemTest: test_should_validate_presence_of_name_at_db_level
-----------------------------------------------------------
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------
ItemTest: test_should_validate_presence_of_callories_at_model_level
-------------------------------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------
ItemTest: test_should_validate_presence_of_price_at_model_level
---------------------------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------
ItemTest: test_should_validate_presence_of_price_at_db_level
------------------------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------
ItemsControllerTest: test_should_get_index
------------------------------------------
Started GET "/items/index" for 127.0.0.1 at 2023-05-12 11:16:22 -0400
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------
DishTest: test_should_validate_presence_of_name_at_db_level
-----------------------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------
DishTest: test_should_load_fixtures_correctly
---------------------------------------------
  [1m[36mDish Load (0.3ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."name" = $1 LIMIT $2[0m  [["name", "Dessert"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------
DishTest: test_should_have_many_items
-------------------------------------
  [1m[36mDish Load (0.3ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."name" = $1 LIMIT $2[0m  [["name", "Dessert"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------
DishTest: test_should_validate_presence_of_name_at_model_level
--------------------------------------------------------------
  [1m[36mTRANSACTION (1.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------
RoutesTest: test_should_route_to_items_show
-------------------------------------------
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------
RoutesTest: test_should_route_to_dishes_show
--------------------------------------------
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------
RoutesTest: test_should_route_to_items_index
--------------------------------------------
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------
RoutesTest: test_should_route_to_restaurants_show
-------------------------------------------------
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------
RoutesTest: test_should_route_to_dishes_index
---------------------------------------------
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------
RoutesTest: test_should_route_to_restaurants_index
--------------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------------
RestaurantTest: test_should_validate_presence_of_address_at_model_level
-----------------------------------------------------------------------
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------
RestaurantTest: test_should_load_fixtures_correctly
---------------------------------------------------
  [1m[36mRestaurant Load (0.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."name" = $1 LIMIT $2[0m  [["name", "NcDonalds"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------
RestaurantTest: test_should_validate_presence_of_address_at_db_level
--------------------------------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------
RestaurantTest: test_should_validate_presence_of_name_at_model_level
--------------------------------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------
RestaurantTest: test_should_have_many_items
-------------------------------------------
  [1m[36mRestaurant Load (0.4ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."name" = $1 LIMIT $2[0m  [["name", "NcDonalds"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------
RestaurantTest: test_should_validate_presence_of_name_at_db_level
-----------------------------------------------------------------
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (0.6ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "schema_sha1"], ["LIMIT", 1]]
  [1m[36mActiveRecord::SchemaMigration Pluck (1.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "dishes" DISABLE TRIGGER ALL;ALTER TABLE "items" DISABLE TRIGGER ALL;ALTER TABLE "restaurants" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (2.0ms)[0m  [1m[31mDELETE FROM "dishes";
DELETE FROM "items";
DELETE FROM "restaurants";
INSERT INTO "dishes" ("id", "name", "created_at", "updated_at") VALUES (122903280, 'Appetizer', '2023-05-12 15:18:42.111151', '2023-05-12 15:18:42.111151'), (509217612, 'Main Course', '2023-05-12 15:18:42.111151', '2023-05-12 15:18:42.111151'), (693976031, 'Dessert', '2023-05-12 15:18:42.111151', '2023-05-12 15:18:42.111151');
INSERT INTO "items" ("id", "name", "price", "callories", "created_at", "updated_at", "restaurant_id", "dish_id") VALUES (920592244, 'Pan', 1000, 150, '2023-05-12 15:18:42.145923', '2023-05-12 15:18:42.145923', 648827877, 122903280), (802574032, 'Hamburguesa', 1500, 200, '2023-05-12 15:18:42.145923', '2023-05-12 15:18:42.145923', 648827877, 509217612), (416382555, 'Papa Frita', 1000, 300, '2023-05-12 15:18:42.145923', '2023-05-12 15:18:42.145923', 648827877, 693976031), (112585724, 'Lechuga', 200, 20, '2023-05-12 15:18:42.145923', '2023-05-12 15:18:42.145923', 1067778657, 122903280), (833805165, 'Tomate', 100, 50, '2023-05-12 15:18:42.145923', '2023-05-12 15:18:42.145923', 1067778657, 509217612), (683379417, 'Queso', 300, 200, '2023-05-12 15:18:42.145923', '2023-05-12 15:18:42.145923', 1067778657, 693976031), (532462148, 'Cebolla', 1000, 100, '2023-05-12 15:18:42.145923', '2023-05-12 15:18:42.145923', 144847564, 122903280), (251897809, 'Frutilla', 1000, 200, '2023-05-12 15:18:42.145923', '2023-05-12 15:18:42.145923', 144847564, 509217612), (939824966, 'Helado', 1000, 200, '2023-05-12 15:18:42.145923', '2023-05-12 15:18:42.145923', 144847564, 693976031);
INSERT INTO "restaurants" ("id", "name", "address", "created_at", "updated_at") VALUES (648827877, 'Nestizo', 'Viacura 4000', '2023-05-12 15:18:42.161839', '2023-05-12 15:18:42.161839'), (1067778657, 'NcDonalds', 'El Salto s/n', '2023-05-12 15:18:42.161839', '2023-05-12 15:18:42.161839'), (144847564, 'Huendis', 'Vitacura 2800', '2023-05-12 15:18:42.161839', '2023-05-12 15:18:42.161839')[0m
  [1m[36mTRANSACTION (6.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "dishes" ENABLE TRIGGER ALL;ALTER TABLE "items" ENABLE TRIGGER ALL;ALTER TABLE "restaurants" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (3.7ms)[0m  [1m[35mdo $$
  declare r record;
BEGIN
FOR r IN (
  SELECT FORMAT(
    'UPDATE pg_constraint SET convalidated=false WHERE conname = ''%I'' AND connamespace::regnamespace = ''%I''::regnamespace; ALTER TABLE %I.%I VALIDATE CONSTRAINT %I;',
    constraint_name,
    table_schema,
    table_schema,
    table_name,
    constraint_name
  ) AS constraint_check
  FROM information_schema.table_constraints WHERE constraint_type = 'FOREIGN KEY'
)
  LOOP
    EXECUTE (r.constraint_check);
  END LOOP;
END;
$$;
[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------
DishTest: test_should_validate_presence_of_name_at_db_level
-----------------------------------------------------------
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
-------------------------------------
DishTest: test_should_have_many_items
-------------------------------------
  [1m[36mDish Load (0.6ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."name" = $1 LIMIT $2[0m  [["name", "Dessert"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------
DishTest: test_should_load_fixtures_correctly
---------------------------------------------
  [1m[36mDish Load (3.1ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."name" = $1 LIMIT $2[0m  [["name", "Dessert"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------
DishTest: test_should_validate_presence_of_name_at_model_level
--------------------------------------------------------------
  [1m[36mTRANSACTION (2.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------
RestaurantsControllerTest: test_should_get_index
------------------------------------------------
Started GET "/restaurants/index" for 127.0.0.1 at 2023-05-12 11:18:42 -0400
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------
ItemTest: test_should_validate_presence_of_name_at_model_level
--------------------------------------------------------------
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------
ItemTest: test_should_validate_presence_of_price_at_model_level
---------------------------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------
ItemTest: test_should_validate_presence_of_price_at_db_level
------------------------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------
ItemTest: test_should_validate_presence_of_name_at_db_level
-----------------------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------
ItemTest: test_should_load_fixtures_correctly
---------------------------------------------
  [1m[36mItem Load (0.3ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."name" = $1 LIMIT $2[0m  [["name", "Hamburguesa"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------
ItemTest: test_item_belongs_to_a_dish
-------------------------------------
  [1m[36mItem Load (0.3ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."name" = $1 LIMIT $2[0m  [["name", "Hamburguesa"], ["LIMIT", 1]]
  [1m[36mDish Load (0.3ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."id" = $1 LIMIT $2[0m  [["id", 509217612], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------
ItemTest: test_should_validate_presence_of_callories_at_model_level
-------------------------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------
ItemTest: test_item_belongs_to_a_restaurant
-------------------------------------------
  [1m[36mItem Load (0.3ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."name" = $1 LIMIT $2[0m  [["name", "Hamburguesa"], ["LIMIT", 1]]
  [1m[36mRestaurant Load (0.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 648827877], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------
ItemTest: test_should_validate_presence_of_callories_at_db_level
----------------------------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------
RestaurantTest: test_should_validate_presence_of_name_at_db_level
-----------------------------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------
RestaurantTest: test_should_validate_presence_of_address_at_db_level
--------------------------------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------
RestaurantTest: test_should_validate_presence_of_name_at_model_level
--------------------------------------------------------------------
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------
RestaurantTest: test_should_have_many_items
-------------------------------------------
  [1m[36mRestaurant Load (0.4ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."name" = $1 LIMIT $2[0m  [["name", "NcDonalds"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------
RestaurantTest: test_should_load_fixtures_correctly
---------------------------------------------------
  [1m[36mRestaurant Load (0.5ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."name" = $1 LIMIT $2[0m  [["name", "NcDonalds"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------------
RestaurantTest: test_should_validate_presence_of_address_at_model_level
-----------------------------------------------------------------------
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------
DishesControllerTest: test_should_get_index
-------------------------------------------
Started GET "/dishes/index" for 127.0.0.1 at 2023-05-12 11:18:42 -0400
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
------------------------------------------
ItemsControllerTest: test_should_get_index
------------------------------------------
Started GET "/items/index" for 127.0.0.1 at 2023-05-12 11:18:42 -0400
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (1.8ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------
RoutesTest: test_should_route_to_restaurants_index
--------------------------------------------------
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------
RoutesTest: test_should_route_to_items_index
--------------------------------------------
  [1m[36mTRANSACTION (6.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------
RoutesTest: test_should_route_to_restaurants_show
-------------------------------------------------
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------
RoutesTest: test_should_route_to_dishes_index
---------------------------------------------
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------
RoutesTest: test_should_route_to_dishes_show
--------------------------------------------
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------
RoutesTest: test_should_route_to_items_show
-------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (0.5ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "schema_sha1"], ["LIMIT", 1]]
  [1m[36mActiveRecord::SchemaMigration Pluck (1.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (2.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "dishes" DISABLE TRIGGER ALL;ALTER TABLE "items" DISABLE TRIGGER ALL;ALTER TABLE "restaurants" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (2.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.5ms)[0m  [1m[31mDELETE FROM "dishes";
DELETE FROM "items";
DELETE FROM "restaurants";
INSERT INTO "dishes" ("id", "name", "created_at", "updated_at") VALUES (122903280, 'Appetizer', '2023-05-12 15:20:10.154438', '2023-05-12 15:20:10.154438'), (509217612, 'Main Course', '2023-05-12 15:20:10.154438', '2023-05-12 15:20:10.154438'), (693976031, 'Dessert', '2023-05-12 15:20:10.154438', '2023-05-12 15:20:10.154438');
INSERT INTO "items" ("id", "name", "price", "callories", "created_at", "updated_at", "restaurant_id", "dish_id") VALUES (920592244, 'Pan', 1000, 150, '2023-05-12 15:20:10.162268', '2023-05-12 15:20:10.162268', 648827877, 122903280), (802574032, 'Hamburguesa', 1500, 200, '2023-05-12 15:20:10.162268', '2023-05-12 15:20:10.162268', 648827877, 509217612), (416382555, 'Papa Frita', 1000, 300, '2023-05-12 15:20:10.162268', '2023-05-12 15:20:10.162268', 648827877, 693976031), (112585724, 'Lechuga', 200, 20, '2023-05-12 15:20:10.162268', '2023-05-12 15:20:10.162268', 1067778657, 122903280), (833805165, 'Tomate', 100, 50, '2023-05-12 15:20:10.162268', '2023-05-12 15:20:10.162268', 1067778657, 509217612), (683379417, 'Queso', 300, 200, '2023-05-12 15:20:10.162268', '2023-05-12 15:20:10.162268', 1067778657, 693976031), (532462148, 'Cebolla', 1000, 100, '2023-05-12 15:20:10.162268', '2023-05-12 15:20:10.162268', 144847564, 122903280), (251897809, 'Frutilla', 1000, 200, '2023-05-12 15:20:10.162268', '2023-05-12 15:20:10.162268', 144847564, 509217612), (939824966, 'Helado', 1000, 200, '2023-05-12 15:20:10.162268', '2023-05-12 15:20:10.162268', 144847564, 693976031);
INSERT INTO "restaurants" ("id", "name", "address", "created_at", "updated_at") VALUES (648827877, 'Nestizo', 'Viacura 4000', '2023-05-12 15:20:10.171567', '2023-05-12 15:20:10.171567'), (1067778657, 'NcDonalds', 'El Salto s/n', '2023-05-12 15:20:10.171567', '2023-05-12 15:20:10.171567'), (144847564, 'Huendis', 'Vitacura 2800', '2023-05-12 15:20:10.171567', '2023-05-12 15:20:10.171567')[0m
  [1m[36mTRANSACTION (5.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "dishes" ENABLE TRIGGER ALL;ALTER TABLE "items" ENABLE TRIGGER ALL;ALTER TABLE "restaurants" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (3.6ms)[0m  [1m[35mdo $$
  declare r record;
BEGIN
FOR r IN (
  SELECT FORMAT(
    'UPDATE pg_constraint SET convalidated=false WHERE conname = ''%I'' AND connamespace::regnamespace = ''%I''::regnamespace; ALTER TABLE %I.%I VALIDATE CONSTRAINT %I;',
    constraint_name,
    table_schema,
    table_schema,
    table_name,
    constraint_name
  ) AS constraint_check
  FROM information_schema.table_constraints WHERE constraint_type = 'FOREIGN KEY'
)
  LOOP
    EXECUTE (r.constraint_check);
  END LOOP;
END;
$$;
[0m
  [1m[36mTRANSACTION (4.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------
RestaurantTest: test_should_validate_presence_of_address_at_db_level
--------------------------------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------
RestaurantTest: test_should_load_fixtures_correctly
---------------------------------------------------
  [1m[36mRestaurant Load (0.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."name" = $1 LIMIT $2[0m  [["name", "NcDonalds"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------
RestaurantTest: test_should_have_many_items
-------------------------------------------
  [1m[36mRestaurant Load (0.4ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."name" = $1 LIMIT $2[0m  [["name", "NcDonalds"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------
RestaurantTest: test_should_validate_presence_of_name_at_model_level
--------------------------------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------------
RestaurantTest: test_should_validate_presence_of_address_at_model_level
-----------------------------------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------
RestaurantTest: test_should_validate_presence_of_name_at_db_level
-----------------------------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------
ItemTest: test_should_load_fixtures_correctly
---------------------------------------------
  [1m[36mItem Load (0.4ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."name" = $1 LIMIT $2[0m  [["name", "Hamburguesa"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------
ItemTest: test_should_validate_presence_of_price_at_model_level
---------------------------------------------------------------
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------
ItemTest: test_should_validate_presence_of_name_at_model_level
--------------------------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------
ItemTest: test_item_belongs_to_a_restaurant
-------------------------------------------
  [1m[36mItem Load (0.4ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."name" = $1 LIMIT $2[0m  [["name", "Hamburguesa"], ["LIMIT", 1]]
  [1m[36mRestaurant Load (0.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 648827877], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
-------------------------------------
ItemTest: test_item_belongs_to_a_dish
-------------------------------------
  [1m[36mItem Load (0.4ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."name" = $1 LIMIT $2[0m  [["name", "Hamburguesa"], ["LIMIT", 1]]
  [1m[36mDish Load (0.4ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."id" = $1 LIMIT $2[0m  [["id", 509217612], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------
ItemTest: test_should_validate_presence_of_callories_at_model_level
-------------------------------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------
ItemTest: test_should_validate_presence_of_callories_at_db_level
----------------------------------------------------------------
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------
ItemTest: test_should_validate_presence_of_price_at_db_level
------------------------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------
ItemTest: test_should_validate_presence_of_name_at_db_level
-----------------------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------
RestaurantsControllerTest: test_should_get_index
------------------------------------------------
Started GET "/restaurants/index" for 127.0.0.1 at 2023-05-12 11:20:10 -0400
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
------------------------------------------
ItemsControllerTest: test_should_get_index
------------------------------------------
Started GET "/items/index" for 127.0.0.1 at 2023-05-12 11:20:10 -0400
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (2.5ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------
DishesControllerTest: test_should_get_index
-------------------------------------------
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------
DishTest: test_should_validate_presence_of_name_at_model_level
--------------------------------------------------------------
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------
DishTest: test_should_validate_presence_of_name_at_db_level
-----------------------------------------------------------
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------
DishTest: test_should_load_fixtures_correctly
---------------------------------------------
  [1m[36mDish Load (0.4ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."name" = $1 LIMIT $2[0m  [["name", "Dessert"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------
DishTest: test_should_have_many_items
-------------------------------------
  [1m[36mDish Load (0.3ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."name" = $1 LIMIT $2[0m  [["name", "Dessert"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------
RoutesTest: test_should_route_to_items_index
--------------------------------------------
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------
RoutesTest: test_should_route_to_dishes_show
--------------------------------------------
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------
RoutesTest: test_should_route_to_dishes_index
---------------------------------------------
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------
RoutesTest: test_should_route_to_restaurants_show
-------------------------------------------------
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------
RoutesTest: test_should_route_to_items_show
-------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------
RoutesTest: test_should_route_to_restaurants_index
--------------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (0.9ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "schema_sha1"], ["LIMIT", 1]]
  [1m[36mActiveRecord::SchemaMigration Pluck (0.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "dishes" DISABLE TRIGGER ALL;ALTER TABLE "items" DISABLE TRIGGER ALL;ALTER TABLE "restaurants" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.2ms)[0m  [1m[31mDELETE FROM "dishes";
DELETE FROM "items";
DELETE FROM "restaurants";
INSERT INTO "dishes" ("id", "name", "created_at", "updated_at") VALUES (122903280, 'Appetizer', '2023-05-12 15:21:07.053638', '2023-05-12 15:21:07.053638'), (509217612, 'Main Course', '2023-05-12 15:21:07.053638', '2023-05-12 15:21:07.053638'), (693976031, 'Dessert', '2023-05-12 15:21:07.053638', '2023-05-12 15:21:07.053638');
INSERT INTO "items" ("id", "name", "price", "callories", "created_at", "updated_at", "restaurant_id", "dish_id") VALUES (920592244, 'Pan', 1000, 150, '2023-05-12 15:21:07.060216', '2023-05-12 15:21:07.060216', 648827877, 122903280), (802574032, 'Hamburguesa', 1500, 200, '2023-05-12 15:21:07.060216', '2023-05-12 15:21:07.060216', 648827877, 509217612), (416382555, 'Papa Frita', 1000, 300, '2023-05-12 15:21:07.060216', '2023-05-12 15:21:07.060216', 648827877, 693976031), (112585724, 'Lechuga', 200, 20, '2023-05-12 15:21:07.060216', '2023-05-12 15:21:07.060216', 1067778657, 122903280), (833805165, 'Tomate', 100, 50, '2023-05-12 15:21:07.060216', '2023-05-12 15:21:07.060216', 1067778657, 509217612), (683379417, 'Queso', 300, 200, '2023-05-12 15:21:07.060216', '2023-05-12 15:21:07.060216', 1067778657, 693976031), (532462148, 'Cebolla', 1000, 100, '2023-05-12 15:21:07.060216', '2023-05-12 15:21:07.060216', 144847564, 122903280), (251897809, 'Frutilla', 1000, 200, '2023-05-12 15:21:07.060216', '2023-05-12 15:21:07.060216', 144847564, 509217612), (939824966, 'Helado', 1000, 200, '2023-05-12 15:21:07.060216', '2023-05-12 15:21:07.060216', 144847564, 693976031);
INSERT INTO "restaurants" ("id", "name", "address", "created_at", "updated_at") VALUES (648827877, 'Nestizo', 'Viacura 4000', '2023-05-12 15:21:07.098813', '2023-05-12 15:21:07.098813'), (1067778657, 'NcDonalds', 'El Salto s/n', '2023-05-12 15:21:07.098813', '2023-05-12 15:21:07.098813'), (144847564, 'Huendis', 'Vitacura 2800', '2023-05-12 15:21:07.098813', '2023-05-12 15:21:07.098813')[0m
  [1m[36mTRANSACTION (6.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "dishes" ENABLE TRIGGER ALL;ALTER TABLE "items" ENABLE TRIGGER ALL;ALTER TABLE "restaurants" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (3.5ms)[0m  [1m[35mdo $$
  declare r record;
BEGIN
FOR r IN (
  SELECT FORMAT(
    'UPDATE pg_constraint SET convalidated=false WHERE conname = ''%I'' AND connamespace::regnamespace = ''%I''::regnamespace; ALTER TABLE %I.%I VALIDATE CONSTRAINT %I;',
    constraint_name,
    table_schema,
    table_schema,
    table_name,
    constraint_name
  ) AS constraint_check
  FROM information_schema.table_constraints WHERE constraint_type = 'FOREIGN KEY'
)
  LOOP
    EXECUTE (r.constraint_check);
  END LOOP;
END;
$$;
[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
------------------------------------------
ItemsControllerTest: test_should_get_index
------------------------------------------
Started GET "/items/index" for 127.0.0.1 at 2023-05-12 11:21:07 -0400
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------
DishesControllerTest: test_should_get_index
-------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------
RestaurantTest: test_should_validate_presence_of_name_at_db_level
-----------------------------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------
RestaurantTest: test_should_validate_presence_of_address_at_db_level
--------------------------------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------
RestaurantTest: test_should_validate_presence_of_name_at_model_level
--------------------------------------------------------------------
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------
RestaurantTest: test_should_have_many_items
-------------------------------------------
  [1m[36mRestaurant Load (0.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."name" = $1 LIMIT $2[0m  [["name", "NcDonalds"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------
RestaurantTest: test_should_load_fixtures_correctly
---------------------------------------------------
  [1m[36mRestaurant Load (0.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."name" = $1 LIMIT $2[0m  [["name", "NcDonalds"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------------
RestaurantTest: test_should_validate_presence_of_address_at_model_level
-----------------------------------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------
DishTest: test_should_have_many_items
-------------------------------------
  [1m[36mDish Load (0.4ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."name" = $1 LIMIT $2[0m  [["name", "Dessert"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------
DishTest: test_should_load_fixtures_correctly
---------------------------------------------
  [1m[36mDish Load (0.5ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."name" = $1 LIMIT $2[0m  [["name", "Dessert"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------
DishTest: test_should_validate_presence_of_name_at_db_level
-----------------------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------
DishTest: test_should_validate_presence_of_name_at_model_level
--------------------------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------
ItemTest: test_should_validate_presence_of_price_at_db_level
------------------------------------------------------------
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------
ItemTest: test_should_validate_presence_of_name_at_db_level
-----------------------------------------------------------
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------
ItemTest: test_should_validate_presence_of_callories_at_db_level
----------------------------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------
ItemTest: test_should_load_fixtures_correctly
---------------------------------------------
  [1m[36mItem Load (0.5ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."name" = $1 LIMIT $2[0m  [["name", "Hamburguesa"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------
ItemTest: test_should_validate_presence_of_price_at_model_level
---------------------------------------------------------------
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------
ItemTest: test_should_validate_presence_of_callories_at_model_level
-------------------------------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
-------------------------------------
ItemTest: test_item_belongs_to_a_dish
-------------------------------------
  [1m[36mItem Load (0.3ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."name" = $1 LIMIT $2[0m  [["name", "Hamburguesa"], ["LIMIT", 1]]
  [1m[36mDish Load (0.3ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."id" = $1 LIMIT $2[0m  [["id", 509217612], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------
ItemTest: test_item_belongs_to_a_restaurant
-------------------------------------------
  [1m[36mItem Load (0.3ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."name" = $1 LIMIT $2[0m  [["name", "Hamburguesa"], ["LIMIT", 1]]
  [1m[36mRestaurant Load (0.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 648827877], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------
ItemTest: test_should_validate_presence_of_name_at_model_level
--------------------------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------
RoutesTest: test_should_route_to_restaurants_index
--------------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------
RoutesTest: test_should_route_to_items_index
--------------------------------------------
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------
RoutesTest: test_should_route_to_restaurants_show
-------------------------------------------------
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------
RoutesTest: test_should_route_to_dishes_index
---------------------------------------------
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------
RoutesTest: test_should_route_to_dishes_show
--------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------
RoutesTest: test_should_route_to_items_show
-------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------
RestaurantsControllerTest: test_should_get_index
------------------------------------------------
Started GET "/restaurants/index" for 127.0.0.1 at 2023-05-12 11:21:07 -0400
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (7.8ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "schema_sha1"], ["LIMIT", 1]]
  [1m[36mActiveRecord::SchemaMigration Pluck (1.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.6ms)[0m  [1m[35mALTER TABLE "dishes" DISABLE TRIGGER ALL;ALTER TABLE "items" DISABLE TRIGGER ALL;ALTER TABLE "restaurants" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (2.0ms)[0m  [1m[31mDELETE FROM "dishes";
DELETE FROM "items";
DELETE FROM "restaurants";
INSERT INTO "dishes" ("id", "name", "created_at", "updated_at") VALUES (122903280, 'Appetizer', '2023-05-12 15:22:33.721768', '2023-05-12 15:22:33.721768'), (509217612, 'Main Course', '2023-05-12 15:22:33.721768', '2023-05-12 15:22:33.721768'), (693976031, 'Dessert', '2023-05-12 15:22:33.721768', '2023-05-12 15:22:33.721768');
INSERT INTO "items" ("id", "name", "price", "callories", "created_at", "updated_at", "restaurant_id", "dish_id") VALUES (920592244, 'Pan', 1000, 150, '2023-05-12 15:22:33.728350', '2023-05-12 15:22:33.728350', 648827877, 122903280), (802574032, 'Hamburguesa', 1500, 200, '2023-05-12 15:22:33.728350', '2023-05-12 15:22:33.728350', 648827877, 509217612), (416382555, 'Papa Frita', 1000, 300, '2023-05-12 15:22:33.728350', '2023-05-12 15:22:33.728350', 648827877, 693976031), (112585724, 'Lechuga', 200, 20, '2023-05-12 15:22:33.728350', '2023-05-12 15:22:33.728350', 1067778657, 122903280), (833805165, 'Tomate', 100, 50, '2023-05-12 15:22:33.728350', '2023-05-12 15:22:33.728350', 1067778657, 509217612), (683379417, 'Queso', 300, 200, '2023-05-12 15:22:33.728350', '2023-05-12 15:22:33.728350', 1067778657, 693976031), (532462148, 'Cebolla', 1000, 100, '2023-05-12 15:22:33.728350', '2023-05-12 15:22:33.728350', 144847564, 122903280), (251897809, 'Frutilla', 1000, 200, '2023-05-12 15:22:33.728350', '2023-05-12 15:22:33.728350', 144847564, 509217612), (939824966, 'Helado', 1000, 200, '2023-05-12 15:22:33.728350', '2023-05-12 15:22:33.728350', 144847564, 693976031);
INSERT INTO "restaurants" ("id", "name", "address", "created_at", "updated_at") VALUES (648827877, 'Nestizo', 'Viacura 4000', '2023-05-12 15:22:33.736585', '2023-05-12 15:22:33.736585'), (1067778657, 'NcDonalds', 'El Salto s/n', '2023-05-12 15:22:33.736585', '2023-05-12 15:22:33.736585'), (144847564, 'Huendis', 'Vitacura 2800', '2023-05-12 15:22:33.736585', '2023-05-12 15:22:33.736585')[0m
  [1m[36mTRANSACTION (6.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "dishes" ENABLE TRIGGER ALL;ALTER TABLE "items" ENABLE TRIGGER ALL;ALTER TABLE "restaurants" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (3.2ms)[0m  [1m[35mdo $$
  declare r record;
BEGIN
FOR r IN (
  SELECT FORMAT(
    'UPDATE pg_constraint SET convalidated=false WHERE conname = ''%I'' AND connamespace::regnamespace = ''%I''::regnamespace; ALTER TABLE %I.%I VALIDATE CONSTRAINT %I;',
    constraint_name,
    table_schema,
    table_schema,
    table_name,
    constraint_name
  ) AS constraint_check
  FROM information_schema.table_constraints WHERE constraint_type = 'FOREIGN KEY'
)
  LOOP
    EXECUTE (r.constraint_check);
  END LOOP;
END;
$$;
[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------
DishesControllerTest: test_should_get_index
-------------------------------------------
Started GET "/dishes/index" for 127.0.0.1 at 2023-05-12 11:22:33 -0400
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------
RoutesTest: test_should_route_to_restaurants_index
--------------------------------------------------
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------
RoutesTest: test_should_route_to_dishes_index
---------------------------------------------
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------
RoutesTest: test_should_route_to_dishes_show
--------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------
RoutesTest: test_should_route_to_restaurants_show
-------------------------------------------------
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------
RoutesTest: test_should_route_to_items_show
-------------------------------------------
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------
RoutesTest: test_should_route_to_items_index
--------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
------------------------------------------
ItemsControllerTest: test_should_get_index
------------------------------------------
Started GET "/items/index" for 127.0.0.1 at 2023-05-12 11:22:33 -0400
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------
RestaurantTest: test_should_validate_presence_of_name_at_db_level
-----------------------------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------
RestaurantTest: test_should_have_many_items
-------------------------------------------
  [1m[36mRestaurant Load (0.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."name" = $1 LIMIT $2[0m  [["name", "NcDonalds"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------
RestaurantTest: test_should_load_fixtures_correctly
---------------------------------------------------
  [1m[36mRestaurant Load (3.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."name" = $1 LIMIT $2[0m  [["name", "NcDonalds"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------
RestaurantTest: test_should_validate_presence_of_name_at_model_level
--------------------------------------------------------------------
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------------
RestaurantTest: test_should_validate_presence_of_address_at_model_level
-----------------------------------------------------------------------
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------
RestaurantTest: test_should_validate_presence_of_address_at_db_level
--------------------------------------------------------------------
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------
ItemTest: test_should_validate_presence_of_price_at_model_level
---------------------------------------------------------------
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------
ItemTest: test_item_belongs_to_a_restaurant
-------------------------------------------
  [1m[36mItem Load (5.0ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."name" = $1 LIMIT $2[0m  [["name", "Hamburguesa"], ["LIMIT", 1]]
  [1m[36mRestaurant Load (4.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 648827877], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------
ItemTest: test_item_belongs_to_a_dish
-------------------------------------
  [1m[36mItem Load (0.4ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."name" = $1 LIMIT $2[0m  [["name", "Hamburguesa"], ["LIMIT", 1]]
  [1m[36mDish Load (0.5ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."id" = $1 LIMIT $2[0m  [["id", 509217612], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------
ItemTest: test_should_validate_presence_of_name_at_model_level
--------------------------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------
ItemTest: test_should_validate_presence_of_callories_at_model_level
-------------------------------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------
ItemTest: test_should_validate_presence_of_price_at_db_level
------------------------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------
ItemTest: test_should_validate_presence_of_callories_at_db_level
----------------------------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------
ItemTest: test_should_validate_presence_of_name_at_db_level
-----------------------------------------------------------
  [1m[36mTRANSACTION (1.7ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------
ItemTest: test_should_load_fixtures_correctly
---------------------------------------------
  [1m[36mItem Load (0.5ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."name" = $1 LIMIT $2[0m  [["name", "Hamburguesa"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------
RestaurantsControllerTest: test_should_get_index
------------------------------------------------
Started GET "/restaurants/index" for 127.0.0.1 at 2023-05-12 11:22:34 -0400
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
-------------------------------------
DishTest: test_should_have_many_items
-------------------------------------
  [1m[36mDish Load (0.3ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."name" = $1 LIMIT $2[0m  [["name", "Dessert"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------
DishTest: test_should_validate_presence_of_name_at_model_level
--------------------------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------
DishTest: test_should_load_fixtures_correctly
---------------------------------------------
  [1m[36mDish Load (0.4ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."name" = $1 LIMIT $2[0m  [["name", "Dessert"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------
DishTest: test_should_validate_presence_of_name_at_db_level
-----------------------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (0.5ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "schema_sha1"], ["LIMIT", 1]]
  [1m[36mActiveRecord::SchemaMigration Pluck (1.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "dishes" DISABLE TRIGGER ALL;ALTER TABLE "items" DISABLE TRIGGER ALL;ALTER TABLE "restaurants" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.2ms)[0m  [1m[31mDELETE FROM "dishes";
DELETE FROM "items";
DELETE FROM "restaurants";
INSERT INTO "dishes" ("id", "name", "created_at", "updated_at") VALUES (122903280, 'Appetizer', '2023-05-12 15:22:57.802065', '2023-05-12 15:22:57.802065'), (509217612, 'Main Course', '2023-05-12 15:22:57.802065', '2023-05-12 15:22:57.802065'), (693976031, 'Dessert', '2023-05-12 15:22:57.802065', '2023-05-12 15:22:57.802065');
INSERT INTO "items" ("id", "name", "price", "callories", "created_at", "updated_at", "restaurant_id", "dish_id") VALUES (920592244, 'Pan', 1000, 150, '2023-05-12 15:22:57.808760', '2023-05-12 15:22:57.808760', 648827877, 122903280), (802574032, 'Hamburguesa', 1500, 200, '2023-05-12 15:22:57.808760', '2023-05-12 15:22:57.808760', 648827877, 509217612), (416382555, 'Papa Frita', 1000, 300, '2023-05-12 15:22:57.808760', '2023-05-12 15:22:57.808760', 648827877, 693976031), (112585724, 'Lechuga', 200, 20, '2023-05-12 15:22:57.808760', '2023-05-12 15:22:57.808760', 1067778657, 122903280), (833805165, 'Tomate', 100, 50, '2023-05-12 15:22:57.808760', '2023-05-12 15:22:57.808760', 1067778657, 509217612), (683379417, 'Queso', 300, 200, '2023-05-12 15:22:57.808760', '2023-05-12 15:22:57.808760', 1067778657, 693976031), (532462148, 'Cebolla', 1000, 100, '2023-05-12 15:22:57.808760', '2023-05-12 15:22:57.808760', 144847564, 122903280), (251897809, 'Frutilla', 1000, 200, '2023-05-12 15:22:57.808760', '2023-05-12 15:22:57.808760', 144847564, 509217612), (939824966, 'Helado', 1000, 200, '2023-05-12 15:22:57.808760', '2023-05-12 15:22:57.808760', 144847564, 693976031);
INSERT INTO "restaurants" ("id", "name", "address", "created_at", "updated_at") VALUES (648827877, 'Nestizo', 'Viacura 4000', '2023-05-12 15:22:57.819524', '2023-05-12 15:22:57.819524'), (1067778657, 'NcDonalds', 'El Salto s/n', '2023-05-12 15:22:57.819524', '2023-05-12 15:22:57.819524'), (144847564, 'Huendis', 'Vitacura 2800', '2023-05-12 15:22:57.819524', '2023-05-12 15:22:57.819524')[0m
  [1m[36mTRANSACTION (6.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "dishes" ENABLE TRIGGER ALL;ALTER TABLE "items" ENABLE TRIGGER ALL;ALTER TABLE "restaurants" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (3.7ms)[0m  [1m[35mdo $$
  declare r record;
BEGIN
FOR r IN (
  SELECT FORMAT(
    'UPDATE pg_constraint SET convalidated=false WHERE conname = ''%I'' AND connamespace::regnamespace = ''%I''::regnamespace; ALTER TABLE %I.%I VALIDATE CONSTRAINT %I;',
    constraint_name,
    table_schema,
    table_schema,
    table_name,
    constraint_name
  ) AS constraint_check
  FROM information_schema.table_constraints WHERE constraint_type = 'FOREIGN KEY'
)
  LOOP
    EXECUTE (r.constraint_check);
  END LOOP;
END;
$$;
[0m
  [1m[36mTRANSACTION (4.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------
RoutesTest: test_should_route_to_restaurants_show
-------------------------------------------------
  [1m[36mTRANSACTION (2.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------
RoutesTest: test_should_route_to_dishes_index
---------------------------------------------
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------
RoutesTest: test_should_route_to_items_show
-------------------------------------------
  [1m[36mTRANSACTION (2.7ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------
RoutesTest: test_should_route_to_items_index
--------------------------------------------
  [1m[36mTRANSACTION (1.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------
RoutesTest: test_should_route_to_restaurants_index
--------------------------------------------------
  [1m[36mTRANSACTION (1.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------
RoutesTest: test_should_route_to_dishes_show
--------------------------------------------
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------
ItemsControllerTest: test_should_get_index
------------------------------------------
Started GET "/items/index" for 127.0.0.1 at 2023-05-12 11:22:58 -0400
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------
RestaurantTest: test_should_validate_presence_of_name_at_model_level
--------------------------------------------------------------------
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------
RestaurantTest: test_should_have_many_items
-------------------------------------------
  [1m[36mRestaurant Load (0.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."name" = $1 LIMIT $2[0m  [["name", "NcDonalds"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------------
RestaurantTest: test_should_validate_presence_of_address_at_model_level
-----------------------------------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------
RestaurantTest: test_should_validate_presence_of_address_at_db_level
--------------------------------------------------------------------
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------
RestaurantTest: test_should_validate_presence_of_name_at_db_level
-----------------------------------------------------------------
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------
RestaurantTest: test_should_load_fixtures_correctly
---------------------------------------------------
  [1m[36mRestaurant Load (0.4ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."name" = $1 LIMIT $2[0m  [["name", "NcDonalds"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------
DishTest: test_should_validate_presence_of_name_at_model_level
--------------------------------------------------------------
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------
DishTest: test_should_have_many_items
-------------------------------------
  [1m[36mDish Load (0.6ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."name" = $1 LIMIT $2[0m  [["name", "Dessert"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------
DishTest: test_should_validate_presence_of_name_at_db_level
-----------------------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------
DishTest: test_should_load_fixtures_correctly
---------------------------------------------
  [1m[36mDish Load (0.3ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."name" = $1 LIMIT $2[0m  [["name", "Dessert"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------
RestaurantsControllerTest: test_should_get_index
------------------------------------------------
Started GET "/restaurants/index" for 127.0.0.1 at 2023-05-12 11:22:58 -0400
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------
ItemTest: test_should_validate_presence_of_name_at_db_level
-----------------------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------
ItemTest: test_should_validate_presence_of_price_at_db_level
------------------------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------
ItemTest: test_item_belongs_to_a_restaurant
-------------------------------------------
  [1m[36mItem Load (0.3ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."name" = $1 LIMIT $2[0m  [["name", "Hamburguesa"], ["LIMIT", 1]]
  [1m[36mRestaurant Load (3.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 648827877], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (4.3ms)[0m  [1m[35mBEGIN[0m
-------------------------------------
ItemTest: test_item_belongs_to_a_dish
-------------------------------------
  [1m[36mItem Load (0.6ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."name" = $1 LIMIT $2[0m  [["name", "Hamburguesa"], ["LIMIT", 1]]
  [1m[36mDish Load (0.6ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."id" = $1 LIMIT $2[0m  [["id", 509217612], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------
ItemTest: test_should_validate_presence_of_price_at_model_level
---------------------------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------
ItemTest: test_should_validate_presence_of_name_at_model_level
--------------------------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------
ItemTest: test_should_validate_presence_of_callories_at_db_level
----------------------------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------
ItemTest: test_should_load_fixtures_correctly
---------------------------------------------
  [1m[36mItem Load (0.4ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."name" = $1 LIMIT $2[0m  [["name", "Hamburguesa"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------
ItemTest: test_should_validate_presence_of_callories_at_model_level
-------------------------------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------
DishesControllerTest: test_should_get_index
-------------------------------------------
Started GET "/dishes/index" for 127.0.0.1 at 2023-05-12 11:22:58 -0400
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (0.5ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "schema_sha1"], ["LIMIT", 1]]
  [1m[36mActiveRecord::SchemaMigration Pluck (1.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "dishes" DISABLE TRIGGER ALL;ALTER TABLE "items" DISABLE TRIGGER ALL;ALTER TABLE "restaurants" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.3ms)[0m  [1m[31mDELETE FROM "dishes";
DELETE FROM "items";
DELETE FROM "restaurants";
INSERT INTO "dishes" ("id", "name", "created_at", "updated_at") VALUES (122903280, 'Appetizer', '2023-05-12 16:03:31.840494', '2023-05-12 16:03:31.840494'), (509217612, 'Main Course', '2023-05-12 16:03:31.840494', '2023-05-12 16:03:31.840494'), (693976031, 'Dessert', '2023-05-12 16:03:31.840494', '2023-05-12 16:03:31.840494');
INSERT INTO "items" ("id", "name", "price", "callories", "created_at", "updated_at", "restaurant_id", "dish_id") VALUES (920592244, 'Pan', 1000, 150, '2023-05-12 16:03:31.847393', '2023-05-12 16:03:31.847393', 648827877, 122903280), (802574032, 'Hamburguesa', 1500, 200, '2023-05-12 16:03:31.847393', '2023-05-12 16:03:31.847393', 648827877, 509217612), (416382555, 'Papa Frita', 1000, 300, '2023-05-12 16:03:31.847393', '2023-05-12 16:03:31.847393', 648827877, 693976031), (112585724, 'Lechuga', 200, 20, '2023-05-12 16:03:31.847393', '2023-05-12 16:03:31.847393', 1067778657, 122903280), (833805165, 'Tomate', 100, 50, '2023-05-12 16:03:31.847393', '2023-05-12 16:03:31.847393', 1067778657, 509217612), (683379417, 'Queso', 300, 200, '2023-05-12 16:03:31.847393', '2023-05-12 16:03:31.847393', 1067778657, 693976031), (532462148, 'Cebolla', 1000, 100, '2023-05-12 16:03:31.847393', '2023-05-12 16:03:31.847393', 144847564, 122903280), (251897809, 'Frutilla', 1000, 200, '2023-05-12 16:03:31.847393', '2023-05-12 16:03:31.847393', 144847564, 509217612), (939824966, 'Helado', 1000, 200, '2023-05-12 16:03:31.847393', '2023-05-12 16:03:31.847393', 144847564, 693976031);
INSERT INTO "restaurants" ("id", "name", "address", "created_at", "updated_at") VALUES (648827877, 'Nestizo', 'Viacura 4000', '2023-05-12 16:03:31.891094', '2023-05-12 16:03:31.891094'), (1067778657, 'NcDonalds', 'El Salto s/n', '2023-05-12 16:03:31.891094', '2023-05-12 16:03:31.891094'), (144847564, 'Huendis', 'Vitacura 2800', '2023-05-12 16:03:31.891094', '2023-05-12 16:03:31.891094')[0m
  [1m[36mTRANSACTION (7.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "dishes" ENABLE TRIGGER ALL;ALTER TABLE "items" ENABLE TRIGGER ALL;ALTER TABLE "restaurants" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (2.8ms)[0m  [1m[35mdo $$
  declare r record;
BEGIN
FOR r IN (
  SELECT FORMAT(
    'UPDATE pg_constraint SET convalidated=false WHERE conname = ''%I'' AND connamespace::regnamespace = ''%I''::regnamespace; ALTER TABLE %I.%I VALIDATE CONSTRAINT %I;',
    constraint_name,
    table_schema,
    table_schema,
    table_name,
    constraint_name
  ) AS constraint_check
  FROM information_schema.table_constraints WHERE constraint_type = 'FOREIGN KEY'
)
  LOOP
    EXECUTE (r.constraint_check);
  END LOOP;
END;
$$;
[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------
DishesControllerTest: test_should_get_index
-------------------------------------------
Started GET "/dishes/index" for 127.0.0.1 at 2023-05-12 12:03:32 -0400
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------
RestaurantTest: test_should_validate_presence_of_name_at_model_level
--------------------------------------------------------------------
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------------
RestaurantTest: test_should_validate_presence_of_address_at_model_level
-----------------------------------------------------------------------
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------
RestaurantTest: test_should_have_many_items
-------------------------------------------
  [1m[36mRestaurant Load (0.4ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."name" = $1 LIMIT $2[0m  [["name", "NcDonalds"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------
RestaurantTest: test_should_load_fixtures_correctly
---------------------------------------------------
  [1m[36mRestaurant Load (0.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."name" = $1 LIMIT $2[0m  [["name", "NcDonalds"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------
RestaurantTest: test_should_validate_presence_of_address_at_db_level
--------------------------------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------
RestaurantTest: test_should_validate_presence_of_name_at_db_level
-----------------------------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------
RestaurantsControllerTest: test_should_get_index
------------------------------------------------
Started GET "/restaurants/index" for 127.0.0.1 at 2023-05-12 12:03:32 -0400
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------
ItemTest: test_item_belongs_to_a_dish
-------------------------------------
  [1m[36mItem Load (0.5ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."name" = $1 LIMIT $2[0m  [["name", "Hamburguesa"], ["LIMIT", 1]]
  [1m[36mDish Load (0.7ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."id" = $1 LIMIT $2[0m  [["id", 509217612], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------
ItemTest: test_should_validate_presence_of_price_at_model_level
---------------------------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------
ItemTest: test_should_validate_presence_of_callories_at_db_level
----------------------------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------
ItemTest: test_item_belongs_to_a_restaurant
-------------------------------------------
  [1m[36mItem Load (0.3ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."name" = $1 LIMIT $2[0m  [["name", "Hamburguesa"], ["LIMIT", 1]]
  [1m[36mRestaurant Load (0.4ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 648827877], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------
ItemTest: test_should_validate_presence_of_callories_at_model_level
-------------------------------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------
ItemTest: test_should_load_fixtures_correctly
---------------------------------------------
  [1m[36mItem Load (0.5ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."name" = $1 LIMIT $2[0m  [["name", "Hamburguesa"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------
ItemTest: test_should_validate_presence_of_name_at_model_level
--------------------------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------
ItemTest: test_should_validate_presence_of_name_at_db_level
-----------------------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------
ItemTest: test_should_validate_presence_of_price_at_db_level
------------------------------------------------------------
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
------------------------------------------
ItemsControllerTest: test_should_get_index
------------------------------------------
Started GET "/items/index" for 127.0.0.1 at 2023-05-12 12:03:32 -0400
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------
DishTest: test_should_validate_presence_of_name_at_model_level
--------------------------------------------------------------
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------
DishTest: test_should_validate_presence_of_name_at_db_level
-----------------------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------
DishTest: test_should_load_fixtures_correctly
---------------------------------------------
  [1m[36mDish Load (0.3ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."name" = $1 LIMIT $2[0m  [["name", "Dessert"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------
DishTest: test_should_have_many_items
-------------------------------------
  [1m[36mDish Load (0.4ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."name" = $1 LIMIT $2[0m  [["name", "Dessert"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------
RoutesTest: test_should_route_to_restaurants_show
-------------------------------------------------
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------
RoutesTest: test_should_route_to_items_show
-------------------------------------------
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------
RoutesTest: test_should_route_to_dishes_index
---------------------------------------------
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------
RoutesTest: test_should_route_to_dishes_show
--------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------
RoutesTest: test_should_route_to_items_index
--------------------------------------------
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------
RoutesTest: test_should_route_to_restaurants_index
--------------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (0.4ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "schema_sha1"], ["LIMIT", 1]]
  [1m[36mActiveRecord::SchemaMigration Pluck (32.9ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (4.2ms)[0m  [1m[35mALTER TABLE "dishes" DISABLE TRIGGER ALL;ALTER TABLE "items" DISABLE TRIGGER ALL;ALTER TABLE "restaurants" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (2.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.5ms)[0m  [1m[31mDELETE FROM "dishes";
DELETE FROM "items";
DELETE FROM "restaurants";
INSERT INTO "dishes" ("id", "name", "created_at", "updated_at") VALUES (122903280, 'Appetizer', '2023-05-12 16:11:17.615925', '2023-05-12 16:11:17.615925'), (509217612, 'Main Course', '2023-05-12 16:11:17.615925', '2023-05-12 16:11:17.615925'), (693976031, 'Dessert', '2023-05-12 16:11:17.615925', '2023-05-12 16:11:17.615925');
INSERT INTO "items" ("id", "name", "price", "callories", "created_at", "updated_at", "restaurant_id", "dish_id") VALUES (920592244, 'Pan', 1000, 150, '2023-05-12 16:11:17.627819', '2023-05-12 16:11:17.627819', 648827877, 122903280), (802574032, 'Hamburguesa', 1500, 200, '2023-05-12 16:11:17.627819', '2023-05-12 16:11:17.627819', 648827877, 509217612), (416382555, 'Papa Frita', 1000, 300, '2023-05-12 16:11:17.627819', '2023-05-12 16:11:17.627819', 648827877, 693976031), (112585724, 'Lechuga', 200, 20, '2023-05-12 16:11:17.627819', '2023-05-12 16:11:17.627819', 1067778657, 122903280), (833805165, 'Tomate', 100, 50, '2023-05-12 16:11:17.627819', '2023-05-12 16:11:17.627819', 1067778657, 509217612), (683379417, 'Queso', 300, 200, '2023-05-12 16:11:17.627819', '2023-05-12 16:11:17.627819', 1067778657, 693976031), (532462148, 'Cebolla', 1000, 100, '2023-05-12 16:11:17.627819', '2023-05-12 16:11:17.627819', 144847564, 122903280), (251897809, 'Frutilla', 1000, 200, '2023-05-12 16:11:17.627819', '2023-05-12 16:11:17.627819', 144847564, 509217612), (939824966, 'Helado', 1000, 200, '2023-05-12 16:11:17.627819', '2023-05-12 16:11:17.627819', 144847564, 693976031);
INSERT INTO "restaurants" ("id", "name", "address", "created_at", "updated_at") VALUES (648827877, 'Nestizo', 'Viacura 4000', '2023-05-12 16:11:17.640758', '2023-05-12 16:11:17.640758'), (1067778657, 'NcDonalds', 'El Salto s/n', '2023-05-12 16:11:17.640758', '2023-05-12 16:11:17.640758'), (144847564, 'Huendis', 'Vitacura 2800', '2023-05-12 16:11:17.640758', '2023-05-12 16:11:17.640758')[0m
  [1m[36mTRANSACTION (6.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "dishes" ENABLE TRIGGER ALL;ALTER TABLE "items" ENABLE TRIGGER ALL;ALTER TABLE "restaurants" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (3.6ms)[0m  [1m[35mdo $$
  declare r record;
BEGIN
FOR r IN (
  SELECT FORMAT(
    'UPDATE pg_constraint SET convalidated=false WHERE conname = ''%I'' AND connamespace::regnamespace = ''%I''::regnamespace; ALTER TABLE %I.%I VALIDATE CONSTRAINT %I;',
    constraint_name,
    table_schema,
    table_schema,
    table_name,
    constraint_name
  ) AS constraint_check
  FROM information_schema.table_constraints WHERE constraint_type = 'FOREIGN KEY'
)
  LOOP
    EXECUTE (r.constraint_check);
  END LOOP;
END;
$$;
[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------
ItemTest: test_should_load_fixtures_correctly
---------------------------------------------
  [1m[36mItem Load (0.4ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."name" = $1 LIMIT $2[0m  [["name", "Hamburguesa"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------
ItemTest: test_item_belongs_to_a_restaurant
-------------------------------------------
  [1m[36mItem Load (0.5ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."name" = $1 LIMIT $2[0m  [["name", "Hamburguesa"], ["LIMIT", 1]]
  [1m[36mRestaurant Load (0.4ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 648827877], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------
ItemTest: test_should_validate_presence_of_name_at_model_level
--------------------------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------
ItemTest: test_should_validate_presence_of_name_at_db_level
-----------------------------------------------------------
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------
ItemTest: test_should_validate_presence_of_price_at_model_level
---------------------------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------
ItemTest: test_item_belongs_to_a_dish
-------------------------------------
  [1m[36mItem Load (0.4ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."name" = $1 LIMIT $2[0m  [["name", "Hamburguesa"], ["LIMIT", 1]]
  [1m[36mDish Load (0.5ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."id" = $1 LIMIT $2[0m  [["id", 509217612], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------
ItemTest: test_should_validate_presence_of_callories_at_model_level
-------------------------------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------
ItemTest: test_should_validate_presence_of_callories_at_db_level
----------------------------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------
ItemTest: test_should_validate_presence_of_price_at_db_level
------------------------------------------------------------
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------
DishesControllerTest: test_should_get_index
-------------------------------------------
Started GET "/dishes/index" for 127.0.0.1 at 2023-05-12 12:11:17 -0400
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------
RestaurantTest: test_should_validate_presence_of_name_at_model_level
--------------------------------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------
RestaurantTest: test_should_load_fixtures_correctly
---------------------------------------------------
  [1m[36mRestaurant Load (0.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."name" = $1 LIMIT $2[0m  [["name", "NcDonalds"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------
RestaurantTest: test_should_validate_presence_of_name_at_db_level
-----------------------------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------
RestaurantTest: test_should_have_many_items
-------------------------------------------
  [1m[36mRestaurant Load (0.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."name" = $1 LIMIT $2[0m  [["name", "NcDonalds"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------------
RestaurantTest: test_should_validate_presence_of_address_at_model_level
-----------------------------------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------
RestaurantTest: test_should_validate_presence_of_address_at_db_level
--------------------------------------------------------------------
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------
DishTest: test_should_load_fixtures_correctly
---------------------------------------------
  [1m[36mDish Load (0.4ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."name" = $1 LIMIT $2[0m  [["name", "Dessert"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------
DishTest: test_should_validate_presence_of_name_at_model_level
--------------------------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
-------------------------------------
DishTest: test_should_have_many_items
-------------------------------------
  [1m[36mDish Load (11.0ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."name" = $1 LIMIT $2[0m  [["name", "Dessert"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------
DishTest: test_should_validate_presence_of_name_at_db_level
-----------------------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------
RoutesTest: test_should_route_to_restaurants_show
-------------------------------------------------
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------
RoutesTest: test_should_route_to_dishes_show
--------------------------------------------
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------
RoutesTest: test_should_route_to_restaurants_index
--------------------------------------------------
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------
RoutesTest: test_should_route_to_dishes_index
---------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------
RoutesTest: test_should_route_to_items_show
-------------------------------------------
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------
RoutesTest: test_should_route_to_items_index
--------------------------------------------
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------
RestaurantsControllerTest: test_should_get_index
------------------------------------------------
Started GET "/restaurants/index" for 127.0.0.1 at 2023-05-12 12:11:18 -0400
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
------------------------------------------
ItemsControllerTest: test_should_get_index
------------------------------------------
Started GET "/items/index" for 127.0.0.1 at 2023-05-12 12:11:18 -0400
Processing by ItemController#index as HTML
Completed 406 Not Acceptable in 9ms (ActiveRecord: 0.0ms | Allocations: 1877)
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (0.4ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "schema_sha1"], ["LIMIT", 1]]
  [1m[36mActiveRecord::SchemaMigration Pluck (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "dishes" DISABLE TRIGGER ALL;ALTER TABLE "items" DISABLE TRIGGER ALL;ALTER TABLE "restaurants" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.2ms)[0m  [1m[31mDELETE FROM "dishes";
DELETE FROM "items";
DELETE FROM "restaurants";
INSERT INTO "dishes" ("id", "name", "created_at", "updated_at") VALUES (122903280, 'Appetizer', '2023-05-12 16:11:37.400465', '2023-05-12 16:11:37.400465'), (509217612, 'Main Course', '2023-05-12 16:11:37.400465', '2023-05-12 16:11:37.400465'), (693976031, 'Dessert', '2023-05-12 16:11:37.400465', '2023-05-12 16:11:37.400465');
INSERT INTO "items" ("id", "name", "price", "callories", "created_at", "updated_at", "restaurant_id", "dish_id") VALUES (920592244, 'Pan', 1000, 150, '2023-05-12 16:11:37.407084', '2023-05-12 16:11:37.407084', 648827877, 122903280), (802574032, 'Hamburguesa', 1500, 200, '2023-05-12 16:11:37.407084', '2023-05-12 16:11:37.407084', 648827877, 509217612), (416382555, 'Papa Frita', 1000, 300, '2023-05-12 16:11:37.407084', '2023-05-12 16:11:37.407084', 648827877, 693976031), (112585724, 'Lechuga', 200, 20, '2023-05-12 16:11:37.407084', '2023-05-12 16:11:37.407084', 1067778657, 122903280), (833805165, 'Tomate', 100, 50, '2023-05-12 16:11:37.407084', '2023-05-12 16:11:37.407084', 1067778657, 509217612), (683379417, 'Queso', 300, 200, '2023-05-12 16:11:37.407084', '2023-05-12 16:11:37.407084', 1067778657, 693976031), (532462148, 'Cebolla', 1000, 100, '2023-05-12 16:11:37.407084', '2023-05-12 16:11:37.407084', 144847564, 122903280), (251897809, 'Frutilla', 1000, 200, '2023-05-12 16:11:37.407084', '2023-05-12 16:11:37.407084', 144847564, 509217612), (939824966, 'Helado', 1000, 200, '2023-05-12 16:11:37.407084', '2023-05-12 16:11:37.407084', 144847564, 693976031);
INSERT INTO "restaurants" ("id", "name", "address", "created_at", "updated_at") VALUES (648827877, 'Nestizo', 'Viacura 4000', '2023-05-12 16:11:37.415373', '2023-05-12 16:11:37.415373'), (1067778657, 'NcDonalds', 'El Salto s/n', '2023-05-12 16:11:37.415373', '2023-05-12 16:11:37.415373'), (144847564, 'Huendis', 'Vitacura 2800', '2023-05-12 16:11:37.415373', '2023-05-12 16:11:37.415373')[0m
  [1m[36mTRANSACTION (3.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "dishes" ENABLE TRIGGER ALL;ALTER TABLE "items" ENABLE TRIGGER ALL;ALTER TABLE "restaurants" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (3.9ms)[0m  [1m[35mdo $$
  declare r record;
BEGIN
FOR r IN (
  SELECT FORMAT(
    'UPDATE pg_constraint SET convalidated=false WHERE conname = ''%I'' AND connamespace::regnamespace = ''%I''::regnamespace; ALTER TABLE %I.%I VALIDATE CONSTRAINT %I;',
    constraint_name,
    table_schema,
    table_schema,
    table_name,
    constraint_name
  ) AS constraint_check
  FROM information_schema.table_constraints WHERE constraint_type = 'FOREIGN KEY'
)
  LOOP
    EXECUTE (r.constraint_check);
  END LOOP;
END;
$$;
[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------
DishesControllerTest: test_should_get_index
-------------------------------------------
Started GET "/dishes/index" for 127.0.0.1 at 2023-05-12 12:11:37 -0400
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------
ItemTest: test_item_belongs_to_a_restaurant
-------------------------------------------
  [1m[36mItem Load (0.4ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."name" = $1 LIMIT $2[0m  [["name", "Hamburguesa"], ["LIMIT", 1]]
  [1m[36mRestaurant Load (0.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 648827877], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------
ItemTest: test_should_validate_presence_of_name_at_db_level
-----------------------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------
ItemTest: test_should_validate_presence_of_callories_at_db_level
----------------------------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------
ItemTest: test_item_belongs_to_a_dish
-------------------------------------
  [1m[36mItem Load (0.3ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."name" = $1 LIMIT $2[0m  [["name", "Hamburguesa"], ["LIMIT", 1]]
  [1m[36mDish Load (0.4ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."id" = $1 LIMIT $2[0m  [["id", 509217612], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------
ItemTest: test_should_validate_presence_of_price_at_model_level
---------------------------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------
ItemTest: test_should_validate_presence_of_name_at_model_level
--------------------------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------
ItemTest: test_should_validate_presence_of_callories_at_model_level
-------------------------------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------
ItemTest: test_should_load_fixtures_correctly
---------------------------------------------
  [1m[36mItem Load (0.3ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."name" = $1 LIMIT $2[0m  [["name", "Hamburguesa"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------
ItemTest: test_should_validate_presence_of_price_at_db_level
------------------------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------
RestaurantsControllerTest: test_should_get_index
------------------------------------------------
Started GET "/restaurants/index" for 127.0.0.1 at 2023-05-12 12:11:37 -0400
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------
RestaurantTest: test_should_load_fixtures_correctly
---------------------------------------------------
  [1m[36mRestaurant Load (0.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."name" = $1 LIMIT $2[0m  [["name", "NcDonalds"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------
RestaurantTest: test_should_validate_presence_of_name_at_db_level
-----------------------------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------------
RestaurantTest: test_should_validate_presence_of_address_at_model_level
-----------------------------------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------
RestaurantTest: test_should_have_many_items
-------------------------------------------
  [1m[36mRestaurant Load (0.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."name" = $1 LIMIT $2[0m  [["name", "NcDonalds"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------
RestaurantTest: test_should_validate_presence_of_address_at_db_level
--------------------------------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------
RestaurantTest: test_should_validate_presence_of_name_at_model_level
--------------------------------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------
RoutesTest: test_should_route_to_dishes_show
--------------------------------------------
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------
RoutesTest: test_should_route_to_restaurants_index
--------------------------------------------------
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------
RoutesTest: test_should_route_to_items_show
-------------------------------------------
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------
RoutesTest: test_should_route_to_dishes_index
---------------------------------------------
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------
RoutesTest: test_should_route_to_items_index
--------------------------------------------
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------
RoutesTest: test_should_route_to_restaurants_show
-------------------------------------------------
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
------------------------------------------
ItemsControllerTest: test_should_get_index
------------------------------------------
Started GET "/items/index" for 127.0.0.1 at 2023-05-12 12:11:37 -0400
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------
DishTest: test_should_validate_presence_of_name_at_model_level
--------------------------------------------------------------
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mBEGIN[0m
-------------------------------------
DishTest: test_should_have_many_items
-------------------------------------
  [1m[36mDish Load (0.4ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."name" = $1 LIMIT $2[0m  [["name", "Dessert"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------
DishTest: test_should_validate_presence_of_name_at_db_level
-----------------------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------
DishTest: test_should_load_fixtures_correctly
---------------------------------------------
  [1m[36mDish Load (0.3ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."name" = $1 LIMIT $2[0m  [["name", "Dessert"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (0.6ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "schema_sha1"], ["LIMIT", 1]]
  [1m[36mActiveRecord::SchemaMigration Pluck (0.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "dishes" DISABLE TRIGGER ALL;ALTER TABLE "items" DISABLE TRIGGER ALL;ALTER TABLE "restaurants" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.9ms)[0m  [1m[31mDELETE FROM "dishes";
DELETE FROM "items";
DELETE FROM "restaurants";
INSERT INTO "dishes" ("id", "name", "created_at", "updated_at") VALUES (122903280, 'Appetizer', '2023-05-12 16:12:07.865214', '2023-05-12 16:12:07.865214'), (509217612, 'Main Course', '2023-05-12 16:12:07.865214', '2023-05-12 16:12:07.865214'), (693976031, 'Dessert', '2023-05-12 16:12:07.865214', '2023-05-12 16:12:07.865214');
INSERT INTO "items" ("id", "name", "price", "callories", "created_at", "updated_at", "restaurant_id", "dish_id") VALUES (920592244, 'Pan', 1000, 150, '2023-05-12 16:12:07.876144', '2023-05-12 16:12:07.876144', 648827877, 122903280), (802574032, 'Hamburguesa', 1500, 200, '2023-05-12 16:12:07.876144', '2023-05-12 16:12:07.876144', 648827877, 509217612), (416382555, 'Papa Frita', 1000, 300, '2023-05-12 16:12:07.876144', '2023-05-12 16:12:07.876144', 648827877, 693976031), (112585724, 'Lechuga', 200, 20, '2023-05-12 16:12:07.876144', '2023-05-12 16:12:07.876144', 1067778657, 122903280), (833805165, 'Tomate', 100, 50, '2023-05-12 16:12:07.876144', '2023-05-12 16:12:07.876144', 1067778657, 509217612), (683379417, 'Queso', 300, 200, '2023-05-12 16:12:07.876144', '2023-05-12 16:12:07.876144', 1067778657, 693976031), (532462148, 'Cebolla', 1000, 100, '2023-05-12 16:12:07.876144', '2023-05-12 16:12:07.876144', 144847564, 122903280), (251897809, 'Frutilla', 1000, 200, '2023-05-12 16:12:07.876144', '2023-05-12 16:12:07.876144', 144847564, 509217612), (939824966, 'Helado', 1000, 200, '2023-05-12 16:12:07.876144', '2023-05-12 16:12:07.876144', 144847564, 693976031);
INSERT INTO "restaurants" ("id", "name", "address", "created_at", "updated_at") VALUES (648827877, 'Nestizo', 'Viacura 4000', '2023-05-12 16:12:07.890123', '2023-05-12 16:12:07.890123'), (1067778657, 'NcDonalds', 'El Salto s/n', '2023-05-12 16:12:07.890123', '2023-05-12 16:12:07.890123'), (144847564, 'Huendis', 'Vitacura 2800', '2023-05-12 16:12:07.890123', '2023-05-12 16:12:07.890123')[0m
  [1m[36mTRANSACTION (6.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "dishes" ENABLE TRIGGER ALL;ALTER TABLE "items" ENABLE TRIGGER ALL;ALTER TABLE "restaurants" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (3.3ms)[0m  [1m[35mdo $$
  declare r record;
BEGIN
FOR r IN (
  SELECT FORMAT(
    'UPDATE pg_constraint SET convalidated=false WHERE conname = ''%I'' AND connamespace::regnamespace = ''%I''::regnamespace; ALTER TABLE %I.%I VALIDATE CONSTRAINT %I;',
    constraint_name,
    table_schema,
    table_schema,
    table_name,
    constraint_name
  ) AS constraint_check
  FROM information_schema.table_constraints WHERE constraint_type = 'FOREIGN KEY'
)
  LOOP
    EXECUTE (r.constraint_check);
  END LOOP;
END;
$$;
[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------
DishTest: test_should_validate_presence_of_name_at_db_level
-----------------------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------
DishTest: test_should_load_fixtures_correctly
---------------------------------------------
  [1m[36mDish Load (0.3ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."name" = $1 LIMIT $2[0m  [["name", "Dessert"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------
DishTest: test_should_have_many_items
-------------------------------------
  [1m[36mDish Load (0.3ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."name" = $1 LIMIT $2[0m  [["name", "Dessert"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------
DishTest: test_should_validate_presence_of_name_at_model_level
--------------------------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------
ItemTest: test_should_validate_presence_of_price_at_db_level
------------------------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------
ItemTest: test_should_load_fixtures_correctly
---------------------------------------------
  [1m[36mItem Load (0.3ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."name" = $1 LIMIT $2[0m  [["name", "Hamburguesa"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------
ItemTest: test_should_validate_presence_of_price_at_model_level
---------------------------------------------------------------
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------
ItemTest: test_should_validate_presence_of_name_at_model_level
--------------------------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------
ItemTest: test_should_validate_presence_of_callories_at_model_level
-------------------------------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------
ItemTest: test_should_validate_presence_of_name_at_db_level
-----------------------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------
ItemTest: test_item_belongs_to_a_restaurant
-------------------------------------------
  [1m[36mItem Load (0.4ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."name" = $1 LIMIT $2[0m  [["name", "Hamburguesa"], ["LIMIT", 1]]
  [1m[36mRestaurant Load (0.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 648827877], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
-------------------------------------
ItemTest: test_item_belongs_to_a_dish
-------------------------------------
  [1m[36mItem Load (0.8ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."name" = $1 LIMIT $2[0m  [["name", "Hamburguesa"], ["LIMIT", 1]]
  [1m[36mDish Load (0.3ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."id" = $1 LIMIT $2[0m  [["id", 509217612], ["LIMIT", 1]]
  [1m[36mTRANSACTION (1.7ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------
ItemTest: test_should_validate_presence_of_callories_at_db_level
----------------------------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------
RestaurantTest: test_should_validate_presence_of_address_at_db_level
--------------------------------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------
RestaurantTest: test_should_validate_presence_of_name_at_db_level
-----------------------------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------
RestaurantTest: test_should_validate_presence_of_name_at_model_level
--------------------------------------------------------------------
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------
RestaurantTest: test_should_load_fixtures_correctly
---------------------------------------------------
  [1m[36mRestaurant Load (0.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."name" = $1 LIMIT $2[0m  [["name", "NcDonalds"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (3.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------
RestaurantTest: test_should_have_many_items
-------------------------------------------
  [1m[36mRestaurant Load (0.5ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."name" = $1 LIMIT $2[0m  [["name", "NcDonalds"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (3.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------------
RestaurantTest: test_should_validate_presence_of_address_at_model_level
-----------------------------------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
------------------------------------------
ItemsControllerTest: test_should_get_index
------------------------------------------
Started GET "/items/index" for 127.0.0.1 at 2023-05-12 12:12:08 -0400
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------
RestaurantsControllerTest: test_should_get_index
------------------------------------------------
Started GET "/restaurants/index" for 127.0.0.1 at 2023-05-12 12:12:08 -0400
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------
RoutesTest: test_should_route_to_items_index
--------------------------------------------
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------
RoutesTest: test_should_route_to_restaurants_index
--------------------------------------------------
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------
RoutesTest: test_should_route_to_restaurants_show
-------------------------------------------------
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------
RoutesTest: test_should_route_to_dishes_show
--------------------------------------------
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------
RoutesTest: test_should_route_to_dishes_index
---------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------
RoutesTest: test_should_route_to_items_show
-------------------------------------------
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------
DishesControllerTest: test_should_get_index
-------------------------------------------
Started GET "/dishes/index" for 127.0.0.1 at 2023-05-12 12:12:08 -0400
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (0.4ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "schema_sha1"], ["LIMIT", 1]]
  [1m[36mActiveRecord::SchemaMigration Pluck (1.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "dishes" DISABLE TRIGGER ALL;ALTER TABLE "items" DISABLE TRIGGER ALL;ALTER TABLE "restaurants" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.9ms)[0m  [1m[31mDELETE FROM "dishes";
DELETE FROM "items";
DELETE FROM "restaurants";
INSERT INTO "dishes" ("id", "name", "created_at", "updated_at") VALUES (122903280, 'Appetizer', '2023-05-12 16:12:38.121419', '2023-05-12 16:12:38.121419'), (509217612, 'Main Course', '2023-05-12 16:12:38.121419', '2023-05-12 16:12:38.121419'), (693976031, 'Dessert', '2023-05-12 16:12:38.121419', '2023-05-12 16:12:38.121419');
INSERT INTO "items" ("id", "name", "price", "callories", "created_at", "updated_at", "restaurant_id", "dish_id") VALUES (920592244, 'Pan', 1000, 150, '2023-05-12 16:12:38.135385', '2023-05-12 16:12:38.135385', 648827877, 122903280), (802574032, 'Hamburguesa', 1500, 200, '2023-05-12 16:12:38.135385', '2023-05-12 16:12:38.135385', 648827877, 509217612), (416382555, 'Papa Frita', 1000, 300, '2023-05-12 16:12:38.135385', '2023-05-12 16:12:38.135385', 648827877, 693976031), (112585724, 'Lechuga', 200, 20, '2023-05-12 16:12:38.135385', '2023-05-12 16:12:38.135385', 1067778657, 122903280), (833805165, 'Tomate', 100, 50, '2023-05-12 16:12:38.135385', '2023-05-12 16:12:38.135385', 1067778657, 509217612), (683379417, 'Queso', 300, 200, '2023-05-12 16:12:38.135385', '2023-05-12 16:12:38.135385', 1067778657, 693976031), (532462148, 'Cebolla', 1000, 100, '2023-05-12 16:12:38.135385', '2023-05-12 16:12:38.135385', 144847564, 122903280), (251897809, 'Frutilla', 1000, 200, '2023-05-12 16:12:38.135385', '2023-05-12 16:12:38.135385', 144847564, 509217612), (939824966, 'Helado', 1000, 200, '2023-05-12 16:12:38.135385', '2023-05-12 16:12:38.135385', 144847564, 693976031);
INSERT INTO "restaurants" ("id", "name", "address", "created_at", "updated_at") VALUES (648827877, 'Nestizo', 'Viacura 4000', '2023-05-12 16:12:38.144122', '2023-05-12 16:12:38.144122'), (1067778657, 'NcDonalds', 'El Salto s/n', '2023-05-12 16:12:38.144122', '2023-05-12 16:12:38.144122'), (144847564, 'Huendis', 'Vitacura 2800', '2023-05-12 16:12:38.144122', '2023-05-12 16:12:38.144122')[0m
  [1m[36mTRANSACTION (6.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "dishes" ENABLE TRIGGER ALL;ALTER TABLE "items" ENABLE TRIGGER ALL;ALTER TABLE "restaurants" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (3.3ms)[0m  [1m[35mdo $$
  declare r record;
BEGIN
FOR r IN (
  SELECT FORMAT(
    'UPDATE pg_constraint SET convalidated=false WHERE conname = ''%I'' AND connamespace::regnamespace = ''%I''::regnamespace; ALTER TABLE %I.%I VALIDATE CONSTRAINT %I;',
    constraint_name,
    table_schema,
    table_schema,
    table_name,
    constraint_name
  ) AS constraint_check
  FROM information_schema.table_constraints WHERE constraint_type = 'FOREIGN KEY'
)
  LOOP
    EXECUTE (r.constraint_check);
  END LOOP;
END;
$$;
[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------
RoutesTest: test_should_route_to_items_index
--------------------------------------------
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------
RoutesTest: test_should_route_to_dishes_show
--------------------------------------------
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------
RoutesTest: test_should_route_to_dishes_index
---------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------
RoutesTest: test_should_route_to_restaurants_index
--------------------------------------------------
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------
RoutesTest: test_should_route_to_restaurants_show
-------------------------------------------------
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------
RoutesTest: test_should_route_to_items_show
-------------------------------------------
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------
ItemsControllerTest: test_should_get_index
------------------------------------------
Started GET "/items/index" for 127.0.0.1 at 2023-05-12 12:12:38 -0400
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------
DishTest: test_should_validate_presence_of_name_at_db_level
-----------------------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------
DishTest: test_should_load_fixtures_correctly
---------------------------------------------
  [1m[36mDish Load (0.4ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."name" = $1 LIMIT $2[0m  [["name", "Dessert"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
-------------------------------------
DishTest: test_should_have_many_items
-------------------------------------
  [1m[36mDish Load (0.5ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."name" = $1 LIMIT $2[0m  [["name", "Dessert"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------
DishTest: test_should_validate_presence_of_name_at_model_level
--------------------------------------------------------------
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------
DishesControllerTest: test_should_get_index
-------------------------------------------
Started GET "/dishes/index" for 127.0.0.1 at 2023-05-12 12:12:38 -0400
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------
ItemTest: test_should_validate_presence_of_name_at_db_level
-----------------------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------
ItemTest: test_should_load_fixtures_correctly
---------------------------------------------
  [1m[36mItem Load (0.4ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."name" = $1 LIMIT $2[0m  [["name", "Hamburguesa"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------
ItemTest: test_should_validate_presence_of_name_at_model_level
--------------------------------------------------------------
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------
ItemTest: test_should_validate_presence_of_callories_at_model_level
-------------------------------------------------------------------
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------
ItemTest: test_item_belongs_to_a_restaurant
-------------------------------------------
  [1m[36mItem Load (0.7ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."name" = $1 LIMIT $2[0m  [["name", "Hamburguesa"], ["LIMIT", 1]]
  [1m[36mRestaurant Load (4.8ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 648827877], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------
ItemTest: test_item_belongs_to_a_dish
-------------------------------------
  [1m[36mItem Load (0.3ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."name" = $1 LIMIT $2[0m  [["name", "Hamburguesa"], ["LIMIT", 1]]
  [1m[36mDish Load (0.3ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."id" = $1 LIMIT $2[0m  [["id", 509217612], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------
ItemTest: test_should_validate_presence_of_price_at_model_level
---------------------------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------
ItemTest: test_should_validate_presence_of_callories_at_db_level
----------------------------------------------------------------
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------
ItemTest: test_should_validate_presence_of_price_at_db_level
------------------------------------------------------------
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------
RestaurantTest: test_should_validate_presence_of_address_at_db_level
--------------------------------------------------------------------
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------
RestaurantTest: test_should_load_fixtures_correctly
---------------------------------------------------
  [1m[36mRestaurant Load (0.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."name" = $1 LIMIT $2[0m  [["name", "NcDonalds"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------
RestaurantTest: test_should_have_many_items
-------------------------------------------
  [1m[36mRestaurant Load (0.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."name" = $1 LIMIT $2[0m  [["name", "NcDonalds"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------
RestaurantTest: test_should_validate_presence_of_name_at_db_level
-----------------------------------------------------------------
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------
RestaurantTest: test_should_validate_presence_of_name_at_model_level
--------------------------------------------------------------------
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------------
RestaurantTest: test_should_validate_presence_of_address_at_model_level
-----------------------------------------------------------------------
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------
RestaurantsControllerTest: test_should_get_index
------------------------------------------------
Started GET "/restaurants/index" for 127.0.0.1 at 2023-05-12 12:12:38 -0400
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (0.5ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "schema_sha1"], ["LIMIT", 1]]
  [1m[36mActiveRecord::SchemaMigration Pluck (0.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.6ms)[0m  [1m[35mALTER TABLE "dishes" DISABLE TRIGGER ALL;ALTER TABLE "items" DISABLE TRIGGER ALL;ALTER TABLE "restaurants" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (2.1ms)[0m  [1m[31mDELETE FROM "dishes";
DELETE FROM "items";
DELETE FROM "restaurants";
INSERT INTO "dishes" ("id", "name", "created_at", "updated_at") VALUES (122903280, 'Appetizer', '2023-05-12 16:13:42.406884', '2023-05-12 16:13:42.406884'), (509217612, 'Main Course', '2023-05-12 16:13:42.406884', '2023-05-12 16:13:42.406884'), (693976031, 'Dessert', '2023-05-12 16:13:42.406884', '2023-05-12 16:13:42.406884');
INSERT INTO "items" ("id", "name", "price", "callories", "created_at", "updated_at", "restaurant_id", "dish_id") VALUES (920592244, 'Pan', 1000, 150, '2023-05-12 16:13:42.413349', '2023-05-12 16:13:42.413349', 648827877, 122903280), (802574032, 'Hamburguesa', 1500, 200, '2023-05-12 16:13:42.413349', '2023-05-12 16:13:42.413349', 648827877, 509217612), (416382555, 'Papa Frita', 1000, 300, '2023-05-12 16:13:42.413349', '2023-05-12 16:13:42.413349', 648827877, 693976031), (112585724, 'Lechuga', 200, 20, '2023-05-12 16:13:42.413349', '2023-05-12 16:13:42.413349', 1067778657, 122903280), (833805165, 'Tomate', 100, 50, '2023-05-12 16:13:42.413349', '2023-05-12 16:13:42.413349', 1067778657, 509217612), (683379417, 'Queso', 300, 200, '2023-05-12 16:13:42.413349', '2023-05-12 16:13:42.413349', 1067778657, 693976031), (532462148, 'Cebolla', 1000, 100, '2023-05-12 16:13:42.413349', '2023-05-12 16:13:42.413349', 144847564, 122903280), (251897809, 'Frutilla', 1000, 200, '2023-05-12 16:13:42.413349', '2023-05-12 16:13:42.413349', 144847564, 509217612), (939824966, 'Helado', 1000, 200, '2023-05-12 16:13:42.413349', '2023-05-12 16:13:42.413349', 144847564, 693976031);
INSERT INTO "restaurants" ("id", "name", "address", "created_at", "updated_at") VALUES (648827877, 'Nestizo', 'Viacura 4000', '2023-05-12 16:13:42.424980', '2023-05-12 16:13:42.424980'), (1067778657, 'NcDonalds', 'El Salto s/n', '2023-05-12 16:13:42.424980', '2023-05-12 16:13:42.424980'), (144847564, 'Huendis', 'Vitacura 2800', '2023-05-12 16:13:42.424980', '2023-05-12 16:13:42.424980')[0m
  [1m[36mTRANSACTION (6.0ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "dishes" ENABLE TRIGGER ALL;ALTER TABLE "items" ENABLE TRIGGER ALL;ALTER TABLE "restaurants" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (3.7ms)[0m  [1m[35mdo $$
  declare r record;
BEGIN
FOR r IN (
  SELECT FORMAT(
    'UPDATE pg_constraint SET convalidated=false WHERE conname = ''%I'' AND connamespace::regnamespace = ''%I''::regnamespace; ALTER TABLE %I.%I VALIDATE CONSTRAINT %I;',
    constraint_name,
    table_schema,
    table_schema,
    table_name,
    constraint_name
  ) AS constraint_check
  FROM information_schema.table_constraints WHERE constraint_type = 'FOREIGN KEY'
)
  LOOP
    EXECUTE (r.constraint_check);
  END LOOP;
END;
$$;
[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
------------------------------------------
ItemsControllerTest: test_should_get_index
------------------------------------------
Started GET "/items/index" for 127.0.0.1 at 2023-05-12 12:13:42 -0400
Processing by ItemsController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering items/index.html.erb within layouts/application
  Rendered items/index.html.erb within layouts/application (Duration: 1.2ms | Allocations: 290)
  Rendered layout layouts/application.html.erb (Duration: 6.4ms | Allocations: 2133)
Completed 500 Internal Server Error in 19ms (ActiveRecord: 0.0ms | Allocations: 5206)
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------------
RestaurantTest: test_should_validate_presence_of_address_at_model_level
-----------------------------------------------------------------------
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------
RestaurantTest: test_should_load_fixtures_correctly
---------------------------------------------------
  [1m[36mRestaurant Load (0.4ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."name" = $1 LIMIT $2[0m  [["name", "NcDonalds"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------
RestaurantTest: test_should_validate_presence_of_address_at_db_level
--------------------------------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------
RestaurantTest: test_should_validate_presence_of_name_at_db_level
-----------------------------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------
RestaurantTest: test_should_have_many_items
-------------------------------------------
  [1m[36mRestaurant Load (0.4ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."name" = $1 LIMIT $2[0m  [["name", "NcDonalds"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------
RestaurantTest: test_should_validate_presence_of_name_at_model_level
--------------------------------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------
RoutesTest: test_should_route_to_items_show
-------------------------------------------
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------
RoutesTest: test_should_route_to_dishes_show
--------------------------------------------
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------
RoutesTest: test_should_route_to_items_index
--------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------
RoutesTest: test_should_route_to_restaurants_index
--------------------------------------------------
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------
RoutesTest: test_should_route_to_dishes_index
---------------------------------------------
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------
RoutesTest: test_should_route_to_restaurants_show
-------------------------------------------------
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------
DishesControllerTest: test_should_get_index
-------------------------------------------
Started GET "/dishes/index" for 127.0.0.1 at 2023-05-12 12:13:42 -0400
Processing by DishesController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering dishes/index.html.erb within layouts/application
  Rendered dishes/index.html.erb within layouts/application (Duration: 0.6ms | Allocations: 103)
  Rendered layout layouts/application.html.erb (Duration: 2.2ms | Allocations: 1040)
Completed 500 Internal Server Error in 9ms (ActiveRecord: 0.0ms | Allocations: 1654)
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------
RestaurantsControllerTest: test_should_get_index
------------------------------------------------
Started GET "/restaurants/index" for 127.0.0.1 at 2023-05-12 12:13:42 -0400
Processing by RestaurantsController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering restaurants/index.html.erb within layouts/application
  Rendered restaurants/index.html.erb within layouts/application (Duration: 0.6ms | Allocations: 103)
  Rendered layout layouts/application.html.erb (Duration: 2.4ms | Allocations: 1040)
Completed 500 Internal Server Error in 5ms (ActiveRecord: 0.0ms | Allocations: 1614)
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------
ItemTest: test_should_load_fixtures_correctly
---------------------------------------------
  [1m[36mItem Load (0.4ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."name" = $1 LIMIT $2[0m  [["name", "Hamburguesa"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------
ItemTest: test_item_belongs_to_a_restaurant
-------------------------------------------
  [1m[36mItem Load (0.4ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."name" = $1 LIMIT $2[0m  [["name", "Hamburguesa"], ["LIMIT", 1]]
  [1m[36mRestaurant Load (0.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 648827877], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------
ItemTest: test_should_validate_presence_of_callories_at_model_level
-------------------------------------------------------------------
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------
ItemTest: test_should_validate_presence_of_price_at_db_level
------------------------------------------------------------
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------
ItemTest: test_should_validate_presence_of_name_at_db_level
-----------------------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------
ItemTest: test_should_validate_presence_of_callories_at_db_level
----------------------------------------------------------------
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------
ItemTest: test_should_validate_presence_of_name_at_model_level
--------------------------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------
ItemTest: test_item_belongs_to_a_dish
-------------------------------------
  [1m[36mItem Load (0.3ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."name" = $1 LIMIT $2[0m  [["name", "Hamburguesa"], ["LIMIT", 1]]
  [1m[36mDish Load (0.4ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."id" = $1 LIMIT $2[0m  [["id", 509217612], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------
ItemTest: test_should_validate_presence_of_price_at_model_level
---------------------------------------------------------------
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------
DishTest: test_should_validate_presence_of_name_at_model_level
--------------------------------------------------------------
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------
DishTest: test_should_validate_presence_of_name_at_db_level
-----------------------------------------------------------
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------
DishTest: test_should_have_many_items
-------------------------------------
  [1m[36mDish Load (0.5ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."name" = $1 LIMIT $2[0m  [["name", "Dessert"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------
DishTest: test_should_load_fixtures_correctly
---------------------------------------------
  [1m[36mDish Load (0.3ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."name" = $1 LIMIT $2[0m  [["name", "Dessert"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (0.6ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "schema_sha1"], ["LIMIT", 1]]
  [1m[36mActiveRecord::SchemaMigration Pluck (0.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.9ms)[0m  [1m[35mALTER TABLE "dishes" DISABLE TRIGGER ALL;ALTER TABLE "items" DISABLE TRIGGER ALL;ALTER TABLE "restaurants" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.8ms)[0m  [1m[31mDELETE FROM "dishes";
DELETE FROM "items";
DELETE FROM "restaurants";
INSERT INTO "dishes" ("id", "name", "created_at", "updated_at") VALUES (122903280, 'Appetizer', '2023-05-12 16:14:30.467625', '2023-05-12 16:14:30.467625'), (509217612, 'Main Course', '2023-05-12 16:14:30.467625', '2023-05-12 16:14:30.467625'), (693976031, 'Dessert', '2023-05-12 16:14:30.467625', '2023-05-12 16:14:30.467625');
INSERT INTO "items" ("id", "name", "price", "callories", "created_at", "updated_at", "restaurant_id", "dish_id") VALUES (920592244, 'Pan', 1000, 150, '2023-05-12 16:14:30.481293', '2023-05-12 16:14:30.481293', 648827877, 122903280), (802574032, 'Hamburguesa', 1500, 200, '2023-05-12 16:14:30.481293', '2023-05-12 16:14:30.481293', 648827877, 509217612), (416382555, 'Papa Frita', 1000, 300, '2023-05-12 16:14:30.481293', '2023-05-12 16:14:30.481293', 648827877, 693976031), (112585724, 'Lechuga', 200, 20, '2023-05-12 16:14:30.481293', '2023-05-12 16:14:30.481293', 1067778657, 122903280), (833805165, 'Tomate', 100, 50, '2023-05-12 16:14:30.481293', '2023-05-12 16:14:30.481293', 1067778657, 509217612), (683379417, 'Queso', 300, 200, '2023-05-12 16:14:30.481293', '2023-05-12 16:14:30.481293', 1067778657, 693976031), (532462148, 'Cebolla', 1000, 100, '2023-05-12 16:14:30.481293', '2023-05-12 16:14:30.481293', 144847564, 122903280), (251897809, 'Frutilla', 1000, 200, '2023-05-12 16:14:30.481293', '2023-05-12 16:14:30.481293', 144847564, 509217612), (939824966, 'Helado', 1000, 200, '2023-05-12 16:14:30.481293', '2023-05-12 16:14:30.481293', 144847564, 693976031);
INSERT INTO "restaurants" ("id", "name", "address", "created_at", "updated_at") VALUES (648827877, 'Nestizo', 'Viacura 4000', '2023-05-12 16:14:30.491356', '2023-05-12 16:14:30.491356'), (1067778657, 'NcDonalds', 'El Salto s/n', '2023-05-12 16:14:30.491356', '2023-05-12 16:14:30.491356'), (144847564, 'Huendis', 'Vitacura 2800', '2023-05-12 16:14:30.491356', '2023-05-12 16:14:30.491356')[0m
  [1m[36mTRANSACTION (5.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "dishes" ENABLE TRIGGER ALL;ALTER TABLE "items" ENABLE TRIGGER ALL;ALTER TABLE "restaurants" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (3.8ms)[0m  [1m[35mdo $$
  declare r record;
BEGIN
FOR r IN (
  SELECT FORMAT(
    'UPDATE pg_constraint SET convalidated=false WHERE conname = ''%I'' AND connamespace::regnamespace = ''%I''::regnamespace; ALTER TABLE %I.%I VALIDATE CONSTRAINT %I;',
    constraint_name,
    table_schema,
    table_schema,
    table_name,
    constraint_name
  ) AS constraint_check
  FROM information_schema.table_constraints WHERE constraint_type = 'FOREIGN KEY'
)
  LOOP
    EXECUTE (r.constraint_check);
  END LOOP;
END;
$$;
[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------
DishTest: test_should_load_fixtures_correctly
---------------------------------------------
  [1m[36mDish Load (0.4ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."name" = $1 LIMIT $2[0m  [["name", "Dessert"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------
DishTest: test_should_validate_presence_of_name_at_db_level
-----------------------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------
DishTest: test_should_have_many_items
-------------------------------------
  [1m[36mDish Load (0.4ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."name" = $1 LIMIT $2[0m  [["name", "Dessert"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------
DishTest: test_should_validate_presence_of_name_at_model_level
--------------------------------------------------------------
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------
ItemTest: test_should_load_fixtures_correctly
---------------------------------------------
  [1m[36mItem Load (0.4ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."name" = $1 LIMIT $2[0m  [["name", "Hamburguesa"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (1.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------
ItemTest: test_should_validate_presence_of_name_at_db_level
-----------------------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------
ItemTest: test_should_validate_presence_of_name_at_model_level
--------------------------------------------------------------
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------
ItemTest: test_item_belongs_to_a_restaurant
-------------------------------------------
  [1m[36mItem Load (0.3ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."name" = $1 LIMIT $2[0m  [["name", "Hamburguesa"], ["LIMIT", 1]]
  [1m[36mRestaurant Load (0.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 648827877], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------
ItemTest: test_should_validate_presence_of_callories_at_db_level
----------------------------------------------------------------
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------
ItemTest: test_should_validate_presence_of_callories_at_model_level
-------------------------------------------------------------------
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------
ItemTest: test_item_belongs_to_a_dish
-------------------------------------
  [1m[36mItem Load (0.3ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."name" = $1 LIMIT $2[0m  [["name", "Hamburguesa"], ["LIMIT", 1]]
  [1m[36mDish Load (0.4ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."id" = $1 LIMIT $2[0m  [["id", 509217612], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------
ItemTest: test_should_validate_presence_of_price_at_model_level
---------------------------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------
ItemTest: test_should_validate_presence_of_price_at_db_level
------------------------------------------------------------
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------
RestaurantTest: test_should_validate_presence_of_address_at_db_level
--------------------------------------------------------------------
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------
RestaurantTest: test_should_validate_presence_of_name_at_model_level
--------------------------------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------
RestaurantTest: test_should_load_fixtures_correctly
---------------------------------------------------
  [1m[36mRestaurant Load (0.4ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."name" = $1 LIMIT $2[0m  [["name", "NcDonalds"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------------
RestaurantTest: test_should_validate_presence_of_address_at_model_level
-----------------------------------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------
RestaurantTest: test_should_validate_presence_of_name_at_db_level
-----------------------------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------
RestaurantTest: test_should_have_many_items
-------------------------------------------
  [1m[36mRestaurant Load (0.4ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."name" = $1 LIMIT $2[0m  [["name", "NcDonalds"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
------------------------------------------
ItemsControllerTest: test_should_get_index
------------------------------------------
Started GET "/items/index" for 127.0.0.1 at 2023-05-12 12:14:30 -0400
Processing by ItemsController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering items/index.html.erb within layouts/application
  Rendered items/index.html.erb within layouts/application (Duration: 1.8ms | Allocations: 290)
  Rendered layout layouts/application.html.erb (Duration: 6.0ms | Allocations: 2133)
Completed 500 Internal Server Error in 16ms (ActiveRecord: 0.0ms | Allocations: 5148)
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------
RestaurantsControllerTest: test_should_get_index
------------------------------------------------
Started GET "/restaurants/index" for 127.0.0.1 at 2023-05-12 12:14:30 -0400
Processing by RestaurantsController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering restaurants/index.html.erb within layouts/application
  Rendered restaurants/index.html.erb within layouts/application (Duration: 0.5ms | Allocations: 103)
  Rendered layout layouts/application.html.erb (Duration: 2.3ms | Allocations: 1040)
Completed 500 Internal Server Error in 5ms (ActiveRecord: 0.0ms | Allocations: 1615)
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------
DishesControllerTest: test_should_get_index
-------------------------------------------
Started GET "/dishes/index" for 127.0.0.1 at 2023-05-12 12:14:30 -0400
Processing by DishesController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering dishes/index.html.erb within layouts/application
  Rendered dishes/index.html.erb within layouts/application (Duration: 0.6ms | Allocations: 106)
  Rendered layout layouts/application.html.erb (Duration: 2.3ms | Allocations: 1068)
Completed 500 Internal Server Error in 30ms (ActiveRecord: 0.0ms | Allocations: 1638)
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------
RoutesTest: test_should_route_to_items_index
--------------------------------------------
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------
RoutesTest: test_should_route_to_restaurants_show
-------------------------------------------------
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------
RoutesTest: test_should_route_to_dishes_show
--------------------------------------------
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------
RoutesTest: test_should_route_to_items_show
-------------------------------------------
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------
RoutesTest: test_should_route_to_restaurants_index
--------------------------------------------------
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------
RoutesTest: test_should_route_to_dishes_index
---------------------------------------------
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (0.5ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "schema_sha1"], ["LIMIT", 1]]
  [1m[36mActiveRecord::SchemaMigration Pluck (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "dishes" DISABLE TRIGGER ALL;ALTER TABLE "items" DISABLE TRIGGER ALL;ALTER TABLE "restaurants" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.9ms)[0m  [1m[31mDELETE FROM "dishes";
DELETE FROM "items";
DELETE FROM "restaurants";
INSERT INTO "dishes" ("id", "name", "created_at", "updated_at") VALUES (122903280, 'Appetizer', '2023-05-12 16:15:40.884314', '2023-05-12 16:15:40.884314'), (509217612, 'Main Course', '2023-05-12 16:15:40.884314', '2023-05-12 16:15:40.884314'), (693976031, 'Dessert', '2023-05-12 16:15:40.884314', '2023-05-12 16:15:40.884314');
INSERT INTO "items" ("id", "name", "price", "callories", "created_at", "updated_at", "restaurant_id", "dish_id") VALUES (920592244, 'Pan', 1000, 150, '2023-05-12 16:15:40.891649', '2023-05-12 16:15:40.891649', 648827877, 122903280), (802574032, 'Hamburguesa', 1500, 200, '2023-05-12 16:15:40.891649', '2023-05-12 16:15:40.891649', 648827877, 509217612), (416382555, 'Papa Frita', 1000, 300, '2023-05-12 16:15:40.891649', '2023-05-12 16:15:40.891649', 648827877, 693976031), (112585724, 'Lechuga', 200, 20, '2023-05-12 16:15:40.891649', '2023-05-12 16:15:40.891649', 1067778657, 122903280), (833805165, 'Tomate', 100, 50, '2023-05-12 16:15:40.891649', '2023-05-12 16:15:40.891649', 1067778657, 509217612), (683379417, 'Queso', 300, 200, '2023-05-12 16:15:40.891649', '2023-05-12 16:15:40.891649', 1067778657, 693976031), (532462148, 'Cebolla', 1000, 100, '2023-05-12 16:15:40.891649', '2023-05-12 16:15:40.891649', 144847564, 122903280), (251897809, 'Frutilla', 1000, 200, '2023-05-12 16:15:40.891649', '2023-05-12 16:15:40.891649', 144847564, 509217612), (939824966, 'Helado', 1000, 200, '2023-05-12 16:15:40.891649', '2023-05-12 16:15:40.891649', 144847564, 693976031);
INSERT INTO "restaurants" ("id", "name", "address", "created_at", "updated_at") VALUES (648827877, 'Nestizo', 'Viacura 4000', '2023-05-12 16:15:40.900508', '2023-05-12 16:15:40.900508'), (1067778657, 'NcDonalds', 'El Salto s/n', '2023-05-12 16:15:40.900508', '2023-05-12 16:15:40.900508'), (144847564, 'Huendis', 'Vitacura 2800', '2023-05-12 16:15:40.900508', '2023-05-12 16:15:40.900508')[0m
  [1m[36mTRANSACTION (12.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "dishes" ENABLE TRIGGER ALL;ALTER TABLE "items" ENABLE TRIGGER ALL;ALTER TABLE "restaurants" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (7.8ms)[0m  [1m[35mdo $$
  declare r record;
BEGIN
FOR r IN (
  SELECT FORMAT(
    'UPDATE pg_constraint SET convalidated=false WHERE conname = ''%I'' AND connamespace::regnamespace = ''%I''::regnamespace; ALTER TABLE %I.%I VALIDATE CONSTRAINT %I;',
    constraint_name,
    table_schema,
    table_schema,
    table_name,
    constraint_name
  ) AS constraint_check
  FROM information_schema.table_constraints WHERE constraint_type = 'FOREIGN KEY'
)
  LOOP
    EXECUTE (r.constraint_check);
  END LOOP;
END;
$$;
[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------
RestaurantTest: test_should_validate_presence_of_address_at_db_level
--------------------------------------------------------------------
  [1m[36mTRANSACTION (3.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------
RestaurantTest: test_should_have_many_items
-------------------------------------------
  [1m[36mRestaurant Load (0.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."name" = $1 LIMIT $2[0m  [["name", "NcDonalds"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------
RestaurantTest: test_should_load_fixtures_correctly
---------------------------------------------------
  [1m[36mRestaurant Load (0.4ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."name" = $1 LIMIT $2[0m  [["name", "NcDonalds"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (3.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------------
RestaurantTest: test_should_validate_presence_of_address_at_model_level
-----------------------------------------------------------------------
  [1m[36mTRANSACTION (5.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------
RestaurantTest: test_should_validate_presence_of_name_at_db_level
-----------------------------------------------------------------
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------
RestaurantTest: test_should_validate_presence_of_name_at_model_level
--------------------------------------------------------------------
  [1m[36mTRANSACTION (5.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------
RestaurantsControllerTest: test_should_get_index
------------------------------------------------
Started GET "/restaurants/index" for 127.0.0.1 at 2023-05-12 12:15:41 -0400
Processing by RestaurantsController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering restaurants/index.html.erb within layouts/application
  Rendered restaurants/index.html.erb within layouts/application (Duration: 1.3ms | Allocations: 290)
  Rendered layout layouts/application.html.erb (Duration: 5.5ms | Allocations: 2133)
Completed 500 Internal Server Error in 19ms (ActiveRecord: 0.0ms | Allocations: 5152)
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------
ItemsControllerTest: test_should_get_index
------------------------------------------
Started GET "/items/index" for 127.0.0.1 at 2023-05-12 12:15:41 -0400
Processing by ItemsController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering items/index.html.erb within layouts/application
  Rendered items/index.html.erb within layouts/application (Duration: 0.6ms | Allocations: 103)
  Rendered layout layouts/application.html.erb (Duration: 3.2ms | Allocations: 1040)
Completed 500 Internal Server Error in 9ms (ActiveRecord: 0.0ms | Allocations: 1659)
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------
ItemTest: test_should_validate_presence_of_price_at_db_level
------------------------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------
ItemTest: test_should_load_fixtures_correctly
---------------------------------------------
  [1m[36mItem Load (0.4ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."name" = $1 LIMIT $2[0m  [["name", "Hamburguesa"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------
ItemTest: test_should_validate_presence_of_price_at_model_level
---------------------------------------------------------------
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------
ItemTest: test_item_belongs_to_a_dish
-------------------------------------
  [1m[36mItem Load (0.5ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."name" = $1 LIMIT $2[0m  [["name", "Hamburguesa"], ["LIMIT", 1]]
  [1m[36mDish Load (13.5ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."id" = $1 LIMIT $2[0m  [["id", 509217612], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------
ItemTest: test_should_validate_presence_of_name_at_model_level
--------------------------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------
ItemTest: test_item_belongs_to_a_restaurant
-------------------------------------------
  [1m[36mItem Load (0.4ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."name" = $1 LIMIT $2[0m  [["name", "Hamburguesa"], ["LIMIT", 1]]
  [1m[36mRestaurant Load (0.4ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 648827877], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------
ItemTest: test_should_validate_presence_of_callories_at_db_level
----------------------------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------
ItemTest: test_should_validate_presence_of_callories_at_model_level
-------------------------------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------
ItemTest: test_should_validate_presence_of_name_at_db_level
-----------------------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------
DishTest: test_should_validate_presence_of_name_at_db_level
-----------------------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------
DishTest: test_should_validate_presence_of_name_at_model_level
--------------------------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------
DishTest: test_should_have_many_items
-------------------------------------
  [1m[36mDish Load (0.4ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."name" = $1 LIMIT $2[0m  [["name", "Dessert"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------
DishTest: test_should_load_fixtures_correctly
---------------------------------------------
  [1m[36mDish Load (0.4ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."name" = $1 LIMIT $2[0m  [["name", "Dessert"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------
DishesControllerTest: test_should_get_index
-------------------------------------------
Started GET "/dishes/index" for 127.0.0.1 at 2023-05-12 12:15:41 -0400
Processing by DishesController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering dishes/index.html.erb within layouts/application
  Rendered dishes/index.html.erb within layouts/application (Duration: 0.6ms | Allocations: 106)
  Rendered layout layouts/application.html.erb (Duration: 2.4ms | Allocations: 1068)
Completed 500 Internal Server Error in 27ms (ActiveRecord: 0.0ms | Allocations: 1637)
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------
RoutesTest: test_should_route_to_items_index
--------------------------------------------
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------
RoutesTest: test_should_route_to_dishes_index
---------------------------------------------
  [1m[36mTRANSACTION (1.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------
RoutesTest: test_should_route_to_dishes_show
--------------------------------------------
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------
RoutesTest: test_should_route_to_items_show
-------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------
RoutesTest: test_should_route_to_restaurants_index
--------------------------------------------------
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------
RoutesTest: test_should_route_to_restaurants_show
-------------------------------------------------
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (0.5ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "schema_sha1"], ["LIMIT", 1]]
  [1m[36mActiveRecord::SchemaMigration Pluck (1.9ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "dishes" DISABLE TRIGGER ALL;ALTER TABLE "items" DISABLE TRIGGER ALL;ALTER TABLE "restaurants" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (1.7ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.3ms)[0m  [1m[31mDELETE FROM "dishes";
DELETE FROM "items";
DELETE FROM "restaurants";
INSERT INTO "dishes" ("id", "name", "created_at", "updated_at") VALUES (122903280, 'Appetizer', '2023-05-12 16:18:32.127316', '2023-05-12 16:18:32.127316'), (509217612, 'Main Course', '2023-05-12 16:18:32.127316', '2023-05-12 16:18:32.127316'), (693976031, 'Dessert', '2023-05-12 16:18:32.127316', '2023-05-12 16:18:32.127316');
INSERT INTO "items" ("id", "name", "price", "callories", "created_at", "updated_at", "restaurant_id", "dish_id") VALUES (920592244, 'Pan', 1000, 150, '2023-05-12 16:18:32.140725', '2023-05-12 16:18:32.140725', 648827877, 122903280), (802574032, 'Hamburguesa', 1500, 200, '2023-05-12 16:18:32.140725', '2023-05-12 16:18:32.140725', 648827877, 509217612), (416382555, 'Papa Frita', 1000, 300, '2023-05-12 16:18:32.140725', '2023-05-12 16:18:32.140725', 648827877, 693976031), (112585724, 'Lechuga', 200, 20, '2023-05-12 16:18:32.140725', '2023-05-12 16:18:32.140725', 1067778657, 122903280), (833805165, 'Tomate', 100, 50, '2023-05-12 16:18:32.140725', '2023-05-12 16:18:32.140725', 1067778657, 509217612), (683379417, 'Queso', 300, 200, '2023-05-12 16:18:32.140725', '2023-05-12 16:18:32.140725', 1067778657, 693976031), (532462148, 'Cebolla', 1000, 100, '2023-05-12 16:18:32.140725', '2023-05-12 16:18:32.140725', 144847564, 122903280), (251897809, 'Frutilla', 1000, 200, '2023-05-12 16:18:32.140725', '2023-05-12 16:18:32.140725', 144847564, 509217612), (939824966, 'Helado', 1000, 200, '2023-05-12 16:18:32.140725', '2023-05-12 16:18:32.140725', 144847564, 693976031);
INSERT INTO "restaurants" ("id", "name", "address", "created_at", "updated_at") VALUES (648827877, 'Nestizo', 'Viacura 4000', '2023-05-12 16:18:32.156491', '2023-05-12 16:18:32.156491'), (1067778657, 'NcDonalds', 'El Salto s/n', '2023-05-12 16:18:32.156491', '2023-05-12 16:18:32.156491'), (144847564, 'Huendis', 'Vitacura 2800', '2023-05-12 16:18:32.156491', '2023-05-12 16:18:32.156491')[0m
  [1m[36mTRANSACTION (6.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "dishes" ENABLE TRIGGER ALL;ALTER TABLE "items" ENABLE TRIGGER ALL;ALTER TABLE "restaurants" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (3.9ms)[0m  [1m[35mdo $$
  declare r record;
BEGIN
FOR r IN (
  SELECT FORMAT(
    'UPDATE pg_constraint SET convalidated=false WHERE conname = ''%I'' AND connamespace::regnamespace = ''%I''::regnamespace; ALTER TABLE %I.%I VALIDATE CONSTRAINT %I;',
    constraint_name,
    table_schema,
    table_schema,
    table_name,
    constraint_name
  ) AS constraint_check
  FROM information_schema.table_constraints WHERE constraint_type = 'FOREIGN KEY'
)
  LOOP
    EXECUTE (r.constraint_check);
  END LOOP;
END;
$$;
[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------
RoutesTest: test_should_route_to_restaurants_show
-------------------------------------------------
  [1m[36mTRANSACTION (1.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------
RoutesTest: test_should_route_to_dishes_index
---------------------------------------------
  [1m[36mTRANSACTION (5.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------
RoutesTest: test_should_route_to_restaurants_index
--------------------------------------------------
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------
RoutesTest: test_should_route_to_items_show
-------------------------------------------
  [1m[36mTRANSACTION (4.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (2.0ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------
RoutesTest: test_should_route_to_dishes_show
--------------------------------------------
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------
RoutesTest: test_should_route_to_items_index
--------------------------------------------
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
------------------------------------------
ItemsControllerTest: test_should_get_index
------------------------------------------
Started GET "/items/index" for 127.0.0.1 at 2023-05-12 12:18:32 -0400
Processing by ItemsController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering items/index.html.erb within layouts/application
  Rendered items/index.html.erb within layouts/application (Duration: 1.2ms | Allocations: 290)
  Rendered layout layouts/application.html.erb (Duration: 5.8ms | Allocations: 2133)
Completed 500 Internal Server Error in 18ms (ActiveRecord: 0.0ms | Allocations: 5200)
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------
RestaurantsControllerTest: test_should_get_index
------------------------------------------------
Started GET "/restaurants/index" for 127.0.0.1 at 2023-05-12 12:18:32 -0400
Processing by RestaurantsController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering restaurants/index.html.erb within layouts/application
  Rendered restaurants/index.html.erb within layouts/application (Duration: 2.4ms | Allocations: 103)
  Rendered layout layouts/application.html.erb (Duration: 4.7ms | Allocations: 1040)
Completed 500 Internal Server Error in 7ms (ActiveRecord: 0.0ms | Allocations: 1659)
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
-------------------------------------
DishTest: test_should_have_many_items
-------------------------------------
  [1m[36mDish Load (0.6ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."name" = $1 LIMIT $2[0m  [["name", "Dessert"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (6.0ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------
DishTest: test_should_validate_presence_of_name_at_model_level
--------------------------------------------------------------
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------
DishTest: test_should_load_fixtures_correctly
---------------------------------------------
  [1m[36mDish Load (6.6ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."name" = $1 LIMIT $2[0m  [["name", "Dessert"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------
DishTest: test_should_validate_presence_of_name_at_db_level
-----------------------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------
RestaurantTest: test_should_validate_presence_of_name_at_model_level
--------------------------------------------------------------------
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------
RestaurantTest: test_should_have_many_items
-------------------------------------------
  [1m[36mRestaurant Load (0.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."name" = $1 LIMIT $2[0m  [["name", "NcDonalds"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------
RestaurantTest: test_should_validate_presence_of_name_at_db_level
-----------------------------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------------
RestaurantTest: test_should_validate_presence_of_address_at_model_level
-----------------------------------------------------------------------
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------
RestaurantTest: test_should_load_fixtures_correctly
---------------------------------------------------
  [1m[36mRestaurant Load (0.5ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."name" = $1 LIMIT $2[0m  [["name", "NcDonalds"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------
RestaurantTest: test_should_validate_presence_of_address_at_db_level
--------------------------------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------
ItemTest: test_should_validate_presence_of_callories_at_model_level
-------------------------------------------------------------------
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------
ItemTest: test_should_validate_presence_of_name_at_db_level
-----------------------------------------------------------
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------
ItemTest: test_should_validate_presence_of_callories_at_db_level
----------------------------------------------------------------
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------
ItemTest: test_should_validate_presence_of_name_at_model_level
--------------------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------
ItemTest: test_item_belongs_to_a_dish
-------------------------------------
  [1m[36mItem Load (0.3ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."name" = $1 LIMIT $2[0m  [["name", "Hamburguesa"], ["LIMIT", 1]]
  [1m[36mDish Load (0.3ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."id" = $1 LIMIT $2[0m  [["id", 509217612], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------
ItemTest: test_should_validate_presence_of_price_at_model_level
---------------------------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------
ItemTest: test_should_validate_presence_of_price_at_db_level
------------------------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------
ItemTest: test_item_belongs_to_a_restaurant
-------------------------------------------
  [1m[36mItem Load (0.4ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."name" = $1 LIMIT $2[0m  [["name", "Hamburguesa"], ["LIMIT", 1]]
  [1m[36mRestaurant Load (0.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 648827877], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------
ItemTest: test_should_load_fixtures_correctly
---------------------------------------------
  [1m[36mItem Load (0.4ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."name" = $1 LIMIT $2[0m  [["name", "Hamburguesa"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------
DishesControllerTest: test_should_get_index
-------------------------------------------
Started GET "/dishes/index" for 127.0.0.1 at 2023-05-12 12:18:32 -0400
Processing by DishesController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering dishes/index.html.erb within layouts/application
  Rendered dishes/index.html.erb within layouts/application (Duration: 0.6ms | Allocations: 106)
  Rendered layout layouts/application.html.erb (Duration: 2.6ms | Allocations: 1068)
Completed 500 Internal Server Error in 6ms (ActiveRecord: 0.0ms | Allocations: 1638)
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (1.3ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "schema_sha1"], ["LIMIT", 1]]
  [1m[36mActiveRecord::SchemaMigration Pluck (2.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.1ms)[0m  [1m[35mALTER TABLE "dishes" DISABLE TRIGGER ALL;ALTER TABLE "items" DISABLE TRIGGER ALL;ALTER TABLE "restaurants" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (5.8ms)[0m  [1m[31mDELETE FROM "dishes";
DELETE FROM "items";
DELETE FROM "restaurants";
INSERT INTO "dishes" ("id", "name", "created_at", "updated_at") VALUES (122903280, 'Appetizer', '2023-05-12 23:52:12.030097', '2023-05-12 23:52:12.030097'), (509217612, 'Main Course', '2023-05-12 23:52:12.030097', '2023-05-12 23:52:12.030097'), (693976031, 'Dessert', '2023-05-12 23:52:12.030097', '2023-05-12 23:52:12.030097');
INSERT INTO "items" ("id", "name", "price", "callories", "created_at", "updated_at", "restaurant_id", "dish_id") VALUES (920592244, 'Pan', 1000, 150, '2023-05-12 23:52:12.061623', '2023-05-12 23:52:12.061623', 648827877, 122903280), (802574032, 'Hamburguesa', 1500, 200, '2023-05-12 23:52:12.061623', '2023-05-12 23:52:12.061623', 648827877, 509217612), (416382555, 'Papa Frita', 1000, 300, '2023-05-12 23:52:12.061623', '2023-05-12 23:52:12.061623', 648827877, 693976031), (112585724, 'Lechuga', 200, 20, '2023-05-12 23:52:12.061623', '2023-05-12 23:52:12.061623', 1067778657, 122903280), (833805165, 'Tomate', 100, 50, '2023-05-12 23:52:12.061623', '2023-05-12 23:52:12.061623', 1067778657, 509217612), (683379417, 'Queso', 300, 200, '2023-05-12 23:52:12.061623', '2023-05-12 23:52:12.061623', 1067778657, 693976031), (532462148, 'Cebolla', 1000, 100, '2023-05-12 23:52:12.061623', '2023-05-12 23:52:12.061623', 144847564, 122903280), (251897809, 'Frutilla', 1000, 200, '2023-05-12 23:52:12.061623', '2023-05-12 23:52:12.061623', 144847564, 509217612), (939824966, 'Helado', 1000, 200, '2023-05-12 23:52:12.061623', '2023-05-12 23:52:12.061623', 144847564, 693976031);
INSERT INTO "restaurants" ("id", "name", "address", "created_at", "updated_at") VALUES (648827877, 'Nestizo', 'Viacura 4000', '2023-05-12 23:52:12.068278', '2023-05-12 23:52:12.068278'), (1067778657, 'NcDonalds', 'El Salto s/n', '2023-05-12 23:52:12.068278', '2023-05-12 23:52:12.068278'), (144847564, 'Huendis', 'Vitacura 2800', '2023-05-12 23:52:12.068278', '2023-05-12 23:52:12.068278')[0m
  [1m[36mTRANSACTION (1.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "dishes" ENABLE TRIGGER ALL;ALTER TABLE "items" ENABLE TRIGGER ALL;ALTER TABLE "restaurants" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (15.8ms)[0m  [1m[35mdo $$
  declare r record;
BEGIN
FOR r IN (
  SELECT FORMAT(
    'UPDATE pg_constraint SET convalidated=false WHERE conname = ''%I'' AND connamespace::regnamespace = ''%I''::regnamespace; ALTER TABLE %I.%I VALIDATE CONSTRAINT %I;',
    constraint_name,
    table_schema,
    table_schema,
    table_name,
    constraint_name
  ) AS constraint_check
  FROM information_schema.table_constraints WHERE constraint_type = 'FOREIGN KEY'
)
  LOOP
    EXECUTE (r.constraint_check);
  END LOOP;
END;
$$;
[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------
RestaurantTest: test_should_validate_presence_of_name_at_model_level
--------------------------------------------------------------------
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------
RestaurantTest: test_should_have_many_items
-------------------------------------------
  [1m[36mRestaurant Load (0.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."name" = $1 LIMIT $2[0m  [["name", "NcDonalds"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------
RestaurantTest: test_should_validate_presence_of_name_at_db_level
-----------------------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------
RestaurantTest: test_should_validate_presence_of_address_at_db_level
--------------------------------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------------
RestaurantTest: test_should_validate_presence_of_address_at_model_level
-----------------------------------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------
RestaurantTest: test_should_load_fixtures_correctly
---------------------------------------------------
  [1m[36mRestaurant Load (0.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."name" = $1 LIMIT $2[0m  [["name", "NcDonalds"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------
RoutesTest: test_should_route_to_restaurants_show
-------------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------
RoutesTest: test_should_route_to_dishes_index
---------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------
RoutesTest: test_should_route_to_restaurants_index
--------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------
RoutesTest: test_should_route_to_items_index
--------------------------------------------
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------
RoutesTest: test_should_route_to_items_show
-------------------------------------------
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------
RoutesTest: test_should_route_to_dishes_show
--------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------
DishesControllerTest: test_should_get_index
-------------------------------------------
Started GET "/dishes/index" for 127.0.0.1 at 2023-05-12 19:52:12 -0400
Processing by DishesController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering dishes/index.html.erb within layouts/application
  Rendered dishes/index.html.erb within layouts/application (Duration: 1.2ms | Allocations: 290)
  Rendered layout layouts/application.html.erb (Duration: 13.3ms | Allocations: 2133)
Completed 500 Internal Server Error in 28ms (ActiveRecord: 0.0ms | Allocations: 5192)
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------
ItemTest: test_should_validate_presence_of_price_at_db_level
------------------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------
ItemTest: test_should_validate_presence_of_callories_at_model_level
-------------------------------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------
ItemTest: test_should_validate_presence_of_price_at_model_level
---------------------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------
ItemTest: test_should_validate_presence_of_name_at_db_level
-----------------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------
ItemTest: test_item_belongs_to_a_dish
-------------------------------------
  [1m[36mItem Load (0.2ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."name" = $1 LIMIT $2[0m  [["name", "Hamburguesa"], ["LIMIT", 1]]
  [1m[36mDish Load (0.8ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."id" = $1 LIMIT $2[0m  [["id", 509217612], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------
ItemTest: test_should_load_fixtures_correctly
---------------------------------------------
  [1m[36mItem Load (0.4ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."name" = $1 LIMIT $2[0m  [["name", "Hamburguesa"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------
ItemTest: test_should_validate_presence_of_name_at_model_level
--------------------------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------
ItemTest: test_should_validate_presence_of_callories_at_db_level
----------------------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------
ItemTest: test_item_belongs_to_a_restaurant
-------------------------------------------
  [1m[36mItem Load (0.4ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."name" = $1 LIMIT $2[0m  [["name", "Hamburguesa"], ["LIMIT", 1]]
  [1m[36mRestaurant Load (0.5ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 648827877], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------
RestaurantsControllerTest: test_should_get_index
------------------------------------------------
Started GET "/restaurants/index" for 127.0.0.1 at 2023-05-12 19:52:12 -0400
Processing by RestaurantsController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering restaurants/index.html.erb within layouts/application
  Rendered restaurants/index.html.erb within layouts/application (Duration: 0.8ms | Allocations: 106)
  Rendered layout layouts/application.html.erb (Duration: 1.9ms | Allocations: 1068)
Completed 500 Internal Server Error in 5ms (ActiveRecord: 0.0ms | Allocations: 1644)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------
DishTest: test_should_have_many_items
-------------------------------------
  [1m[36mDish Load (0.2ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."name" = $1 LIMIT $2[0m  [["name", "Dessert"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------
DishTest: test_should_validate_presence_of_name_at_model_level
--------------------------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------
DishTest: test_should_validate_presence_of_name_at_db_level
-----------------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------
DishTest: test_should_load_fixtures_correctly
---------------------------------------------
  [1m[36mDish Load (0.2ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."name" = $1 LIMIT $2[0m  [["name", "Dessert"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------
ItemsControllerTest: test_should_get_index
------------------------------------------
Started GET "/items/index" for 127.0.0.1 at 2023-05-12 19:52:12 -0400
Processing by ItemsController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering items/index.html.erb within layouts/application
  Rendered items/index.html.erb within layouts/application (Duration: 1.0ms | Allocations: 103)
  Rendered layout layouts/application.html.erb (Duration: 3.1ms | Allocations: 1040)
Completed 500 Internal Server Error in 7ms (ActiveRecord: 0.0ms | Allocations: 1609)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (0.4ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "schema_sha1"], ["LIMIT", 1]]
  [1m[36mActiveRecord::SchemaMigration Pluck (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "dishes" DISABLE TRIGGER ALL;ALTER TABLE "items" DISABLE TRIGGER ALL;ALTER TABLE "restaurants" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.9ms)[0m  [1m[31mDELETE FROM "dishes";
DELETE FROM "items";
DELETE FROM "restaurants";
INSERT INTO "dishes" ("id", "name", "created_at", "updated_at") VALUES (122903280, 'Appetizer', '2023-05-13 00:05:04.257051', '2023-05-13 00:05:04.257051'), (509217612, 'Main Course', '2023-05-13 00:05:04.257051', '2023-05-13 00:05:04.257051'), (693976031, 'Dessert', '2023-05-13 00:05:04.257051', '2023-05-13 00:05:04.257051');
INSERT INTO "items" ("id", "name", "price", "callories", "created_at", "updated_at", "restaurant_id", "dish_id") VALUES (920592244, 'Pan', 1000, 150, '2023-05-13 00:05:04.261922', '2023-05-13 00:05:04.261922', 648827877, 122903280), (802574032, 'Hamburguesa', 1500, 200, '2023-05-13 00:05:04.261922', '2023-05-13 00:05:04.261922', 648827877, 509217612), (416382555, 'Papa Frita', 1000, 300, '2023-05-13 00:05:04.261922', '2023-05-13 00:05:04.261922', 648827877, 693976031), (112585724, 'Lechuga', 200, 20, '2023-05-13 00:05:04.261922', '2023-05-13 00:05:04.261922', 1067778657, 122903280), (833805165, 'Tomate', 100, 50, '2023-05-13 00:05:04.261922', '2023-05-13 00:05:04.261922', 1067778657, 509217612), (683379417, 'Queso', 300, 200, '2023-05-13 00:05:04.261922', '2023-05-13 00:05:04.261922', 1067778657, 693976031), (532462148, 'Cebolla', 1000, 100, '2023-05-13 00:05:04.261922', '2023-05-13 00:05:04.261922', 144847564, 122903280), (251897809, 'Frutilla', 1000, 200, '2023-05-13 00:05:04.261922', '2023-05-13 00:05:04.261922', 144847564, 509217612), (939824966, 'Helado', 1000, 200, '2023-05-13 00:05:04.261922', '2023-05-13 00:05:04.261922', 144847564, 693976031);
INSERT INTO "restaurants" ("id", "name", "address", "created_at", "updated_at") VALUES (648827877, 'Nestizo', 'Viacura 4000', '2023-05-13 00:05:04.268314', '2023-05-13 00:05:04.268314'), (1067778657, 'NcDonalds', 'El Salto s/n', '2023-05-13 00:05:04.268314', '2023-05-13 00:05:04.268314'), (144847564, 'Huendis', 'Vitacura 2800', '2023-05-13 00:05:04.268314', '2023-05-13 00:05:04.268314')[0m
  [1m[36mTRANSACTION (8.0ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "dishes" ENABLE TRIGGER ALL;ALTER TABLE "items" ENABLE TRIGGER ALL;ALTER TABLE "restaurants" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (2.3ms)[0m  [1m[35mdo $$
  declare r record;
BEGIN
FOR r IN (
  SELECT FORMAT(
    'UPDATE pg_constraint SET convalidated=false WHERE conname = ''%I'' AND connamespace::regnamespace = ''%I''::regnamespace; ALTER TABLE %I.%I VALIDATE CONSTRAINT %I;',
    constraint_name,
    table_schema,
    table_schema,
    table_name,
    constraint_name
  ) AS constraint_check
  FROM information_schema.table_constraints WHERE constraint_type = 'FOREIGN KEY'
)
  LOOP
    EXECUTE (r.constraint_check);
  END LOOP;
END;
$$;
[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------
RoutesTest: test_should_route_to_dishes_index
---------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------
RoutesTest: test_should_route_to_dishes_show
--------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------
RoutesTest: test_should_route_to_items_index
--------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------
RoutesTest: test_should_route_to_restaurants_index
--------------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------
RoutesTest: test_should_route_to_items_show
-------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------
RoutesTest: test_should_route_to_restaurants_show
-------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------
ItemsControllerTest: test_should_get_index
------------------------------------------
Started GET "/items/index" for 127.0.0.1 at 2023-05-12 20:05:04 -0400
Processing by ItemsController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering items/index.html.erb within layouts/application
  Rendered items/index.html.erb within layouts/application (Duration: 0.6ms | Allocations: 290)
  Rendered layout layouts/application.html.erb (Duration: 3.0ms | Allocations: 2133)
Completed 500 Internal Server Error in 10ms (ActiveRecord: 0.0ms | Allocations: 5200)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------
DishesControllerTest: test_should_get_index
-------------------------------------------
Started GET "/dishes/index" for 127.0.0.1 at 2023-05-12 20:05:04 -0400
Processing by DishesController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering dishes/index.html.erb within layouts/application
  Rendered dishes/index.html.erb within layouts/application (Duration: 0.3ms | Allocations: 103)
  Rendered layout layouts/application.html.erb (Duration: 1.3ms | Allocations: 1040)
Completed 500 Internal Server Error in 3ms (ActiveRecord: 0.0ms | Allocations: 1654)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------
RestaurantsControllerTest: test_should_get_index
------------------------------------------------
Started GET "/restaurants/index" for 127.0.0.1 at 2023-05-12 20:05:04 -0400
Processing by RestaurantsController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering restaurants/index.html.erb within layouts/application
  Rendered restaurants/index.html.erb within layouts/application (Duration: 0.3ms | Allocations: 103)
  Rendered layout layouts/application.html.erb (Duration: 1.4ms | Allocations: 1040)
Completed 500 Internal Server Error in 3ms (ActiveRecord: 0.0ms | Allocations: 1658)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------
ItemTest: test_item_belongs_to_a_restaurant
-------------------------------------------
  [1m[36mItem Load (0.2ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."name" = $1 LIMIT $2[0m  [["name", "Hamburguesa"], ["LIMIT", 1]]
  [1m[36mRestaurant Load (0.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 648827877], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------
ItemTest: test_should_validate_presence_of_callories_at_model_level
-------------------------------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------
ItemTest: test_should_validate_presence_of_price_at_model_level
---------------------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------
ItemTest: test_should_validate_presence_of_name_at_db_level
-----------------------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------
ItemTest: test_should_validate_presence_of_price_at_db_level
------------------------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------
ItemTest: test_should_validate_presence_of_name_at_model_level
--------------------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------
ItemTest: test_item_belongs_to_a_dish
-------------------------------------
  [1m[36mItem Load (0.3ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."name" = $1 LIMIT $2[0m  [["name", "Hamburguesa"], ["LIMIT", 1]]
  [1m[36mDish Load (0.2ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."id" = $1 LIMIT $2[0m  [["id", 509217612], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------
ItemTest: test_should_load_fixtures_correctly
---------------------------------------------
  [1m[36mItem Load (0.2ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."name" = $1 LIMIT $2[0m  [["name", "Hamburguesa"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------
ItemTest: test_should_validate_presence_of_callories_at_db_level
----------------------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------
DishTest: test_should_have_many_items
-------------------------------------
  [1m[36mDish Load (0.2ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."name" = $1 LIMIT $2[0m  [["name", "Dessert"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------
DishTest: test_should_validate_presence_of_name_at_db_level
-----------------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------
DishTest: test_should_load_fixtures_correctly
---------------------------------------------
  [1m[36mDish Load (0.2ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."name" = $1 LIMIT $2[0m  [["name", "Dessert"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------
DishTest: test_should_validate_presence_of_name_at_model_level
--------------------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------
RestaurantTest: test_should_have_many_items
-------------------------------------------
  [1m[36mRestaurant Load (0.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."name" = $1 LIMIT $2[0m  [["name", "NcDonalds"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------
RestaurantTest: test_should_load_fixtures_correctly
---------------------------------------------------
  [1m[36mRestaurant Load (0.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."name" = $1 LIMIT $2[0m  [["name", "NcDonalds"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------
RestaurantTest: test_should_validate_presence_of_address_at_db_level
--------------------------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------
RestaurantTest: test_should_validate_presence_of_name_at_db_level
-----------------------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------------
RestaurantTest: test_should_validate_presence_of_address_at_model_level
-----------------------------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------
RestaurantTest: test_should_validate_presence_of_name_at_model_level
--------------------------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (0.4ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "schema_sha1"], ["LIMIT", 1]]
  [1m[36mActiveRecord::SchemaMigration Pluck (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "dishes" DISABLE TRIGGER ALL;ALTER TABLE "items" DISABLE TRIGGER ALL;ALTER TABLE "restaurants" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.9ms)[0m  [1m[31mDELETE FROM "dishes";
DELETE FROM "items";
DELETE FROM "restaurants";
INSERT INTO "dishes" ("id", "name", "created_at", "updated_at") VALUES (122903280, 'Appetizer', '2023-05-13 00:08:45.786096', '2023-05-13 00:08:45.786096'), (509217612, 'Main Course', '2023-05-13 00:08:45.786096', '2023-05-13 00:08:45.786096'), (693976031, 'Dessert', '2023-05-13 00:08:45.786096', '2023-05-13 00:08:45.786096');
INSERT INTO "items" ("id", "name", "price", "callories", "created_at", "updated_at", "restaurant_id", "dish_id") VALUES (920592244, 'Pan', 1000, 150, '2023-05-13 00:08:45.790920', '2023-05-13 00:08:45.790920', 648827877, 122903280), (802574032, 'Hamburguesa', 1500, 200, '2023-05-13 00:08:45.790920', '2023-05-13 00:08:45.790920', 648827877, 509217612), (416382555, 'Papa Frita', 1000, 300, '2023-05-13 00:08:45.790920', '2023-05-13 00:08:45.790920', 648827877, 693976031), (112585724, 'Lechuga', 200, 20, '2023-05-13 00:08:45.790920', '2023-05-13 00:08:45.790920', 1067778657, 122903280), (833805165, 'Tomate', 100, 50, '2023-05-13 00:08:45.790920', '2023-05-13 00:08:45.790920', 1067778657, 509217612), (683379417, 'Queso', 300, 200, '2023-05-13 00:08:45.790920', '2023-05-13 00:08:45.790920', 1067778657, 693976031), (532462148, 'Cebolla', 1000, 100, '2023-05-13 00:08:45.790920', '2023-05-13 00:08:45.790920', 144847564, 122903280), (251897809, 'Frutilla', 1000, 200, '2023-05-13 00:08:45.790920', '2023-05-13 00:08:45.790920', 144847564, 509217612), (939824966, 'Helado', 1000, 200, '2023-05-13 00:08:45.790920', '2023-05-13 00:08:45.790920', 144847564, 693976031);
INSERT INTO "restaurants" ("id", "name", "address", "created_at", "updated_at") VALUES (648827877, 'Nestizo', 'Viacura 4000', '2023-05-13 00:08:45.796777', '2023-05-13 00:08:45.796777'), (1067778657, 'NcDonalds', 'El Salto s/n', '2023-05-13 00:08:45.796777', '2023-05-13 00:08:45.796777'), (144847564, 'Huendis', 'Vitacura 2800', '2023-05-13 00:08:45.796777', '2023-05-13 00:08:45.796777')[0m
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "dishes" ENABLE TRIGGER ALL;ALTER TABLE "items" ENABLE TRIGGER ALL;ALTER TABLE "restaurants" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (2.3ms)[0m  [1m[35mdo $$
  declare r record;
BEGIN
FOR r IN (
  SELECT FORMAT(
    'UPDATE pg_constraint SET convalidated=false WHERE conname = ''%I'' AND connamespace::regnamespace = ''%I''::regnamespace; ALTER TABLE %I.%I VALIDATE CONSTRAINT %I;',
    constraint_name,
    table_schema,
    table_schema,
    table_name,
    constraint_name
  ) AS constraint_check
  FROM information_schema.table_constraints WHERE constraint_type = 'FOREIGN KEY'
)
  LOOP
    EXECUTE (r.constraint_check);
  END LOOP;
END;
$$;
[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------
RoutesTest: test_should_route_to_restaurants_index
--------------------------------------------------
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------
RoutesTest: test_should_route_to_items_index
--------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------
RoutesTest: test_should_route_to_items_show
-------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------
RoutesTest: test_should_route_to_restaurants_show
-------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------
RoutesTest: test_should_route_to_dishes_show
--------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------
RoutesTest: test_should_route_to_dishes_index
---------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------
ItemTest: test_should_validate_presence_of_price_at_db_level
------------------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------
ItemTest: test_should_validate_presence_of_callories_at_db_level
----------------------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------
ItemTest: test_should_validate_presence_of_callories_at_model_level
-------------------------------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------
ItemTest: test_should_validate_presence_of_name_at_db_level
-----------------------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------
ItemTest: test_should_load_fixtures_correctly
---------------------------------------------
  [1m[36mItem Load (0.2ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."name" = $1 LIMIT $2[0m  [["name", "Hamburguesa"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------
ItemTest: test_should_validate_presence_of_name_at_model_level
--------------------------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------
ItemTest: test_should_validate_presence_of_price_at_model_level
---------------------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------
ItemTest: test_item_belongs_to_a_restaurant
-------------------------------------------
  [1m[36mItem Load (0.2ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."name" = $1 LIMIT $2[0m  [["name", "Hamburguesa"], ["LIMIT", 1]]
  [1m[36mRestaurant Load (0.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 648827877], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------
ItemTest: test_item_belongs_to_a_dish
-------------------------------------
  [1m[36mItem Load (0.3ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."name" = $1 LIMIT $2[0m  [["name", "Hamburguesa"], ["LIMIT", 1]]
  [1m[36mDish Load (0.2ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."id" = $1 LIMIT $2[0m  [["id", 509217612], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------
RestaurantsControllerTest: test_should_get_index
------------------------------------------------
Started GET "/restaurants/index" for 127.0.0.1 at 2023-05-12 20:08:45 -0400
Processing by RestaurantsController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering restaurants/index.html.erb within layouts/application
  Rendered restaurants/index.html.erb within layouts/application (Duration: 0.7ms | Allocations: 290)
  Rendered layout layouts/application.html.erb (Duration: 3.4ms | Allocations: 2173)
Completed 500 Internal Server Error in 11ms (ActiveRecord: 0.0ms | Allocations: 5189)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------
ItemsControllerTest: test_should_get_index
------------------------------------------
Started GET "/items/index" for 127.0.0.1 at 2023-05-12 20:08:46 -0400
Processing by ItemsController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering items/index.html.erb within layouts/application
  Rendered items/index.html.erb within layouts/application (Duration: 0.3ms | Allocations: 103)
  Rendered layout layouts/application.html.erb (Duration: 1.5ms | Allocations: 1040)
Completed 500 Internal Server Error in 3ms (ActiveRecord: 0.0ms | Allocations: 1610)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------
DishTest: test_should_validate_presence_of_name_at_db_level
-----------------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------
DishTest: test_should_validate_presence_of_name_at_model_level
--------------------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------
DishTest: test_should_load_fixtures_correctly
---------------------------------------------
  [1m[36mDish Load (0.2ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."name" = $1 LIMIT $2[0m  [["name", "Dessert"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------
DishTest: test_should_have_many_items
-------------------------------------
  [1m[36mDish Load (0.2ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."name" = $1 LIMIT $2[0m  [["name", "Dessert"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------
RestaurantTest: test_should_validate_presence_of_name_at_db_level
-----------------------------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------
RestaurantTest: test_should_validate_presence_of_address_at_db_level
--------------------------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------------
RestaurantTest: test_should_validate_presence_of_address_at_model_level
-----------------------------------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------
RestaurantTest: test_should_validate_presence_of_name_at_model_level
--------------------------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------
RestaurantTest: test_should_load_fixtures_correctly
---------------------------------------------------
  [1m[36mRestaurant Load (0.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."name" = $1 LIMIT $2[0m  [["name", "NcDonalds"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------
RestaurantTest: test_should_have_many_items
-------------------------------------------
  [1m[36mRestaurant Load (0.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."name" = $1 LIMIT $2[0m  [["name", "NcDonalds"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------
DishesControllerTest: test_should_get_index
-------------------------------------------
Started GET "/dishes/index" for 127.0.0.1 at 2023-05-12 20:08:46 -0400
Processing by DishesController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering dishes/index.html.erb within layouts/application
  Rendered dishes/index.html.erb within layouts/application (Duration: 0.8ms | Allocations: 106)
  Rendered layout layouts/application.html.erb (Duration: 1.9ms | Allocations: 1068)
Completed 500 Internal Server Error in 4ms (ActiveRecord: 0.0ms | Allocations: 1638)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (0.4ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "schema_sha1"], ["LIMIT", 1]]
  [1m[36mActiveRecord::SchemaMigration Pluck (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "dishes" DISABLE TRIGGER ALL;ALTER TABLE "items" DISABLE TRIGGER ALL;ALTER TABLE "restaurants" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.9ms)[0m  [1m[31mDELETE FROM "dishes";
DELETE FROM "items";
DELETE FROM "restaurants";
INSERT INTO "dishes" ("id", "name", "created_at", "updated_at") VALUES (122903280, 'Appetizer', '2023-05-13 00:27:40.294683', '2023-05-13 00:27:40.294683'), (509217612, 'Main Course', '2023-05-13 00:27:40.294683', '2023-05-13 00:27:40.294683'), (693976031, 'Dessert', '2023-05-13 00:27:40.294683', '2023-05-13 00:27:40.294683');
INSERT INTO "items" ("id", "name", "price", "callories", "created_at", "updated_at", "restaurant_id", "dish_id") VALUES (920592244, 'Pan', 1000, 150, '2023-05-13 00:27:40.319235', '2023-05-13 00:27:40.319235', 648827877, 122903280), (802574032, 'Hamburguesa', 1500, 200, '2023-05-13 00:27:40.319235', '2023-05-13 00:27:40.319235', 648827877, 509217612), (416382555, 'Papa Frita', 1000, 300, '2023-05-13 00:27:40.319235', '2023-05-13 00:27:40.319235', 648827877, 693976031), (112585724, 'Lechuga', 200, 20, '2023-05-13 00:27:40.319235', '2023-05-13 00:27:40.319235', 1067778657, 122903280), (833805165, 'Tomate', 100, 50, '2023-05-13 00:27:40.319235', '2023-05-13 00:27:40.319235', 1067778657, 509217612), (683379417, 'Queso', 300, 200, '2023-05-13 00:27:40.319235', '2023-05-13 00:27:40.319235', 1067778657, 693976031), (532462148, 'Cebolla', 1000, 100, '2023-05-13 00:27:40.319235', '2023-05-13 00:27:40.319235', 144847564, 122903280), (251897809, 'Frutilla', 1000, 200, '2023-05-13 00:27:40.319235', '2023-05-13 00:27:40.319235', 144847564, 509217612), (939824966, 'Helado', 1000, 200, '2023-05-13 00:27:40.319235', '2023-05-13 00:27:40.319235', 144847564, 693976031);
INSERT INTO "restaurants" ("id", "name", "address", "created_at", "updated_at") VALUES (648827877, 'Nestizo', 'Viacura 4000', '2023-05-13 00:27:40.326797', '2023-05-13 00:27:40.326797'), (1067778657, 'NcDonalds', 'El Salto s/n', '2023-05-13 00:27:40.326797', '2023-05-13 00:27:40.326797'), (144847564, 'Huendis', 'Vitacura 2800', '2023-05-13 00:27:40.326797', '2023-05-13 00:27:40.326797')[0m
  [1m[36mTRANSACTION (5.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "dishes" ENABLE TRIGGER ALL;ALTER TABLE "items" ENABLE TRIGGER ALL;ALTER TABLE "restaurants" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (2.3ms)[0m  [1m[35mdo $$
  declare r record;
BEGIN
FOR r IN (
  SELECT FORMAT(
    'UPDATE pg_constraint SET convalidated=false WHERE conname = ''%I'' AND connamespace::regnamespace = ''%I''::regnamespace; ALTER TABLE %I.%I VALIDATE CONSTRAINT %I;',
    constraint_name,
    table_schema,
    table_schema,
    table_name,
    constraint_name
  ) AS constraint_check
  FROM information_schema.table_constraints WHERE constraint_type = 'FOREIGN KEY'
)
  LOOP
    EXECUTE (r.constraint_check);
  END LOOP;
END;
$$;
[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------
DishTest: test_should_load_fixtures_correctly
---------------------------------------------
  [1m[36mDish Load (0.2ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."name" = $1 LIMIT $2[0m  [["name", "Dessert"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------
DishTest: test_should_validate_presence_of_name_at_db_level
-----------------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------
DishTest: test_should_validate_presence_of_name_at_model_level
--------------------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------
DishTest: test_should_have_many_items
-------------------------------------
  [1m[36mDish Load (0.3ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."name" = $1 LIMIT $2[0m  [["name", "Dessert"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------
ItemTest: test_should_validate_presence_of_price_at_db_level
------------------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------
ItemTest: test_should_validate_presence_of_name_at_model_level
--------------------------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------
ItemTest: test_should_validate_presence_of_name_at_db_level
-----------------------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------
ItemTest: test_should_validate_presence_of_callories_at_db_level
----------------------------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------
ItemTest: test_should_load_fixtures_correctly
---------------------------------------------
  [1m[36mItem Load (0.2ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."name" = $1 LIMIT $2[0m  [["name", "Hamburguesa"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------
ItemTest: test_should_validate_presence_of_price_at_model_level
---------------------------------------------------------------
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------
ItemTest: test_item_belongs_to_a_restaurant
-------------------------------------------
  [1m[36mItem Load (0.3ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."name" = $1 LIMIT $2[0m  [["name", "Hamburguesa"], ["LIMIT", 1]]
  [1m[36mRestaurant Load (0.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 648827877], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------
ItemTest: test_should_validate_presence_of_callories_at_model_level
-------------------------------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------
ItemTest: test_item_belongs_to_a_dish
-------------------------------------
  [1m[36mItem Load (0.5ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."name" = $1 LIMIT $2[0m  [["name", "Hamburguesa"], ["LIMIT", 1]]
  [1m[36mDish Load (0.3ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."id" = $1 LIMIT $2[0m  [["id", 509217612], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------
DishesControllerTest: test_should_get_index
-------------------------------------------
Started GET "/dishes/index" for 127.0.0.1 at 2023-05-12 20:27:40 -0400
Processing by DishesController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering dishes/index.html.erb within layouts/application
  Rendered dishes/index.html.erb within layouts/application (Duration: 0.6ms | Allocations: 290)
  Rendered layout layouts/application.html.erb (Duration: 3.3ms | Allocations: 2173)
Completed 500 Internal Server Error in 9ms (ActiveRecord: 0.0ms | Allocations: 5188)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------
RestaurantsControllerTest: test_should_get_index
------------------------------------------------
Started GET "/restaurants/index" for 127.0.0.1 at 2023-05-12 20:27:40 -0400
Processing by RestaurantsController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering restaurants/index.html.erb within layouts/application
  Rendered restaurants/index.html.erb within layouts/application (Duration: 0.3ms | Allocations: 103)
  Rendered layout layouts/application.html.erb (Duration: 1.4ms | Allocations: 1040)
Completed 500 Internal Server Error in 3ms (ActiveRecord: 0.0ms | Allocations: 1616)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------
ItemsControllerTest: test_should_get_index
------------------------------------------
Started GET "/items/index" for 127.0.0.1 at 2023-05-12 20:27:40 -0400
Processing by ItemsController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering items/index.html.erb within layouts/application
  Rendered items/index.html.erb within layouts/application (Duration: 0.3ms | Allocations: 106)
  Rendered layout layouts/application.html.erb (Duration: 1.4ms | Allocations: 1068)
Completed 500 Internal Server Error in 3ms (ActiveRecord: 0.0ms | Allocations: 1638)
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------
RestaurantTest: test_should_validate_presence_of_address_at_db_level
--------------------------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------
RestaurantTest: test_should_load_fixtures_correctly
---------------------------------------------------
  [1m[36mRestaurant Load (0.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."name" = $1 LIMIT $2[0m  [["name", "NcDonalds"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------------
RestaurantTest: test_should_validate_presence_of_address_at_model_level
-----------------------------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------
RestaurantTest: test_should_have_many_items
-------------------------------------------
  [1m[36mRestaurant Load (0.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."name" = $1 LIMIT $2[0m  [["name", "NcDonalds"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------
RestaurantTest: test_should_validate_presence_of_name_at_model_level
--------------------------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------
RestaurantTest: test_should_validate_presence_of_name_at_db_level
-----------------------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------
RoutesTest: test_should_route_to_items_index
--------------------------------------------
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------
RoutesTest: test_should_route_to_dishes_show
--------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------
RoutesTest: test_should_route_to_items_show
-------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------
RoutesTest: test_should_route_to_dishes_index
---------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------
RoutesTest: test_should_route_to_restaurants_show
-------------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------
RoutesTest: test_should_route_to_restaurants_index
--------------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (0.3ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "schema_sha1"], ["LIMIT", 1]]
  [1m[36mActiveRecord::SchemaMigration Pluck (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "dishes" DISABLE TRIGGER ALL;ALTER TABLE "items" DISABLE TRIGGER ALL;ALTER TABLE "restaurants" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.0ms)[0m  [1m[31mDELETE FROM "dishes";
DELETE FROM "items";
DELETE FROM "restaurants";
INSERT INTO "dishes" ("id", "name", "created_at", "updated_at") VALUES (122903280, 'Appetizer', '2023-05-13 00:29:11.709402', '2023-05-13 00:29:11.709402'), (509217612, 'Main Course', '2023-05-13 00:29:11.709402', '2023-05-13 00:29:11.709402'), (693976031, 'Dessert', '2023-05-13 00:29:11.709402', '2023-05-13 00:29:11.709402');
INSERT INTO "items" ("id", "name", "price", "callories", "created_at", "updated_at", "restaurant_id", "dish_id") VALUES (920592244, 'Pan', 1000, 150, '2023-05-13 00:29:11.731731', '2023-05-13 00:29:11.731731', 648827877, 122903280), (802574032, 'Hamburguesa', 1500, 200, '2023-05-13 00:29:11.731731', '2023-05-13 00:29:11.731731', 648827877, 509217612), (416382555, 'Papa Frita', 1000, 300, '2023-05-13 00:29:11.731731', '2023-05-13 00:29:11.731731', 648827877, 693976031), (112585724, 'Lechuga', 200, 20, '2023-05-13 00:29:11.731731', '2023-05-13 00:29:11.731731', 1067778657, 122903280), (833805165, 'Tomate', 100, 50, '2023-05-13 00:29:11.731731', '2023-05-13 00:29:11.731731', 1067778657, 509217612), (683379417, 'Queso', 300, 200, '2023-05-13 00:29:11.731731', '2023-05-13 00:29:11.731731', 1067778657, 693976031), (532462148, 'Cebolla', 1000, 100, '2023-05-13 00:29:11.731731', '2023-05-13 00:29:11.731731', 144847564, 122903280), (251897809, 'Frutilla', 1000, 200, '2023-05-13 00:29:11.731731', '2023-05-13 00:29:11.731731', 144847564, 509217612), (939824966, 'Helado', 1000, 200, '2023-05-13 00:29:11.731731', '2023-05-13 00:29:11.731731', 144847564, 693976031);
INSERT INTO "restaurants" ("id", "name", "address", "created_at", "updated_at") VALUES (648827877, 'Nestizo', 'Viacura 4000', '2023-05-13 00:29:11.739676', '2023-05-13 00:29:11.739676'), (1067778657, 'NcDonalds', 'El Salto s/n', '2023-05-13 00:29:11.739676', '2023-05-13 00:29:11.739676'), (144847564, 'Huendis', 'Vitacura 2800', '2023-05-13 00:29:11.739676', '2023-05-13 00:29:11.739676')[0m
  [1m[36mTRANSACTION (14.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "dishes" ENABLE TRIGGER ALL;ALTER TABLE "items" ENABLE TRIGGER ALL;ALTER TABLE "restaurants" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (2.3ms)[0m  [1m[35mdo $$
  declare r record;
BEGIN
FOR r IN (
  SELECT FORMAT(
    'UPDATE pg_constraint SET convalidated=false WHERE conname = ''%I'' AND connamespace::regnamespace = ''%I''::regnamespace; ALTER TABLE %I.%I VALIDATE CONSTRAINT %I;',
    constraint_name,
    table_schema,
    table_schema,
    table_name,
    constraint_name
  ) AS constraint_check
  FROM information_schema.table_constraints WHERE constraint_type = 'FOREIGN KEY'
)
  LOOP
    EXECUTE (r.constraint_check);
  END LOOP;
END;
$$;
[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------
RoutesTest: test_should_route_to_dishes_index
---------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------
RoutesTest: test_should_route_to_items_show
-------------------------------------------
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------
RoutesTest: test_should_route_to_restaurants_index
--------------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------
RoutesTest: test_should_route_to_items_index
--------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------
RoutesTest: test_should_route_to_dishes_show
--------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------
RoutesTest: test_should_route_to_restaurants_show
-------------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------
ItemTest: test_should_validate_presence_of_callories_at_model_level
-------------------------------------------------------------------
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------
ItemTest: test_item_belongs_to_a_dish
-------------------------------------
  [1m[36mItem Load (0.3ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."name" = $1 LIMIT $2[0m  [["name", "Hamburguesa"], ["LIMIT", 1]]
  [1m[36mDish Load (0.2ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."id" = $1 LIMIT $2[0m  [["id", 509217612], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------
ItemTest: test_should_validate_presence_of_name_at_model_level
--------------------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------
ItemTest: test_should_validate_presence_of_callories_at_db_level
----------------------------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------
ItemTest: test_should_validate_presence_of_price_at_db_level
------------------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------
ItemTest: test_should_validate_presence_of_price_at_model_level
---------------------------------------------------------------
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------
ItemTest: test_should_load_fixtures_correctly
---------------------------------------------
  [1m[36mItem Load (0.2ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."name" = $1 LIMIT $2[0m  [["name", "Hamburguesa"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------
ItemTest: test_item_belongs_to_a_restaurant
-------------------------------------------
  [1m[36mItem Load (0.3ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."name" = $1 LIMIT $2[0m  [["name", "Hamburguesa"], ["LIMIT", 1]]
  [1m[36mRestaurant Load (0.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 648827877], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------
ItemTest: test_should_validate_presence_of_name_at_db_level
-----------------------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------
DishTest: test_should_validate_presence_of_name_at_db_level
-----------------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------
DishTest: test_should_have_many_items
-------------------------------------
  [1m[36mDish Load (0.2ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."name" = $1 LIMIT $2[0m  [["name", "Dessert"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------
DishTest: test_should_validate_presence_of_name_at_model_level
--------------------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------
DishTest: test_should_load_fixtures_correctly
---------------------------------------------
  [1m[36mDish Load (0.2ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."name" = $1 LIMIT $2[0m  [["name", "Dessert"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------
RestaurantsControllerTest: test_should_get_index
------------------------------------------------
Started GET "/restaurants/index" for 127.0.0.1 at 2023-05-12 20:29:11 -0400
Processing by RestaurantsController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering restaurants/index.html.erb within layouts/application
  Rendered restaurants/index.html.erb within layouts/application (Duration: 0.7ms | Allocations: 290)
  Rendered layout layouts/application.html.erb (Duration: 14.7ms | Allocations: 2173)
Completed 500 Internal Server Error in 22ms (ActiveRecord: 0.0ms | Allocations: 5188)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------
DishesControllerTest: test_should_get_index
-------------------------------------------
Started GET "/dishes/index" for 127.0.0.1 at 2023-05-12 20:29:11 -0400
Processing by DishesController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering dishes/index.html.erb within layouts/application
  Rendered dishes/index.html.erb within layouts/application (Duration: 0.5ms | Allocations: 106)
  Rendered layout layouts/application.html.erb (Duration: 3.6ms | Allocations: 1044)
Completed 500 Internal Server Error in 6ms (ActiveRecord: 0.0ms | Allocations: 1614)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------
RestaurantTest: test_should_have_many_items
-------------------------------------------
  [1m[36mRestaurant Load (0.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."name" = $1 LIMIT $2[0m  [["name", "NcDonalds"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------------
RestaurantTest: test_should_validate_presence_of_address_at_model_level
-----------------------------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------
RestaurantTest: test_should_validate_presence_of_name_at_db_level
-----------------------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------
RestaurantTest: test_should_validate_presence_of_address_at_db_level
--------------------------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------
RestaurantTest: test_should_load_fixtures_correctly
---------------------------------------------------
  [1m[36mRestaurant Load (0.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."name" = $1 LIMIT $2[0m  [["name", "NcDonalds"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------
RestaurantTest: test_should_validate_presence_of_name_at_model_level
--------------------------------------------------------------------
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------
ItemsControllerTest: test_should_get_index
------------------------------------------
Started GET "/items/index" for 127.0.0.1 at 2023-05-12 20:29:11 -0400
Processing by ItemsController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering items/index.html.erb within layouts/application
  Rendered items/index.html.erb within layouts/application (Duration: 0.3ms | Allocations: 103)
  Rendered layout layouts/application.html.erb (Duration: 1.3ms | Allocations: 1041)
Completed 500 Internal Server Error in 3ms (ActiveRecord: 0.0ms | Allocations: 1610)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (0.3ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "schema_sha1"], ["LIMIT", 1]]
  [1m[36mActiveRecord::SchemaMigration Pluck (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "dishes" DISABLE TRIGGER ALL;ALTER TABLE "items" DISABLE TRIGGER ALL;ALTER TABLE "restaurants" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.8ms)[0m  [1m[31mDELETE FROM "dishes";
DELETE FROM "items";
DELETE FROM "restaurants";
INSERT INTO "dishes" ("id", "name", "created_at", "updated_at") VALUES (122903280, 'Appetizer', '2023-05-13 00:31:13.928351', '2023-05-13 00:31:13.928351'), (509217612, 'Main Course', '2023-05-13 00:31:13.928351', '2023-05-13 00:31:13.928351'), (693976031, 'Dessert', '2023-05-13 00:31:13.928351', '2023-05-13 00:31:13.928351');
INSERT INTO "items" ("id", "name", "price", "callories", "created_at", "updated_at", "restaurant_id", "dish_id") VALUES (920592244, 'Pan', 1000, 150, '2023-05-13 00:31:13.949759', '2023-05-13 00:31:13.949759', 648827877, 122903280), (802574032, 'Hamburguesa', 1500, 200, '2023-05-13 00:31:13.949759', '2023-05-13 00:31:13.949759', 648827877, 509217612), (416382555, 'Papa Frita', 1000, 300, '2023-05-13 00:31:13.949759', '2023-05-13 00:31:13.949759', 648827877, 693976031), (112585724, 'Lechuga', 200, 20, '2023-05-13 00:31:13.949759', '2023-05-13 00:31:13.949759', 1067778657, 122903280), (833805165, 'Tomate', 100, 50, '2023-05-13 00:31:13.949759', '2023-05-13 00:31:13.949759', 1067778657, 509217612), (683379417, 'Queso', 300, 200, '2023-05-13 00:31:13.949759', '2023-05-13 00:31:13.949759', 1067778657, 693976031), (532462148, 'Cebolla', 1000, 100, '2023-05-13 00:31:13.949759', '2023-05-13 00:31:13.949759', 144847564, 122903280), (251897809, 'Frutilla', 1000, 200, '2023-05-13 00:31:13.949759', '2023-05-13 00:31:13.949759', 144847564, 509217612), (939824966, 'Helado', 1000, 200, '2023-05-13 00:31:13.949759', '2023-05-13 00:31:13.949759', 144847564, 693976031);
INSERT INTO "restaurants" ("id", "name", "address", "created_at", "updated_at") VALUES (648827877, 'Nestizo', 'Viacura 4000', '2023-05-13 00:31:13.961125', '2023-05-13 00:31:13.961125'), (1067778657, 'NcDonalds', 'El Salto s/n', '2023-05-13 00:31:13.961125', '2023-05-13 00:31:13.961125'), (144847564, 'Huendis', 'Vitacura 2800', '2023-05-13 00:31:13.961125', '2023-05-13 00:31:13.961125')[0m
  [1m[36mTRANSACTION (6.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "dishes" ENABLE TRIGGER ALL;ALTER TABLE "items" ENABLE TRIGGER ALL;ALTER TABLE "restaurants" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (2.3ms)[0m  [1m[35mdo $$
  declare r record;
BEGIN
FOR r IN (
  SELECT FORMAT(
    'UPDATE pg_constraint SET convalidated=false WHERE conname = ''%I'' AND connamespace::regnamespace = ''%I''::regnamespace; ALTER TABLE %I.%I VALIDATE CONSTRAINT %I;',
    constraint_name,
    table_schema,
    table_schema,
    table_name,
    constraint_name
  ) AS constraint_check
  FROM information_schema.table_constraints WHERE constraint_type = 'FOREIGN KEY'
)
  LOOP
    EXECUTE (r.constraint_check);
  END LOOP;
END;
$$;
[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------
ItemTest: test_should_validate_presence_of_price_at_model_level
---------------------------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------
ItemTest: test_item_belongs_to_a_dish
-------------------------------------
  [1m[36mItem Load (0.3ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."name" = $1 LIMIT $2[0m  [["name", "Hamburguesa"], ["LIMIT", 1]]
  [1m[36mDish Load (0.3ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."id" = $1 LIMIT $2[0m  [["id", 509217612], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------
ItemTest: test_should_load_fixtures_correctly
---------------------------------------------
  [1m[36mItem Load (0.3ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."name" = $1 LIMIT $2[0m  [["name", "Hamburguesa"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------
ItemTest: test_item_belongs_to_a_restaurant
-------------------------------------------
  [1m[36mItem Load (0.3ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."name" = $1 LIMIT $2[0m  [["name", "Hamburguesa"], ["LIMIT", 1]]
  [1m[36mRestaurant Load (0.4ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 648827877], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------
ItemTest: test_should_validate_presence_of_name_at_model_level
--------------------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------
ItemTest: test_should_validate_presence_of_callories_at_model_level
-------------------------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------
ItemTest: test_should_validate_presence_of_price_at_db_level
------------------------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------
ItemTest: test_should_validate_presence_of_callories_at_db_level
----------------------------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------
ItemTest: test_should_validate_presence_of_name_at_db_level
-----------------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------
RestaurantTest: test_should_have_many_items
-------------------------------------------
  [1m[36mRestaurant Load (0.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."name" = $1 LIMIT $2[0m  [["name", "NcDonalds"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------------
RestaurantTest: test_should_validate_presence_of_address_at_model_level
-----------------------------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------
RestaurantTest: test_should_validate_presence_of_name_at_db_level
-----------------------------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------
RestaurantTest: test_should_validate_presence_of_address_at_db_level
--------------------------------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------
RestaurantTest: test_should_load_fixtures_correctly
---------------------------------------------------
  [1m[36mRestaurant Load (0.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."name" = $1 LIMIT $2[0m  [["name", "NcDonalds"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------
RestaurantTest: test_should_validate_presence_of_name_at_model_level
--------------------------------------------------------------------
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------
RoutesTest: test_should_route_to_dishes_index
---------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------
RoutesTest: test_should_route_to_items_show
-------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------
RoutesTest: test_should_route_to_restaurants_index
--------------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------
RoutesTest: test_should_route_to_items_index
--------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------
RoutesTest: test_should_route_to_dishes_show
--------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------
RoutesTest: test_should_route_to_restaurants_show
-------------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------
RestaurantsControllerTest: test_should_get_index
------------------------------------------------
Started GET "/restaurants/index" for 127.0.0.1 at 2023-05-12 20:31:14 -0400
Processing by RestaurantsController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering restaurants/index.html.erb within layouts/application
  Rendered restaurants/index.html.erb within layouts/application (Duration: 0.8ms | Allocations: 290)
  Rendered layout layouts/application.html.erb (Duration: 18.3ms | Allocations: 2174)
Completed 500 Internal Server Error in 26ms (ActiveRecord: 0.0ms | Allocations: 5190)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------
ItemsControllerTest: test_should_get_index
------------------------------------------
Started GET "/items/index" for 127.0.0.1 at 2023-05-12 20:31:14 -0400
Processing by ItemsController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering items/index.html.erb within layouts/application
  Rendered items/index.html.erb within layouts/application (Duration: 0.3ms | Allocations: 106)
  Rendered layout layouts/application.html.erb (Duration: 1.4ms | Allocations: 1044)
Completed 500 Internal Server Error in 3ms (ActiveRecord: 0.0ms | Allocations: 1614)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------
DishesControllerTest: test_should_get_index
-------------------------------------------
Started GET "/dishes/index" for 127.0.0.1 at 2023-05-12 20:31:14 -0400
Processing by DishesController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering dishes/index.html.erb within layouts/application
  Rendered dishes/index.html.erb within layouts/application (Duration: 0.3ms | Allocations: 103)
  Rendered layout layouts/application.html.erb (Duration: 1.3ms | Allocations: 1040)
Completed 500 Internal Server Error in 3ms (ActiveRecord: 0.0ms | Allocations: 1610)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------
DishTest: test_should_validate_presence_of_name_at_db_level
-----------------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------
DishTest: test_should_have_many_items
-------------------------------------
  [1m[36mDish Load (4.9ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."name" = $1 LIMIT $2[0m  [["name", "Dessert"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------
DishTest: test_should_validate_presence_of_name_at_model_level
--------------------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------
DishTest: test_should_load_fixtures_correctly
---------------------------------------------
  [1m[36mDish Load (0.3ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."name" = $1 LIMIT $2[0m  [["name", "Dessert"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (0.3ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "schema_sha1"], ["LIMIT", 1]]
  [1m[36mActiveRecord::SchemaMigration Pluck (1.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "dishes" DISABLE TRIGGER ALL;ALTER TABLE "items" DISABLE TRIGGER ALL;ALTER TABLE "restaurants" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.8ms)[0m  [1m[31mDELETE FROM "dishes";
DELETE FROM "items";
DELETE FROM "restaurants";
INSERT INTO "dishes" ("id", "name", "created_at", "updated_at") VALUES (122903280, 'Appetizer', '2023-05-13 00:38:32.730030', '2023-05-13 00:38:32.730030'), (509217612, 'Main Course', '2023-05-13 00:38:32.730030', '2023-05-13 00:38:32.730030'), (693976031, 'Dessert', '2023-05-13 00:38:32.730030', '2023-05-13 00:38:32.730030');
INSERT INTO "items" ("id", "name", "price", "callories", "created_at", "updated_at", "restaurant_id", "dish_id") VALUES (920592244, 'Pan', 1000, 150, '2023-05-13 00:38:32.752523', '2023-05-13 00:38:32.752523', 648827877, 122903280), (802574032, 'Hamburguesa', 1500, 200, '2023-05-13 00:38:32.752523', '2023-05-13 00:38:32.752523', 648827877, 509217612), (416382555, 'Papa Frita', 1000, 300, '2023-05-13 00:38:32.752523', '2023-05-13 00:38:32.752523', 648827877, 693976031), (112585724, 'Lechuga', 200, 20, '2023-05-13 00:38:32.752523', '2023-05-13 00:38:32.752523', 1067778657, 122903280), (833805165, 'Tomate', 100, 50, '2023-05-13 00:38:32.752523', '2023-05-13 00:38:32.752523', 1067778657, 509217612), (683379417, 'Queso', 300, 200, '2023-05-13 00:38:32.752523', '2023-05-13 00:38:32.752523', 1067778657, 693976031), (532462148, 'Cebolla', 1000, 100, '2023-05-13 00:38:32.752523', '2023-05-13 00:38:32.752523', 144847564, 122903280), (251897809, 'Frutilla', 1000, 200, '2023-05-13 00:38:32.752523', '2023-05-13 00:38:32.752523', 144847564, 509217612), (939824966, 'Helado', 1000, 200, '2023-05-13 00:38:32.752523', '2023-05-13 00:38:32.752523', 144847564, 693976031);
INSERT INTO "restaurants" ("id", "name", "address", "created_at", "updated_at") VALUES (648827877, 'Nestizo', 'Viacura 4000', '2023-05-13 00:38:32.758016', '2023-05-13 00:38:32.758016'), (1067778657, 'NcDonalds', 'El Salto s/n', '2023-05-13 00:38:32.758016', '2023-05-13 00:38:32.758016'), (144847564, 'Huendis', 'Vitacura 2800', '2023-05-13 00:38:32.758016', '2023-05-13 00:38:32.758016')[0m
  [1m[36mTRANSACTION (6.0ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "dishes" ENABLE TRIGGER ALL;ALTER TABLE "items" ENABLE TRIGGER ALL;ALTER TABLE "restaurants" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (2.2ms)[0m  [1m[35mdo $$
  declare r record;
BEGIN
FOR r IN (
  SELECT FORMAT(
    'UPDATE pg_constraint SET convalidated=false WHERE conname = ''%I'' AND connamespace::regnamespace = ''%I''::regnamespace; ALTER TABLE %I.%I VALIDATE CONSTRAINT %I;',
    constraint_name,
    table_schema,
    table_schema,
    table_name,
    constraint_name
  ) AS constraint_check
  FROM information_schema.table_constraints WHERE constraint_type = 'FOREIGN KEY'
)
  LOOP
    EXECUTE (r.constraint_check);
  END LOOP;
END;
$$;
[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------
DishTest: test_should_have_many_items
-------------------------------------
  [1m[36mDish Load (0.2ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."name" = $1 LIMIT $2[0m  [["name", "Dessert"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------
DishTest: test_should_validate_presence_of_name_at_db_level
-----------------------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------
DishTest: test_should_validate_presence_of_name_at_model_level
--------------------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------
DishTest: test_should_load_fixtures_correctly
---------------------------------------------
  [1m[36mDish Load (0.2ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."name" = $1 LIMIT $2[0m  [["name", "Dessert"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------
RestaurantsControllerTest: test_should_get_index
------------------------------------------------
Started GET "/restaurants/index" for 127.0.0.1 at 2023-05-12 20:38:32 -0400
Processing by RestaurantsController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering restaurants/index.html.erb within layouts/application
  Rendered restaurants/index.html.erb within layouts/application (Duration: 0.7ms | Allocations: 290)
  Rendered layout layouts/application.html.erb (Duration: 3.3ms | Allocations: 2173)
Completed 500 Internal Server Error in 10ms (ActiveRecord: 0.0ms | Allocations: 5241)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------
ItemsControllerTest: test_should_get_index
------------------------------------------
Started GET "/items/index" for 127.0.0.1 at 2023-05-12 20:38:32 -0400
Processing by ItemsController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering items/index.html.erb within layouts/application
  Rendered items/index.html.erb within layouts/application (Duration: 0.3ms | Allocations: 103)
  Rendered layout layouts/application.html.erb (Duration: 1.4ms | Allocations: 1040)
Completed 500 Internal Server Error in 3ms (ActiveRecord: 0.0ms | Allocations: 1654)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------
ItemTest: test_should_load_fixtures_correctly
---------------------------------------------
  [1m[36mItem Load (0.2ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."name" = $1 LIMIT $2[0m  [["name", "Hamburguesa"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------
ItemTest: test_should_validate_presence_of_price_at_model_level
---------------------------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------
ItemTest: test_item_belongs_to_a_dish
-------------------------------------
  [1m[36mItem Load (0.2ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."name" = $1 LIMIT $2[0m  [["name", "Hamburguesa"], ["LIMIT", 1]]
  [1m[36mDish Load (0.2ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."id" = $1 LIMIT $2[0m  [["id", 509217612], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------
ItemTest: test_should_validate_presence_of_price_at_db_level
------------------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------
ItemTest: test_should_validate_presence_of_name_at_model_level
--------------------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------
ItemTest: test_should_validate_presence_of_callories_at_model_level
-------------------------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------
ItemTest: test_should_validate_presence_of_name_at_db_level
-----------------------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------
ItemTest: test_item_belongs_to_a_restaurant
-------------------------------------------
  [1m[36mItem Load (0.6ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."name" = $1 LIMIT $2[0m  [["name", "Hamburguesa"], ["LIMIT", 1]]
  [1m[36mRestaurant Load (0.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 648827877], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------
ItemTest: test_should_validate_presence_of_callories_at_db_level
----------------------------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------
RoutesTest: test_should_route_to_items_index
--------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------
RoutesTest: test_should_route_to_dishes_index
---------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------
RoutesTest: test_should_route_to_restaurants_index
--------------------------------------------------
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------
RoutesTest: test_should_route_to_restaurants_show
-------------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------
RoutesTest: test_should_route_to_items_show
-------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------
RoutesTest: test_should_route_to_dishes_show
--------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------
RestaurantTest: test_should_validate_presence_of_address_at_db_level
--------------------------------------------------------------------
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------
RestaurantTest: test_should_have_many_items
-------------------------------------------
  [1m[36mRestaurant Load (0.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."name" = $1 LIMIT $2[0m  [["name", "NcDonalds"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------
RestaurantTest: test_should_validate_presence_of_name_at_db_level
-----------------------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------
RestaurantTest: test_should_validate_presence_of_name_at_model_level
--------------------------------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------------
RestaurantTest: test_should_validate_presence_of_address_at_model_level
-----------------------------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------
RestaurantTest: test_should_load_fixtures_correctly
---------------------------------------------------
  [1m[36mRestaurant Load (0.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."name" = $1 LIMIT $2[0m  [["name", "NcDonalds"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------
DishesControllerTest: test_should_get_index
-------------------------------------------
Started GET "/dishes/index" for 127.0.0.1 at 2023-05-12 20:38:33 -0400
Processing by DishesController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering dishes/index.html.erb within layouts/application
  Rendered dishes/index.html.erb within layouts/application (Duration: 0.4ms | Allocations: 106)
  Rendered layout layouts/application.html.erb (Duration: 1.5ms | Allocations: 1068)
Completed 500 Internal Server Error in 5ms (ActiveRecord: 0.0ms | Allocations: 1638)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (0.3ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "schema_sha1"], ["LIMIT", 1]]
  [1m[36mActiveRecord::SchemaMigration Pluck (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "dishes" DISABLE TRIGGER ALL;ALTER TABLE "items" DISABLE TRIGGER ALL;ALTER TABLE "restaurants" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.8ms)[0m  [1m[31mDELETE FROM "dishes";
DELETE FROM "items";
DELETE FROM "restaurants";
INSERT INTO "dishes" ("id", "name", "created_at", "updated_at") VALUES (122903280, 'Appetizer', '2023-05-13 00:50:45.012262', '2023-05-13 00:50:45.012262'), (509217612, 'Main Course', '2023-05-13 00:50:45.012262', '2023-05-13 00:50:45.012262'), (693976031, 'Dessert', '2023-05-13 00:50:45.012262', '2023-05-13 00:50:45.012262');
INSERT INTO "items" ("id", "name", "price", "callories", "created_at", "updated_at", "restaurant_id", "dish_id") VALUES (920592244, 'Pan', 1000, 150, '2023-05-13 00:50:45.016655', '2023-05-13 00:50:45.016655', 648827877, 122903280), (802574032, 'Hamburguesa', 1500, 200, '2023-05-13 00:50:45.016655', '2023-05-13 00:50:45.016655', 648827877, 509217612), (416382555, 'Papa Frita', 1000, 300, '2023-05-13 00:50:45.016655', '2023-05-13 00:50:45.016655', 648827877, 693976031), (112585724, 'Lechuga', 200, 20, '2023-05-13 00:50:45.016655', '2023-05-13 00:50:45.016655', 1067778657, 122903280), (833805165, 'Tomate', 100, 50, '2023-05-13 00:50:45.016655', '2023-05-13 00:50:45.016655', 1067778657, 509217612), (683379417, 'Queso', 300, 200, '2023-05-13 00:50:45.016655', '2023-05-13 00:50:45.016655', 1067778657, 693976031), (532462148, 'Cebolla', 1000, 100, '2023-05-13 00:50:45.016655', '2023-05-13 00:50:45.016655', 144847564, 122903280), (251897809, 'Frutilla', 1000, 200, '2023-05-13 00:50:45.016655', '2023-05-13 00:50:45.016655', 144847564, 509217612), (939824966, 'Helado', 1000, 200, '2023-05-13 00:50:45.016655', '2023-05-13 00:50:45.016655', 144847564, 693976031);
INSERT INTO "restaurants" ("id", "name", "address", "created_at", "updated_at") VALUES (648827877, 'Nestizo', 'Viacura 4000', '2023-05-13 00:50:45.022207', '2023-05-13 00:50:45.022207'), (1067778657, 'NcDonalds', 'El Salto s/n', '2023-05-13 00:50:45.022207', '2023-05-13 00:50:45.022207'), (144847564, 'Huendis', 'Vitacura 2800', '2023-05-13 00:50:45.022207', '2023-05-13 00:50:45.022207')[0m
  [1m[36mTRANSACTION (6.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "dishes" ENABLE TRIGGER ALL;ALTER TABLE "items" ENABLE TRIGGER ALL;ALTER TABLE "restaurants" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (2.3ms)[0m  [1m[35mdo $$
  declare r record;
BEGIN
FOR r IN (
  SELECT FORMAT(
    'UPDATE pg_constraint SET convalidated=false WHERE conname = ''%I'' AND connamespace::regnamespace = ''%I''::regnamespace; ALTER TABLE %I.%I VALIDATE CONSTRAINT %I;',
    constraint_name,
    table_schema,
    table_schema,
    table_name,
    constraint_name
  ) AS constraint_check
  FROM information_schema.table_constraints WHERE constraint_type = 'FOREIGN KEY'
)
  LOOP
    EXECUTE (r.constraint_check);
  END LOOP;
END;
$$;
[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------
RestaurantTest: test_should_validate_presence_of_name_at_db_level
-----------------------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------
RestaurantTest: test_should_have_many_items
-------------------------------------------
  [1m[36mRestaurant Load (0.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."name" = $1 LIMIT $2[0m  [["name", "NcDonalds"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------------
RestaurantTest: test_should_validate_presence_of_address_at_model_level
-----------------------------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------
RestaurantTest: test_should_load_fixtures_correctly
---------------------------------------------------
  [1m[36mRestaurant Load (0.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."name" = $1 LIMIT $2[0m  [["name", "NcDonalds"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------
RestaurantTest: test_should_validate_presence_of_name_at_model_level
--------------------------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------
RestaurantTest: test_should_validate_presence_of_address_at_db_level
--------------------------------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------
RestaurantsControllerTest: test_should_get_index
------------------------------------------------
Started GET "/restaurants/index" for 127.0.0.1 at 2023-05-12 20:50:45 -0400
Processing by RestaurantsController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering restaurants/index.html.erb within layouts/application
  Rendered restaurants/index.html.erb within layouts/application (Duration: 0.7ms | Allocations: 290)
  Rendered layout layouts/application.html.erb (Duration: 3.7ms | Allocations: 2173)
Completed 500 Internal Server Error in 11ms (ActiveRecord: 0.0ms | Allocations: 5192)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------
RoutesTest: test_should_route_to_restaurants_index
--------------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------
RoutesTest: test_should_route_to_dishes_index
---------------------------------------------
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------
RoutesTest: test_should_route_to_items_show
-------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------
RoutesTest: test_should_route_to_dishes_show
--------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------
RoutesTest: test_should_route_to_restaurants_show
-------------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------
RoutesTest: test_should_route_to_items_index
--------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------
DishesControllerTest: test_should_get_index
-------------------------------------------
Started GET "/dishes/index" for 127.0.0.1 at 2023-05-12 20:50:45 -0400
Processing by DishesController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering dishes/index.html.erb within layouts/application
  Rendered dishes/index.html.erb within layouts/application (Duration: 0.3ms | Allocations: 103)
  Rendered layout layouts/application.html.erb (Duration: 1.5ms | Allocations: 1040)
Completed 500 Internal Server Error in 3ms (ActiveRecord: 0.0ms | Allocations: 1659)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------
ItemsControllerTest: test_should_get_index
------------------------------------------
Started GET "/items/index" for 127.0.0.1 at 2023-05-12 20:50:45 -0400
Processing by ItemsController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering items/index.html.erb within layouts/application
  Rendered items/index.html.erb within layouts/application (Duration: 0.4ms | Allocations: 103)
  Rendered layout layouts/application.html.erb (Duration: 1.6ms | Allocations: 1040)
Completed 500 Internal Server Error in 4ms (ActiveRecord: 0.0ms | Allocations: 1653)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------
DishTest: test_should_load_fixtures_correctly
---------------------------------------------
  [1m[36mDish Load (0.2ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."name" = $1 LIMIT $2[0m  [["name", "Dessert"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------
DishTest: test_should_have_many_items
-------------------------------------
  [1m[36mDish Load (0.2ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."name" = $1 LIMIT $2[0m  [["name", "Dessert"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------
DishTest: test_should_validate_presence_of_name_at_model_level
--------------------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------
DishTest: test_should_validate_presence_of_name_at_db_level
-----------------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------
ItemTest: test_should_validate_presence_of_callories_at_model_level
-------------------------------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------
ItemTest: test_item_belongs_to_a_dish
-------------------------------------
  [1m[36mItem Load (0.2ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."name" = $1 LIMIT $2[0m  [["name", "Hamburguesa"], ["LIMIT", 1]]
  [1m[36mDish Load (0.2ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."id" = $1 LIMIT $2[0m  [["id", 509217612], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------
ItemTest: test_should_validate_presence_of_callories_at_db_level
----------------------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------
ItemTest: test_item_belongs_to_a_restaurant
-------------------------------------------
  [1m[36mItem Load (0.2ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."name" = $1 LIMIT $2[0m  [["name", "Hamburguesa"], ["LIMIT", 1]]
  [1m[36mRestaurant Load (0.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 648827877], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------
ItemTest: test_should_validate_presence_of_price_at_model_level
---------------------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------
ItemTest: test_should_validate_presence_of_name_at_db_level
-----------------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------
ItemTest: test_should_validate_presence_of_price_at_db_level
------------------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------
ItemTest: test_should_validate_presence_of_name_at_model_level
--------------------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------
ItemTest: test_should_load_fixtures_correctly
---------------------------------------------
  [1m[36mItem Load (0.2ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."name" = $1 LIMIT $2[0m  [["name", "Hamburguesa"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (0.9ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "schema_sha1"], ["LIMIT", 1]]
  [1m[36mActiveRecord::SchemaMigration Pluck (2.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.5ms)[0m  [1m[35mALTER TABLE "dishes" DISABLE TRIGGER ALL;ALTER TABLE "items" DISABLE TRIGGER ALL;ALTER TABLE "restaurants" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (4.7ms)[0m  [1m[31mDELETE FROM "dishes";
DELETE FROM "items";
DELETE FROM "restaurants";
INSERT INTO "dishes" ("id", "name", "created_at", "updated_at") VALUES (122903280, 'Appetizer', '2023-05-13 00:52:47.496003', '2023-05-13 00:52:47.496003'), (509217612, 'Main Course', '2023-05-13 00:52:47.496003', '2023-05-13 00:52:47.496003'), (693976031, 'Dessert', '2023-05-13 00:52:47.496003', '2023-05-13 00:52:47.496003');
INSERT INTO "items" ("id", "name", "price", "callories", "created_at", "updated_at", "restaurant_id", "dish_id") VALUES (920592244, 'Pan', 1000, 150, '2023-05-13 00:52:47.503062', '2023-05-13 00:52:47.503062', 648827877, 122903280), (802574032, 'Hamburguesa', 1500, 200, '2023-05-13 00:52:47.503062', '2023-05-13 00:52:47.503062', 648827877, 509217612), (416382555, 'Papa Frita', 1000, 300, '2023-05-13 00:52:47.503062', '2023-05-13 00:52:47.503062', 648827877, 693976031), (112585724, 'Lechuga', 200, 20, '2023-05-13 00:52:47.503062', '2023-05-13 00:52:47.503062', 1067778657, 122903280), (833805165, 'Tomate', 100, 50, '2023-05-13 00:52:47.503062', '2023-05-13 00:52:47.503062', 1067778657, 509217612), (683379417, 'Queso', 300, 200, '2023-05-13 00:52:47.503062', '2023-05-13 00:52:47.503062', 1067778657, 693976031), (532462148, 'Cebolla', 1000, 100, '2023-05-13 00:52:47.503062', '2023-05-13 00:52:47.503062', 144847564, 122903280), (251897809, 'Frutilla', 1000, 200, '2023-05-13 00:52:47.503062', '2023-05-13 00:52:47.503062', 144847564, 509217612), (939824966, 'Helado', 1000, 200, '2023-05-13 00:52:47.503062', '2023-05-13 00:52:47.503062', 144847564, 693976031);
INSERT INTO "restaurants" ("id", "name", "address", "created_at", "updated_at") VALUES (648827877, 'Nestizo', 'Viacura 4000', '2023-05-13 00:52:47.508094', '2023-05-13 00:52:47.508094'), (1067778657, 'NcDonalds', 'El Salto s/n', '2023-05-13 00:52:47.508094', '2023-05-13 00:52:47.508094'), (144847564, 'Huendis', 'Vitacura 2800', '2023-05-13 00:52:47.508094', '2023-05-13 00:52:47.508094')[0m
  [1m[36mTRANSACTION (2.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mALTER TABLE "dishes" ENABLE TRIGGER ALL;ALTER TABLE "items" ENABLE TRIGGER ALL;ALTER TABLE "restaurants" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (9.3ms)[0m  [1m[35mdo $$
  declare r record;
BEGIN
FOR r IN (
  SELECT FORMAT(
    'UPDATE pg_constraint SET convalidated=false WHERE conname = ''%I'' AND connamespace::regnamespace = ''%I''::regnamespace; ALTER TABLE %I.%I VALIDATE CONSTRAINT %I;',
    constraint_name,
    table_schema,
    table_schema,
    table_name,
    constraint_name
  ) AS constraint_check
  FROM information_schema.table_constraints WHERE constraint_type = 'FOREIGN KEY'
)
  LOOP
    EXECUTE (r.constraint_check);
  END LOOP;
END;
$$;
[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------
RestaurantsControllerTest: test_should_get_index
------------------------------------------------
Started GET "/restaurants/index" for 127.0.0.1 at 2023-05-12 20:52:47 -0400
Processing by RestaurantsController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering restaurants/index.html.erb within layouts/application
  Rendered restaurants/index.html.erb within layouts/application (Duration: 1.1ms | Allocations: 290)
  Rendered layout layouts/application.html.erb (Duration: 6.3ms | Allocations: 2173)
Completed 500 Internal Server Error in 17ms (ActiveRecord: 0.0ms | Allocations: 5251)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------
RestaurantTest: test_should_validate_presence_of_name_at_model_level
--------------------------------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------
RestaurantTest: test_should_have_many_items
-------------------------------------------
  [1m[36mRestaurant Load (0.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."name" = $1 LIMIT $2[0m  [["name", "NcDonalds"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------------
RestaurantTest: test_should_validate_presence_of_address_at_model_level
-----------------------------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------
RestaurantTest: test_should_load_fixtures_correctly
---------------------------------------------------
  [1m[36mRestaurant Load (0.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."name" = $1 LIMIT $2[0m  [["name", "NcDonalds"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------
RestaurantTest: test_should_validate_presence_of_name_at_db_level
-----------------------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------
RestaurantTest: test_should_validate_presence_of_address_at_db_level
--------------------------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------
ItemTest: test_should_validate_presence_of_name_at_db_level
-----------------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------
ItemTest: test_item_belongs_to_a_dish
-------------------------------------
  [1m[36mItem Load (0.2ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."name" = $1 LIMIT $2[0m  [["name", "Hamburguesa"], ["LIMIT", 1]]
  [1m[36mDish Load (0.2ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."id" = $1 LIMIT $2[0m  [["id", 509217612], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------
ItemTest: test_should_validate_presence_of_callories_at_db_level
----------------------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------
ItemTest: test_should_load_fixtures_correctly
---------------------------------------------
  [1m[36mItem Load (0.2ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."name" = $1 LIMIT $2[0m  [["name", "Hamburguesa"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------
ItemTest: test_should_validate_presence_of_price_at_model_level
---------------------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------
ItemTest: test_should_validate_presence_of_name_at_model_level
--------------------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------
ItemTest: test_item_belongs_to_a_restaurant
-------------------------------------------
  [1m[36mItem Load (0.2ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."name" = $1 LIMIT $2[0m  [["name", "Hamburguesa"], ["LIMIT", 1]]
  [1m[36mRestaurant Load (0.4ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 648827877], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------
ItemTest: test_should_validate_presence_of_callories_at_model_level
-------------------------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------
ItemTest: test_should_validate_presence_of_price_at_db_level
------------------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------
DishesControllerTest: test_should_get_index
-------------------------------------------
Started GET "/dishes/index" for 127.0.0.1 at 2023-05-12 20:52:47 -0400
Processing by DishesController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering dishes/index.html.erb within layouts/application
  Rendered dishes/index.html.erb within layouts/application (Duration: 0.6ms | Allocations: 103)
  Rendered layout layouts/application.html.erb (Duration: 1.6ms | Allocations: 1040)
Completed 500 Internal Server Error in 3ms (ActiveRecord: 0.0ms | Allocations: 1611)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------
DishTest: test_should_validate_presence_of_name_at_model_level
--------------------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------
DishTest: test_should_load_fixtures_correctly
---------------------------------------------
  [1m[36mDish Load (0.2ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."name" = $1 LIMIT $2[0m  [["name", "Dessert"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------
DishTest: test_should_have_many_items
-------------------------------------
  [1m[36mDish Load (0.4ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."name" = $1 LIMIT $2[0m  [["name", "Dessert"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------
DishTest: test_should_validate_presence_of_name_at_db_level
-----------------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------
RoutesTest: test_should_route_to_restaurants_show
-------------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------
RoutesTest: test_should_route_to_dishes_index
---------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------
RoutesTest: test_should_route_to_items_show
-------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------
RoutesTest: test_should_route_to_dishes_show
--------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------
RoutesTest: test_should_route_to_restaurants_index
--------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------
RoutesTest: test_should_route_to_items_index
--------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------
ItemsControllerTest: test_should_get_index
------------------------------------------
Started GET "/items/index" for 127.0.0.1 at 2023-05-12 20:52:47 -0400
Processing by ItemsController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering items/index.html.erb within layouts/application
  Rendered items/index.html.erb within layouts/application (Duration: 0.9ms | Allocations: 106)
  Rendered layout layouts/application.html.erb (Duration: 1.9ms | Allocations: 1068)
Completed 500 Internal Server Error in 4ms (ActiveRecord: 0.0ms | Allocations: 1638)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (0.3ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "schema_sha1"], ["LIMIT", 1]]
  [1m[36mActiveRecord::SchemaMigration Pluck (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "dishes" DISABLE TRIGGER ALL;ALTER TABLE "items" DISABLE TRIGGER ALL;ALTER TABLE "restaurants" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.9ms)[0m  [1m[31mDELETE FROM "dishes";
DELETE FROM "items";
DELETE FROM "restaurants";
INSERT INTO "dishes" ("id", "name", "created_at", "updated_at") VALUES (122903280, 'Appetizer', '2023-05-13 01:01:44.099178', '2023-05-13 01:01:44.099178'), (509217612, 'Main Course', '2023-05-13 01:01:44.099178', '2023-05-13 01:01:44.099178'), (693976031, 'Dessert', '2023-05-13 01:01:44.099178', '2023-05-13 01:01:44.099178');
INSERT INTO "items" ("id", "name", "price", "callories", "created_at", "updated_at", "restaurant_id", "dish_id") VALUES (920592244, 'Pan', 1000, 150, '2023-05-13 01:01:44.121016', '2023-05-13 01:01:44.121016', 648827877, 122903280), (802574032, 'Hamburguesa', 1500, 200, '2023-05-13 01:01:44.121016', '2023-05-13 01:01:44.121016', 648827877, 509217612), (416382555, 'Papa Frita', 1000, 300, '2023-05-13 01:01:44.121016', '2023-05-13 01:01:44.121016', 648827877, 693976031), (112585724, 'Lechuga', 200, 20, '2023-05-13 01:01:44.121016', '2023-05-13 01:01:44.121016', 1067778657, 122903280), (833805165, 'Tomate', 100, 50, '2023-05-13 01:01:44.121016', '2023-05-13 01:01:44.121016', 1067778657, 509217612), (683379417, 'Queso', 300, 200, '2023-05-13 01:01:44.121016', '2023-05-13 01:01:44.121016', 1067778657, 693976031), (532462148, 'Cebolla', 1000, 100, '2023-05-13 01:01:44.121016', '2023-05-13 01:01:44.121016', 144847564, 122903280), (251897809, 'Frutilla', 1000, 200, '2023-05-13 01:01:44.121016', '2023-05-13 01:01:44.121016', 144847564, 509217612), (939824966, 'Helado', 1000, 200, '2023-05-13 01:01:44.121016', '2023-05-13 01:01:44.121016', 144847564, 693976031);
INSERT INTO "restaurants" ("id", "name", "address", "created_at", "updated_at") VALUES (648827877, 'Nestizo', 'Viacura 4000', '2023-05-13 01:01:44.128515', '2023-05-13 01:01:44.128515'), (1067778657, 'NcDonalds', 'El Salto s/n', '2023-05-13 01:01:44.128515', '2023-05-13 01:01:44.128515'), (144847564, 'Huendis', 'Vitacura 2800', '2023-05-13 01:01:44.128515', '2023-05-13 01:01:44.128515')[0m
  [1m[36mTRANSACTION (10.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mALTER TABLE "dishes" ENABLE TRIGGER ALL;ALTER TABLE "items" ENABLE TRIGGER ALL;ALTER TABLE "restaurants" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (2.2ms)[0m  [1m[35mdo $$
  declare r record;
BEGIN
FOR r IN (
  SELECT FORMAT(
    'UPDATE pg_constraint SET convalidated=false WHERE conname = ''%I'' AND connamespace::regnamespace = ''%I''::regnamespace; ALTER TABLE %I.%I VALIDATE CONSTRAINT %I;',
    constraint_name,
    table_schema,
    table_schema,
    table_name,
    constraint_name
  ) AS constraint_check
  FROM information_schema.table_constraints WHERE constraint_type = 'FOREIGN KEY'
)
  LOOP
    EXECUTE (r.constraint_check);
  END LOOP;
END;
$$;
[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------
ItemsControllerTest: test_should_get_index
------------------------------------------
Started GET "/items/index" for 127.0.0.1 at 2023-05-12 21:01:44 -0400
Processing by ItemsController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering items/index.html.erb within layouts/application
  Rendered items/index.html.erb within layouts/application (Duration: 0.6ms | Allocations: 290)
  Rendered layout layouts/application.html.erb (Duration: 15.3ms | Allocations: 2194)
Completed 500 Internal Server Error in 22ms (ActiveRecord: 0.0ms | Allocations: 5267)
  [1m[36mTRANSACTION (1.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------
RestaurantsControllerTest: test_should_get_index
------------------------------------------------
Started GET "/restaurants/index" for 127.0.0.1 at 2023-05-12 21:01:44 -0400
Processing by RestaurantsController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering restaurants/index.html.erb within layouts/application
  Rendered restaurants/index.html.erb within layouts/application (Duration: 0.4ms | Allocations: 103)
  Rendered layout layouts/application.html.erb (Duration: 1.5ms | Allocations: 1050)
Completed 500 Internal Server Error in 6ms (ActiveRecord: 0.0ms | Allocations: 1669)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------
RoutesTest: test_should_route_to_items_index
--------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------
RoutesTest: test_should_route_to_dishes_index
---------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------
RoutesTest: test_should_route_to_items_show
-------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------
RoutesTest: test_should_route_to_restaurants_index
--------------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------
RoutesTest: test_should_route_to_restaurants_show
-------------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------
RoutesTest: test_should_route_to_dishes_show
--------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------
DishTest: test_should_have_many_items
-------------------------------------
  [1m[36mDish Load (0.2ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."name" = $1 LIMIT $2[0m  [["name", "Dessert"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------
DishTest: test_should_validate_presence_of_name_at_db_level
-----------------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------
DishTest: test_should_load_fixtures_correctly
---------------------------------------------
  [1m[36mDish Load (0.2ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."name" = $1 LIMIT $2[0m  [["name", "Dessert"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------
DishTest: test_should_validate_presence_of_name_at_model_level
--------------------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------
ItemTest: test_should_load_fixtures_correctly
---------------------------------------------
  [1m[36mItem Load (0.2ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."name" = $1 LIMIT $2[0m  [["name", "Hamburguesa"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------
ItemTest: test_should_validate_presence_of_callories_at_model_level
-------------------------------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------
ItemTest: test_should_validate_presence_of_name_at_model_level
--------------------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------
ItemTest: test_should_validate_presence_of_price_at_db_level
------------------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------
ItemTest: test_should_validate_presence_of_callories_at_db_level
----------------------------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------
ItemTest: test_item_belongs_to_a_dish
-------------------------------------
  [1m[36mItem Load (0.2ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."name" = $1 LIMIT $2[0m  [["name", "Hamburguesa"], ["LIMIT", 1]]
  [1m[36mDish Load (0.2ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."id" = $1 LIMIT $2[0m  [["id", 509217612], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------
ItemTest: test_should_validate_presence_of_name_at_db_level
-----------------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------
ItemTest: test_should_validate_presence_of_price_at_model_level
---------------------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------
ItemTest: test_item_belongs_to_a_restaurant
-------------------------------------------
  [1m[36mItem Load (0.2ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."name" = $1 LIMIT $2[0m  [["name", "Hamburguesa"], ["LIMIT", 1]]
  [1m[36mRestaurant Load (0.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 648827877], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------
DishesControllerTest: test_should_get_index
-------------------------------------------
Started GET "/dishes/index" for 127.0.0.1 at 2023-05-12 21:01:44 -0400
Processing by DishesController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering dishes/index.html.erb within layouts/application
  Rendered dishes/index.html.erb within layouts/application (Duration: 0.3ms | Allocations: 106)
  Rendered layout layouts/application.html.erb (Duration: 1.3ms | Allocations: 1078)
Completed 500 Internal Server Error in 3ms (ActiveRecord: 0.0ms | Allocations: 1648)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------
RestaurantTest: test_should_validate_presence_of_address_at_db_level
--------------------------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------
RestaurantTest: test_should_have_many_items
-------------------------------------------
  [1m[36mRestaurant Load (0.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."name" = $1 LIMIT $2[0m  [["name", "NcDonalds"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------------
RestaurantTest: test_should_validate_presence_of_address_at_model_level
-----------------------------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------
RestaurantTest: test_should_validate_presence_of_name_at_db_level
-----------------------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------
RestaurantTest: test_should_validate_presence_of_name_at_model_level
--------------------------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------
RestaurantTest: test_should_load_fixtures_correctly
---------------------------------------------------
  [1m[36mRestaurant Load (0.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."name" = $1 LIMIT $2[0m  [["name", "NcDonalds"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (0.3ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "schema_sha1"], ["LIMIT", 1]]
  [1m[36mActiveRecord::SchemaMigration Pluck (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "dishes" DISABLE TRIGGER ALL;ALTER TABLE "items" DISABLE TRIGGER ALL;ALTER TABLE "restaurants" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.7ms)[0m  [1m[31mDELETE FROM "dishes";
DELETE FROM "items";
DELETE FROM "restaurants";
INSERT INTO "dishes" ("id", "name", "created_at", "updated_at") VALUES (122903280, 'Appetizer', '2023-05-13 01:02:16.505763', '2023-05-13 01:02:16.505763'), (509217612, 'Main Course', '2023-05-13 01:02:16.505763', '2023-05-13 01:02:16.505763'), (693976031, 'Dessert', '2023-05-13 01:02:16.505763', '2023-05-13 01:02:16.505763');
INSERT INTO "items" ("id", "name", "price", "callories", "created_at", "updated_at", "restaurant_id", "dish_id") VALUES (920592244, 'Pan', 1000, 150, '2023-05-13 01:02:16.532808', '2023-05-13 01:02:16.532808', 648827877, 122903280), (802574032, 'Hamburguesa', 1500, 200, '2023-05-13 01:02:16.532808', '2023-05-13 01:02:16.532808', 648827877, 509217612), (416382555, 'Papa Frita', 1000, 300, '2023-05-13 01:02:16.532808', '2023-05-13 01:02:16.532808', 648827877, 693976031), (112585724, 'Lechuga', 200, 20, '2023-05-13 01:02:16.532808', '2023-05-13 01:02:16.532808', 1067778657, 122903280), (833805165, 'Tomate', 100, 50, '2023-05-13 01:02:16.532808', '2023-05-13 01:02:16.532808', 1067778657, 509217612), (683379417, 'Queso', 300, 200, '2023-05-13 01:02:16.532808', '2023-05-13 01:02:16.532808', 1067778657, 693976031), (532462148, 'Cebolla', 1000, 100, '2023-05-13 01:02:16.532808', '2023-05-13 01:02:16.532808', 144847564, 122903280), (251897809, 'Frutilla', 1000, 200, '2023-05-13 01:02:16.532808', '2023-05-13 01:02:16.532808', 144847564, 509217612), (939824966, 'Helado', 1000, 200, '2023-05-13 01:02:16.532808', '2023-05-13 01:02:16.532808', 144847564, 693976031);
INSERT INTO "restaurants" ("id", "name", "address", "created_at", "updated_at") VALUES (648827877, 'Nestizo', 'Viacura 4000', '2023-05-13 01:02:16.539363', '2023-05-13 01:02:16.539363'), (1067778657, 'NcDonalds', 'El Salto s/n', '2023-05-13 01:02:16.539363', '2023-05-13 01:02:16.539363'), (144847564, 'Huendis', 'Vitacura 2800', '2023-05-13 01:02:16.539363', '2023-05-13 01:02:16.539363')[0m
  [1m[36mTRANSACTION (6.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mALTER TABLE "dishes" ENABLE TRIGGER ALL;ALTER TABLE "items" ENABLE TRIGGER ALL;ALTER TABLE "restaurants" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (2.2ms)[0m  [1m[35mdo $$
  declare r record;
BEGIN
FOR r IN (
  SELECT FORMAT(
    'UPDATE pg_constraint SET convalidated=false WHERE conname = ''%I'' AND connamespace::regnamespace = ''%I''::regnamespace; ALTER TABLE %I.%I VALIDATE CONSTRAINT %I;',
    constraint_name,
    table_schema,
    table_schema,
    table_name,
    constraint_name
  ) AS constraint_check
  FROM information_schema.table_constraints WHERE constraint_type = 'FOREIGN KEY'
)
  LOOP
    EXECUTE (r.constraint_check);
  END LOOP;
END;
$$;
[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------
ItemTest: test_should_validate_presence_of_price_at_model_level
---------------------------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------
ItemTest: test_should_validate_presence_of_callories_at_db_level
----------------------------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------
ItemTest: test_should_validate_presence_of_price_at_db_level
------------------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------
ItemTest: test_should_validate_presence_of_name_at_db_level
-----------------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------
ItemTest: test_should_validate_presence_of_callories_at_model_level
-------------------------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------
ItemTest: test_should_validate_presence_of_name_at_model_level
--------------------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------
ItemTest: test_should_load_fixtures_correctly
---------------------------------------------
  [1m[36mItem Load (0.2ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."name" = $1 LIMIT $2[0m  [["name", "Hamburguesa"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------
ItemTest: test_item_belongs_to_a_restaurant
-------------------------------------------
  [1m[36mItem Load (0.2ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."name" = $1 LIMIT $2[0m  [["name", "Hamburguesa"], ["LIMIT", 1]]
  [1m[36mRestaurant Load (0.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 648827877], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------
ItemTest: test_item_belongs_to_a_dish
-------------------------------------
  [1m[36mItem Load (0.2ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."name" = $1 LIMIT $2[0m  [["name", "Hamburguesa"], ["LIMIT", 1]]
  [1m[36mDish Load (0.2ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."id" = $1 LIMIT $2[0m  [["id", 509217612], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------
RestaurantTest: test_should_validate_presence_of_name_at_db_level
-----------------------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------
RestaurantTest: test_should_validate_presence_of_name_at_model_level
--------------------------------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------------
RestaurantTest: test_should_validate_presence_of_address_at_model_level
-----------------------------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------
RestaurantTest: test_should_validate_presence_of_address_at_db_level
--------------------------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------
RestaurantTest: test_should_load_fixtures_correctly
---------------------------------------------------
  [1m[36mRestaurant Load (0.5ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."name" = $1 LIMIT $2[0m  [["name", "NcDonalds"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------
RestaurantTest: test_should_have_many_items
-------------------------------------------
  [1m[36mRestaurant Load (0.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."name" = $1 LIMIT $2[0m  [["name", "NcDonalds"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------
RestaurantsControllerTest: test_should_get_index
------------------------------------------------
Started GET "/restaurants/index" for 127.0.0.1 at 2023-05-12 21:02:16 -0400
Processing by RestaurantsController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering restaurants/index.html.erb within layouts/application
  Rendered restaurants/index.html.erb within layouts/application (Duration: 0.6ms | Allocations: 290)
  Rendered layouts/_navbar.html.erb (Duration: 2.1ms | Allocations: 763)
  Rendered layout layouts/application.html.erb (Duration: 4.0ms | Allocations: 1869)
Completed 500 Internal Server Error in 10ms (ActiveRecord: 0.0ms | Allocations: 4889)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------
DishesControllerTest: test_should_get_index
-------------------------------------------
Started GET "/dishes/index" for 127.0.0.1 at 2023-05-12 21:02:16 -0400
Processing by DishesController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering dishes/index.html.erb within layouts/application
  Rendered dishes/index.html.erb within layouts/application (Duration: 0.3ms | Allocations: 103)
  Rendered layouts/_navbar.html.erb (Duration: 0.3ms | Allocations: 162)
  Rendered layout layouts/application.html.erb (Duration: 1.1ms | Allocations: 589)
Completed 500 Internal Server Error in 3ms (ActiveRecord: 0.0ms | Allocations: 1160)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------
RoutesTest: test_should_route_to_restaurants_index
--------------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------
RoutesTest: test_should_route_to_restaurants_show
-------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------
RoutesTest: test_should_route_to_items_show
-------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------
RoutesTest: test_should_route_to_items_index
--------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------
RoutesTest: test_should_route_to_dishes_show
--------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------
RoutesTest: test_should_route_to_dishes_index
---------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------
DishTest: test_should_validate_presence_of_name_at_db_level
-----------------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------
DishTest: test_should_validate_presence_of_name_at_model_level
--------------------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------
DishTest: test_should_load_fixtures_correctly
---------------------------------------------
  [1m[36mDish Load (0.2ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."name" = $1 LIMIT $2[0m  [["name", "Dessert"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------
DishTest: test_should_have_many_items
-------------------------------------
  [1m[36mDish Load (0.2ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."name" = $1 LIMIT $2[0m  [["name", "Dessert"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------
ItemsControllerTest: test_should_get_index
------------------------------------------
Started GET "/items/index" for 127.0.0.1 at 2023-05-12 21:02:16 -0400
Processing by ItemsController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering items/index.html.erb within layouts/application
  Rendered items/index.html.erb within layouts/application (Duration: 0.3ms | Allocations: 106)
  Rendered layouts/_navbar.html.erb (Duration: 0.2ms | Allocations: 162)
  Rendered layout layouts/application.html.erb (Duration: 1.1ms | Allocations: 592)
Completed 500 Internal Server Error in 3ms (ActiveRecord: 0.0ms | Allocations: 1161)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (0.3ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "schema_sha1"], ["LIMIT", 1]]
  [1m[36mActiveRecord::SchemaMigration Pluck (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "dishes" DISABLE TRIGGER ALL;ALTER TABLE "items" DISABLE TRIGGER ALL;ALTER TABLE "restaurants" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.7ms)[0m  [1m[31mDELETE FROM "dishes";
DELETE FROM "items";
DELETE FROM "restaurants";
INSERT INTO "dishes" ("id", "name", "created_at", "updated_at") VALUES (122903280, 'Appetizer', '2023-05-13 01:03:38.506449', '2023-05-13 01:03:38.506449'), (509217612, 'Main Course', '2023-05-13 01:03:38.506449', '2023-05-13 01:03:38.506449'), (693976031, 'Dessert', '2023-05-13 01:03:38.506449', '2023-05-13 01:03:38.506449');
INSERT INTO "items" ("id", "name", "price", "callories", "created_at", "updated_at", "restaurant_id", "dish_id") VALUES (920592244, 'Pan', 1000, 150, '2023-05-13 01:03:38.526771', '2023-05-13 01:03:38.526771', 648827877, 122903280), (802574032, 'Hamburguesa', 1500, 200, '2023-05-13 01:03:38.526771', '2023-05-13 01:03:38.526771', 648827877, 509217612), (416382555, 'Papa Frita', 1000, 300, '2023-05-13 01:03:38.526771', '2023-05-13 01:03:38.526771', 648827877, 693976031), (112585724, 'Lechuga', 200, 20, '2023-05-13 01:03:38.526771', '2023-05-13 01:03:38.526771', 1067778657, 122903280), (833805165, 'Tomate', 100, 50, '2023-05-13 01:03:38.526771', '2023-05-13 01:03:38.526771', 1067778657, 509217612), (683379417, 'Queso', 300, 200, '2023-05-13 01:03:38.526771', '2023-05-13 01:03:38.526771', 1067778657, 693976031), (532462148, 'Cebolla', 1000, 100, '2023-05-13 01:03:38.526771', '2023-05-13 01:03:38.526771', 144847564, 122903280), (251897809, 'Frutilla', 1000, 200, '2023-05-13 01:03:38.526771', '2023-05-13 01:03:38.526771', 144847564, 509217612), (939824966, 'Helado', 1000, 200, '2023-05-13 01:03:38.526771', '2023-05-13 01:03:38.526771', 144847564, 693976031);
INSERT INTO "restaurants" ("id", "name", "address", "created_at", "updated_at") VALUES (648827877, 'Nestizo', 'Viacura 4000', '2023-05-13 01:03:38.532194', '2023-05-13 01:03:38.532194'), (1067778657, 'NcDonalds', 'El Salto s/n', '2023-05-13 01:03:38.532194', '2023-05-13 01:03:38.532194'), (144847564, 'Huendis', 'Vitacura 2800', '2023-05-13 01:03:38.532194', '2023-05-13 01:03:38.532194')[0m
  [1m[36mTRANSACTION (6.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "dishes" ENABLE TRIGGER ALL;ALTER TABLE "items" ENABLE TRIGGER ALL;ALTER TABLE "restaurants" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (2.5ms)[0m  [1m[35mdo $$
  declare r record;
BEGIN
FOR r IN (
  SELECT FORMAT(
    'UPDATE pg_constraint SET convalidated=false WHERE conname = ''%I'' AND connamespace::regnamespace = ''%I''::regnamespace; ALTER TABLE %I.%I VALIDATE CONSTRAINT %I;',
    constraint_name,
    table_schema,
    table_schema,
    table_name,
    constraint_name
  ) AS constraint_check
  FROM information_schema.table_constraints WHERE constraint_type = 'FOREIGN KEY'
)
  LOOP
    EXECUTE (r.constraint_check);
  END LOOP;
END;
$$;
[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------
DishesControllerTest: test_should_get_index
-------------------------------------------
Started GET "/dishes/index" for 127.0.0.1 at 2023-05-12 21:03:38 -0400
Processing by DishesController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering dishes/index.html.erb within layouts/application
  Rendered dishes/index.html.erb within layouts/application (Duration: 0.7ms | Allocations: 290)
  Rendered layouts/_navbar.html.erb (Duration: 1.5ms | Allocations: 763)
  Rendered layout layouts/application.html.erb (Duration: 3.8ms | Allocations: 1869)
Completed 500 Internal Server Error in 11ms (ActiveRecord: 0.0ms | Allocations: 4942)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------
ItemsControllerTest: test_should_get_index
------------------------------------------
Started GET "/items/index" for 127.0.0.1 at 2023-05-12 21:03:38 -0400
Processing by ItemsController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering items/index.html.erb within layouts/application
  Rendered items/index.html.erb within layouts/application (Duration: 0.4ms | Allocations: 103)
  Rendered layouts/_navbar.html.erb (Duration: 0.3ms | Allocations: 162)
  Rendered layout layouts/application.html.erb (Duration: 1.3ms | Allocations: 589)
Completed 500 Internal Server Error in 3ms (ActiveRecord: 0.0ms | Allocations: 1203)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------
ItemTest: test_should_validate_presence_of_callories_at_model_level
-------------------------------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------
ItemTest: test_item_belongs_to_a_restaurant
-------------------------------------------
  [1m[36mItem Load (0.3ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."name" = $1 LIMIT $2[0m  [["name", "Hamburguesa"], ["LIMIT", 1]]
  [1m[36mRestaurant Load (0.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 648827877], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------
ItemTest: test_should_validate_presence_of_name_at_model_level
--------------------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------
ItemTest: test_should_validate_presence_of_price_at_model_level
---------------------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------
ItemTest: test_should_validate_presence_of_callories_at_db_level
----------------------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------
ItemTest: test_should_validate_presence_of_name_at_db_level
-----------------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------
ItemTest: test_should_load_fixtures_correctly
---------------------------------------------
  [1m[36mItem Load (0.2ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."name" = $1 LIMIT $2[0m  [["name", "Hamburguesa"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------
ItemTest: test_should_validate_presence_of_price_at_db_level
------------------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------
ItemTest: test_item_belongs_to_a_dish
-------------------------------------
  [1m[36mItem Load (0.3ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."name" = $1 LIMIT $2[0m  [["name", "Hamburguesa"], ["LIMIT", 1]]
  [1m[36mDish Load (0.3ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."id" = $1 LIMIT $2[0m  [["id", 509217612], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------
DishTest: test_should_validate_presence_of_name_at_db_level
-----------------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------
DishTest: test_should_load_fixtures_correctly
---------------------------------------------
  [1m[36mDish Load (0.2ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."name" = $1 LIMIT $2[0m  [["name", "Dessert"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------
DishTest: test_should_have_many_items
-------------------------------------
  [1m[36mDish Load (0.2ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."name" = $1 LIMIT $2[0m  [["name", "Dessert"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------
DishTest: test_should_validate_presence_of_name_at_model_level
--------------------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------
RoutesTest: test_should_route_to_restaurants_index
--------------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------
RoutesTest: test_should_route_to_items_show
-------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------
RoutesTest: test_should_route_to_restaurants_show
-------------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------
RoutesTest: test_should_route_to_dishes_show
--------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------
RoutesTest: test_should_route_to_items_index
--------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------
RoutesTest: test_should_route_to_dishes_index
---------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------
RestaurantsControllerTest: test_should_get_index
------------------------------------------------
Started GET "/restaurants/index" for 127.0.0.1 at 2023-05-12 21:03:38 -0400
Processing by RestaurantsController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering restaurants/index.html.erb within layouts/application
  Rendered restaurants/index.html.erb within layouts/application (Duration: 0.3ms | Allocations: 106)
  Rendered layouts/_navbar.html.erb (Duration: 0.3ms | Allocations: 162)
  Rendered layout layouts/application.html.erb (Duration: 1.8ms | Allocations: 592)
Completed 500 Internal Server Error in 4ms (ActiveRecord: 0.0ms | Allocations: 1167)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------
RestaurantTest: test_should_validate_presence_of_name_at_db_level
-----------------------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------------
RestaurantTest: test_should_validate_presence_of_address_at_model_level
-----------------------------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------
RestaurantTest: test_should_validate_presence_of_name_at_model_level
--------------------------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------
RestaurantTest: test_should_load_fixtures_correctly
---------------------------------------------------
  [1m[36mRestaurant Load (0.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."name" = $1 LIMIT $2[0m  [["name", "NcDonalds"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------
RestaurantTest: test_should_validate_presence_of_address_at_db_level
--------------------------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------
RestaurantTest: test_should_have_many_items
-------------------------------------------
  [1m[36mRestaurant Load (0.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."name" = $1 LIMIT $2[0m  [["name", "NcDonalds"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (0.3ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "schema_sha1"], ["LIMIT", 1]]
  [1m[36mActiveRecord::SchemaMigration Pluck (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "dishes" DISABLE TRIGGER ALL;ALTER TABLE "items" DISABLE TRIGGER ALL;ALTER TABLE "restaurants" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.7ms)[0m  [1m[31mDELETE FROM "dishes";
DELETE FROM "items";
DELETE FROM "restaurants";
INSERT INTO "dishes" ("id", "name", "created_at", "updated_at") VALUES (122903280, 'Appetizer', '2023-05-13 01:04:49.438195', '2023-05-13 01:04:49.438195'), (509217612, 'Main Course', '2023-05-13 01:04:49.438195', '2023-05-13 01:04:49.438195'), (693976031, 'Dessert', '2023-05-13 01:04:49.438195', '2023-05-13 01:04:49.438195');
INSERT INTO "items" ("id", "name", "price", "callories", "created_at", "updated_at", "restaurant_id", "dish_id") VALUES (920592244, 'Pan', 1000, 150, '2023-05-13 01:04:49.442529', '2023-05-13 01:04:49.442529', 648827877, 122903280), (802574032, 'Hamburguesa', 1500, 200, '2023-05-13 01:04:49.442529', '2023-05-13 01:04:49.442529', 648827877, 509217612), (416382555, 'Papa Frita', 1000, 300, '2023-05-13 01:04:49.442529', '2023-05-13 01:04:49.442529', 648827877, 693976031), (112585724, 'Lechuga', 200, 20, '2023-05-13 01:04:49.442529', '2023-05-13 01:04:49.442529', 1067778657, 122903280), (833805165, 'Tomate', 100, 50, '2023-05-13 01:04:49.442529', '2023-05-13 01:04:49.442529', 1067778657, 509217612), (683379417, 'Queso', 300, 200, '2023-05-13 01:04:49.442529', '2023-05-13 01:04:49.442529', 1067778657, 693976031), (532462148, 'Cebolla', 1000, 100, '2023-05-13 01:04:49.442529', '2023-05-13 01:04:49.442529', 144847564, 122903280), (251897809, 'Frutilla', 1000, 200, '2023-05-13 01:04:49.442529', '2023-05-13 01:04:49.442529', 144847564, 509217612), (939824966, 'Helado', 1000, 200, '2023-05-13 01:04:49.442529', '2023-05-13 01:04:49.442529', 144847564, 693976031);
INSERT INTO "restaurants" ("id", "name", "address", "created_at", "updated_at") VALUES (648827877, 'Nestizo', 'Viacura 4000', '2023-05-13 01:04:49.447933', '2023-05-13 01:04:49.447933'), (1067778657, 'NcDonalds', 'El Salto s/n', '2023-05-13 01:04:49.447933', '2023-05-13 01:04:49.447933'), (144847564, 'Huendis', 'Vitacura 2800', '2023-05-13 01:04:49.447933', '2023-05-13 01:04:49.447933')[0m
  [1m[36mTRANSACTION (6.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "dishes" ENABLE TRIGGER ALL;ALTER TABLE "items" ENABLE TRIGGER ALL;ALTER TABLE "restaurants" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (2.2ms)[0m  [1m[35mdo $$
  declare r record;
BEGIN
FOR r IN (
  SELECT FORMAT(
    'UPDATE pg_constraint SET convalidated=false WHERE conname = ''%I'' AND connamespace::regnamespace = ''%I''::regnamespace; ALTER TABLE %I.%I VALIDATE CONSTRAINT %I;',
    constraint_name,
    table_schema,
    table_schema,
    table_name,
    constraint_name
  ) AS constraint_check
  FROM information_schema.table_constraints WHERE constraint_type = 'FOREIGN KEY'
)
  LOOP
    EXECUTE (r.constraint_check);
  END LOOP;
END;
$$;
[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------
RestaurantsControllerTest: test_should_get_index
------------------------------------------------
Started GET "/restaurants/index" for 127.0.0.1 at 2023-05-12 21:04:49 -0400
Processing by RestaurantsController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering restaurants/index.html.erb within layouts/application
  Rendered restaurants/index.html.erb within layouts/application (Duration: 0.7ms | Allocations: 290)
  Rendered layouts/_navbar.html.erb (Duration: 1.5ms | Allocations: 763)
  Rendered layout layouts/application.html.erb (Duration: 3.6ms | Allocations: 1869)
Completed 500 Internal Server Error in 11ms (ActiveRecord: 0.0ms | Allocations: 4947)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------
ItemsControllerTest: test_should_get_index
------------------------------------------
Started GET "/items/index" for 127.0.0.1 at 2023-05-12 21:04:49 -0400
Processing by ItemsController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering items/index.html.erb within layouts/application
  Rendered items/index.html.erb within layouts/application (Duration: 0.3ms | Allocations: 103)
  Rendered layouts/_navbar.html.erb (Duration: 0.3ms | Allocations: 162)
  Rendered layout layouts/application.html.erb (Duration: 1.3ms | Allocations: 589)
Completed 500 Internal Server Error in 3ms (ActiveRecord: 0.0ms | Allocations: 1203)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------
ItemTest: test_should_validate_presence_of_name_at_db_level
-----------------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------
ItemTest: test_should_validate_presence_of_callories_at_db_level
----------------------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------
ItemTest: test_item_belongs_to_a_restaurant
-------------------------------------------
  [1m[36mItem Load (0.2ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."name" = $1 LIMIT $2[0m  [["name", "Hamburguesa"], ["LIMIT", 1]]
  [1m[36mRestaurant Load (0.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 648827877], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------
ItemTest: test_item_belongs_to_a_dish
-------------------------------------
  [1m[36mItem Load (0.2ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."name" = $1 LIMIT $2[0m  [["name", "Hamburguesa"], ["LIMIT", 1]]
  [1m[36mDish Load (0.2ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."id" = $1 LIMIT $2[0m  [["id", 509217612], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------
ItemTest: test_should_validate_presence_of_callories_at_model_level
-------------------------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------
ItemTest: test_should_load_fixtures_correctly
---------------------------------------------
  [1m[36mItem Load (0.5ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."name" = $1 LIMIT $2[0m  [["name", "Hamburguesa"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------
ItemTest: test_should_validate_presence_of_name_at_model_level
--------------------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------
ItemTest: test_should_validate_presence_of_price_at_db_level
------------------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------
ItemTest: test_should_validate_presence_of_price_at_model_level
---------------------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------
DishTest: test_should_load_fixtures_correctly
---------------------------------------------
  [1m[36mDish Load (0.2ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."name" = $1 LIMIT $2[0m  [["name", "Dessert"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------
DishTest: test_should_validate_presence_of_name_at_model_level
--------------------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------
DishTest: test_should_validate_presence_of_name_at_db_level
-----------------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------
DishTest: test_should_have_many_items
-------------------------------------
  [1m[36mDish Load (0.2ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."name" = $1 LIMIT $2[0m  [["name", "Dessert"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------
RoutesTest: test_should_route_to_restaurants_index
--------------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------
RoutesTest: test_should_route_to_dishes_show
--------------------------------------------
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------
RoutesTest: test_should_route_to_items_show
-------------------------------------------
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------
RoutesTest: test_should_route_to_restaurants_show
-------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------
RoutesTest: test_should_route_to_items_index
--------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------
RoutesTest: test_should_route_to_dishes_index
---------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------
RestaurantTest: test_should_validate_presence_of_name_at_db_level
-----------------------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------
RestaurantTest: test_should_load_fixtures_correctly
---------------------------------------------------
  [1m[36mRestaurant Load (0.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."name" = $1 LIMIT $2[0m  [["name", "NcDonalds"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------------
RestaurantTest: test_should_validate_presence_of_address_at_model_level
-----------------------------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------
RestaurantTest: test_should_validate_presence_of_name_at_model_level
--------------------------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------
RestaurantTest: test_should_validate_presence_of_address_at_db_level
--------------------------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------
RestaurantTest: test_should_have_many_items
-------------------------------------------
  [1m[36mRestaurant Load (0.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."name" = $1 LIMIT $2[0m  [["name", "NcDonalds"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------
DishesControllerTest: test_should_get_index
-------------------------------------------
Started GET "/dishes/index" for 127.0.0.1 at 2023-05-12 21:04:49 -0400
Processing by DishesController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering dishes/index.html.erb within layouts/application
  Rendered dishes/index.html.erb within layouts/application (Duration: 0.6ms | Allocations: 106)
  Rendered layouts/_navbar.html.erb (Duration: 0.3ms | Allocations: 162)
  Rendered layout layouts/application.html.erb (Duration: 1.5ms | Allocations: 592)
Completed 500 Internal Server Error in 3ms (ActiveRecord: 0.0ms | Allocations: 1161)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (0.3ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "schema_sha1"], ["LIMIT", 1]]
  [1m[36mActiveRecord::SchemaMigration Pluck (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "dishes" DISABLE TRIGGER ALL;ALTER TABLE "items" DISABLE TRIGGER ALL;ALTER TABLE "restaurants" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.7ms)[0m  [1m[31mDELETE FROM "dishes";
DELETE FROM "items";
DELETE FROM "restaurants";
INSERT INTO "dishes" ("id", "name", "created_at", "updated_at") VALUES (122903280, 'Appetizer', '2023-05-13 01:05:44.747989', '2023-05-13 01:05:44.747989'), (509217612, 'Main Course', '2023-05-13 01:05:44.747989', '2023-05-13 01:05:44.747989'), (693976031, 'Dessert', '2023-05-13 01:05:44.747989', '2023-05-13 01:05:44.747989');
INSERT INTO "items" ("id", "name", "price", "callories", "created_at", "updated_at", "restaurant_id", "dish_id") VALUES (920592244, 'Pan', 1000, 150, '2023-05-13 01:05:44.767349', '2023-05-13 01:05:44.767349', 648827877, 122903280), (802574032, 'Hamburguesa', 1500, 200, '2023-05-13 01:05:44.767349', '2023-05-13 01:05:44.767349', 648827877, 509217612), (416382555, 'Papa Frita', 1000, 300, '2023-05-13 01:05:44.767349', '2023-05-13 01:05:44.767349', 648827877, 693976031), (112585724, 'Lechuga', 200, 20, '2023-05-13 01:05:44.767349', '2023-05-13 01:05:44.767349', 1067778657, 122903280), (833805165, 'Tomate', 100, 50, '2023-05-13 01:05:44.767349', '2023-05-13 01:05:44.767349', 1067778657, 509217612), (683379417, 'Queso', 300, 200, '2023-05-13 01:05:44.767349', '2023-05-13 01:05:44.767349', 1067778657, 693976031), (532462148, 'Cebolla', 1000, 100, '2023-05-13 01:05:44.767349', '2023-05-13 01:05:44.767349', 144847564, 122903280), (251897809, 'Frutilla', 1000, 200, '2023-05-13 01:05:44.767349', '2023-05-13 01:05:44.767349', 144847564, 509217612), (939824966, 'Helado', 1000, 200, '2023-05-13 01:05:44.767349', '2023-05-13 01:05:44.767349', 144847564, 693976031);
INSERT INTO "restaurants" ("id", "name", "address", "created_at", "updated_at") VALUES (648827877, 'Nestizo', 'Viacura 4000', '2023-05-13 01:05:44.772705', '2023-05-13 01:05:44.772705'), (1067778657, 'NcDonalds', 'El Salto s/n', '2023-05-13 01:05:44.772705', '2023-05-13 01:05:44.772705'), (144847564, 'Huendis', 'Vitacura 2800', '2023-05-13 01:05:44.772705', '2023-05-13 01:05:44.772705')[0m
  [1m[36mTRANSACTION (6.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mALTER TABLE "dishes" ENABLE TRIGGER ALL;ALTER TABLE "items" ENABLE TRIGGER ALL;ALTER TABLE "restaurants" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (2.2ms)[0m  [1m[35mdo $$
  declare r record;
BEGIN
FOR r IN (
  SELECT FORMAT(
    'UPDATE pg_constraint SET convalidated=false WHERE conname = ''%I'' AND connamespace::regnamespace = ''%I''::regnamespace; ALTER TABLE %I.%I VALIDATE CONSTRAINT %I;',
    constraint_name,
    table_schema,
    table_schema,
    table_name,
    constraint_name
  ) AS constraint_check
  FROM information_schema.table_constraints WHERE constraint_type = 'FOREIGN KEY'
)
  LOOP
    EXECUTE (r.constraint_check);
  END LOOP;
END;
$$;
[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------
RestaurantTest: test_should_have_many_items
-------------------------------------------
  [1m[36mRestaurant Load (0.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."name" = $1 LIMIT $2[0m  [["name", "NcDonalds"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------
RestaurantTest: test_should_validate_presence_of_name_at_model_level
--------------------------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------
RestaurantTest: test_should_validate_presence_of_name_at_db_level
-----------------------------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------
RestaurantTest: test_should_load_fixtures_correctly
---------------------------------------------------
  [1m[36mRestaurant Load (0.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."name" = $1 LIMIT $2[0m  [["name", "NcDonalds"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------------
RestaurantTest: test_should_validate_presence_of_address_at_model_level
-----------------------------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------
RestaurantTest: test_should_validate_presence_of_address_at_db_level
--------------------------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------
DishesControllerTest: test_should_get_index
-------------------------------------------
Started GET "/dishes/index" for 127.0.0.1 at 2023-05-12 21:05:44 -0400
Processing by DishesController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering dishes/index.html.erb within layouts/application
  Rendered dishes/index.html.erb within layouts/application (Duration: 0.8ms | Allocations: 290)
  Rendered layout layouts/application.html.erb (Duration: 2.0ms | Allocations: 953)
Completed 200 OK in 9ms (Views: 4.3ms | ActiveRecord: 0.0ms | Allocations: 4073)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------
ItemTest: test_should_validate_presence_of_price_at_model_level
---------------------------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------
ItemTest: test_item_belongs_to_a_restaurant
-------------------------------------------
  [1m[36mItem Load (0.3ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."name" = $1 LIMIT $2[0m  [["name", "Hamburguesa"], ["LIMIT", 1]]
  [1m[36mRestaurant Load (0.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 648827877], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------
ItemTest: test_should_validate_presence_of_price_at_db_level
------------------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------
ItemTest: test_should_validate_presence_of_callories_at_model_level
-------------------------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------
ItemTest: test_item_belongs_to_a_dish
-------------------------------------
  [1m[36mItem Load (0.3ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."name" = $1 LIMIT $2[0m  [["name", "Hamburguesa"], ["LIMIT", 1]]
  [1m[36mDish Load (0.3ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."id" = $1 LIMIT $2[0m  [["id", 509217612], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------
ItemTest: test_should_validate_presence_of_name_at_model_level
--------------------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------
ItemTest: test_should_validate_presence_of_name_at_db_level
-----------------------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------
ItemTest: test_should_validate_presence_of_callories_at_db_level
----------------------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------
ItemTest: test_should_load_fixtures_correctly
---------------------------------------------
  [1m[36mItem Load (0.2ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."name" = $1 LIMIT $2[0m  [["name", "Hamburguesa"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------
ItemsControllerTest: test_should_get_index
------------------------------------------
Started GET "/items/index" for 127.0.0.1 at 2023-05-12 21:05:44 -0400
Processing by ItemsController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering items/index.html.erb within layouts/application
  Rendered items/index.html.erb within layouts/application (Duration: 0.4ms | Allocations: 103)
  Rendered layout layouts/application.html.erb (Duration: 1.0ms | Allocations: 390)
Completed 200 OK in 3ms (Views: 2.6ms | ActiveRecord: 0.0ms | Allocations: 986)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------
RoutesTest: test_should_route_to_dishes_index
---------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------
RoutesTest: test_should_route_to_restaurants_show
-------------------------------------------------
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------
RoutesTest: test_should_route_to_restaurants_index
--------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------
RoutesTest: test_should_route_to_dishes_show
--------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------
RoutesTest: test_should_route_to_items_show
-------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------
RoutesTest: test_should_route_to_items_index
--------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------
DishTest: test_should_have_many_items
-------------------------------------
  [1m[36mDish Load (0.2ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."name" = $1 LIMIT $2[0m  [["name", "Dessert"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------
DishTest: test_should_validate_presence_of_name_at_model_level
--------------------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------
DishTest: test_should_load_fixtures_correctly
---------------------------------------------
  [1m[36mDish Load (0.2ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."name" = $1 LIMIT $2[0m  [["name", "Dessert"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------
DishTest: test_should_validate_presence_of_name_at_db_level
-----------------------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------
RestaurantsControllerTest: test_should_get_index
------------------------------------------------
Started GET "/restaurants/index" for 127.0.0.1 at 2023-05-12 21:05:45 -0400
Processing by RestaurantsController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering restaurants/index.html.erb within layouts/application
  Rendered restaurants/index.html.erb within layouts/application (Duration: 0.3ms | Allocations: 106)
  Rendered layout layouts/application.html.erb (Duration: 0.8ms | Allocations: 393)
Completed 200 OK in 2ms (Views: 1.9ms | ActiveRecord: 0.0ms | Allocations: 994)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (0.3ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "schema_sha1"], ["LIMIT", 1]]
  [1m[36mActiveRecord::SchemaMigration Pluck (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "dishes" DISABLE TRIGGER ALL;ALTER TABLE "items" DISABLE TRIGGER ALL;ALTER TABLE "restaurants" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.7ms)[0m  [1m[31mDELETE FROM "dishes";
DELETE FROM "items";
DELETE FROM "restaurants";
INSERT INTO "dishes" ("id", "name", "created_at", "updated_at") VALUES (122903280, 'Appetizer', '2023-05-13 02:36:55.492060', '2023-05-13 02:36:55.492060'), (509217612, 'Main Course', '2023-05-13 02:36:55.492060', '2023-05-13 02:36:55.492060'), (693976031, 'Dessert', '2023-05-13 02:36:55.492060', '2023-05-13 02:36:55.492060');
INSERT INTO "items" ("id", "name", "price", "callories", "created_at", "updated_at", "restaurant_id", "dish_id") VALUES (920592244, 'Pan', 1000, 150, '2023-05-13 02:36:55.513629', '2023-05-13 02:36:55.513629', 648827877, 122903280), (802574032, 'Hamburguesa', 1500, 200, '2023-05-13 02:36:55.513629', '2023-05-13 02:36:55.513629', 648827877, 509217612), (416382555, 'Papa Frita', 1000, 300, '2023-05-13 02:36:55.513629', '2023-05-13 02:36:55.513629', 648827877, 693976031), (112585724, 'Lechuga', 200, 20, '2023-05-13 02:36:55.513629', '2023-05-13 02:36:55.513629', 1067778657, 122903280), (833805165, 'Tomate', 100, 50, '2023-05-13 02:36:55.513629', '2023-05-13 02:36:55.513629', 1067778657, 509217612), (683379417, 'Queso', 300, 200, '2023-05-13 02:36:55.513629', '2023-05-13 02:36:55.513629', 1067778657, 693976031), (532462148, 'Cebolla', 1000, 100, '2023-05-13 02:36:55.513629', '2023-05-13 02:36:55.513629', 144847564, 122903280), (251897809, 'Frutilla', 1000, 200, '2023-05-13 02:36:55.513629', '2023-05-13 02:36:55.513629', 144847564, 509217612), (939824966, 'Helado', 1000, 200, '2023-05-13 02:36:55.513629', '2023-05-13 02:36:55.513629', 144847564, 693976031);
INSERT INTO "restaurants" ("id", "name", "address", "created_at", "updated_at") VALUES (648827877, 'Nestizo', 'Viacura 4000', '2023-05-13 02:36:55.518990', '2023-05-13 02:36:55.518990'), (1067778657, 'NcDonalds', 'El Salto s/n', '2023-05-13 02:36:55.518990', '2023-05-13 02:36:55.518990'), (144847564, 'Huendis', 'Vitacura 2800', '2023-05-13 02:36:55.518990', '2023-05-13 02:36:55.518990')[0m
  [1m[36mTRANSACTION (9.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mALTER TABLE "dishes" ENABLE TRIGGER ALL;ALTER TABLE "items" ENABLE TRIGGER ALL;ALTER TABLE "restaurants" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (2.2ms)[0m  [1m[35mdo $$
  declare r record;
BEGIN
FOR r IN (
  SELECT FORMAT(
    'UPDATE pg_constraint SET convalidated=false WHERE conname = ''%I'' AND connamespace::regnamespace = ''%I''::regnamespace; ALTER TABLE %I.%I VALIDATE CONSTRAINT %I;',
    constraint_name,
    table_schema,
    table_schema,
    table_name,
    constraint_name
  ) AS constraint_check
  FROM information_schema.table_constraints WHERE constraint_type = 'FOREIGN KEY'
)
  LOOP
    EXECUTE (r.constraint_check);
  END LOOP;
END;
$$;
[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------
RestaurantTest: test_should_validate_presence_of_address_at_db_level
--------------------------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------------
RestaurantTest: test_should_validate_presence_of_address_at_model_level
-----------------------------------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------
RestaurantTest: test_should_validate_presence_of_name_at_model_level
--------------------------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------
RestaurantTest: test_should_load_fixtures_correctly
---------------------------------------------------
  [1m[36mRestaurant Load (0.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."name" = $1 LIMIT $2[0m  [["name", "NcDonalds"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------
RestaurantTest: test_should_validate_presence_of_name_at_db_level
-----------------------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------
RestaurantTest: test_should_have_many_items
-------------------------------------------
  [1m[36mRestaurant Load (0.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."name" = $1 LIMIT $2[0m  [["name", "NcDonalds"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------
RestaurantsControllerTest: test_should_get_index
------------------------------------------------
Started GET "/restaurants/index" for 127.0.0.1 at 2023-05-12 22:36:55 -0400
Processing by RestaurantsController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering restaurants/index.html.erb within layouts/application
  Rendered restaurants/index.html.erb within layouts/application (Duration: 0.7ms | Allocations: 290)
  Rendered layout layouts/application.html.erb (Duration: 1.6ms | Allocations: 953)
Completed 200 OK in 8ms (Views: 3.7ms | ActiveRecord: 0.0ms | Allocations: 4029)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------
DishTest: test_should_validate_presence_of_name_at_db_level
-----------------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------
DishTest: test_should_load_fixtures_correctly
---------------------------------------------
  [1m[36mDish Load (0.2ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."name" = $1 LIMIT $2[0m  [["name", "Dessert"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------
DishTest: test_should_validate_presence_of_name_at_model_level
--------------------------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------
DishTest: test_should_have_many_items
-------------------------------------
  [1m[36mDish Load (0.2ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."name" = $1 LIMIT $2[0m  [["name", "Dessert"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------
ItemsControllerTest: test_should_get_index
------------------------------------------
Started GET "/items/index" for 127.0.0.1 at 2023-05-12 22:36:55 -0400
Processing by ItemsController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering items/index.html.erb within layouts/application
  Rendered items/index.html.erb within layouts/application (Duration: 0.3ms | Allocations: 103)
  Rendered layout layouts/application.html.erb (Duration: 1.2ms | Allocations: 390)
Completed 200 OK in 3ms (Views: 2.4ms | ActiveRecord: 0.0ms | Allocations: 1030)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------
ItemTest: test_should_validate_presence_of_price_at_model_level
---------------------------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------
ItemTest: test_should_validate_presence_of_name_at_db_level
-----------------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------
ItemTest: test_should_load_fixtures_correctly
---------------------------------------------
  [1m[36mItem Load (0.3ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."name" = $1 LIMIT $2[0m  [["name", "Hamburguesa"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------
ItemTest: test_should_validate_presence_of_callories_at_db_level
----------------------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------
ItemTest: test_should_validate_presence_of_name_at_model_level
--------------------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------
ItemTest: test_item_belongs_to_a_restaurant
-------------------------------------------
  [1m[36mItem Load (0.2ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."name" = $1 LIMIT $2[0m  [["name", "Hamburguesa"], ["LIMIT", 1]]
  [1m[36mRestaurant Load (0.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 648827877], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------
ItemTest: test_should_validate_presence_of_callories_at_model_level
-------------------------------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------
ItemTest: test_should_validate_presence_of_price_at_db_level
------------------------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------
ItemTest: test_item_belongs_to_a_dish
-------------------------------------
  [1m[36mItem Load (0.2ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."name" = $1 LIMIT $2[0m  [["name", "Hamburguesa"], ["LIMIT", 1]]
  [1m[36mDish Load (0.2ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."id" = $1 LIMIT $2[0m  [["id", 509217612], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------
DishesControllerTest: test_should_get_index
-------------------------------------------
Started GET "/dishes/index" for 127.0.0.1 at 2023-05-12 22:36:55 -0400
Processing by DishesController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering dishes/index.html.erb within layouts/application
  Rendered dishes/index.html.erb within layouts/application (Duration: 0.3ms | Allocations: 106)
  Rendered layout layouts/application.html.erb (Duration: 2.0ms | Allocations: 393)
Completed 200 OK in 4ms (Views: 3.2ms | ActiveRecord: 0.0ms | Allocations: 989)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------
RoutesTest: test_should_route_to_items_index
--------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------
RoutesTest: test_should_route_to_items_show
-------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------
RoutesTest: test_should_route_to_restaurants_show
-------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------
RoutesTest: test_should_route_to_dishes_show
--------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------
RoutesTest: test_should_route_to_restaurants_index
--------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------
RoutesTest: test_should_route_to_dishes_index
---------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (1.3ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "schema_sha1"], ["LIMIT", 1]]
  [1m[36mActiveRecord::SchemaMigration Pluck (1.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (3.1ms)[0m  [1m[35mALTER TABLE "dishes" DISABLE TRIGGER ALL;ALTER TABLE "items" DISABLE TRIGGER ALL;ALTER TABLE "restaurants" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (9.7ms)[0m  [1m[31mDELETE FROM "dishes";
DELETE FROM "items";
DELETE FROM "restaurants";
INSERT INTO "dishes" ("id", "name", "created_at", "updated_at") VALUES (122903280, 'Appetizer', '2023-05-18 03:02:38.495217', '2023-05-18 03:02:38.495217'), (509217612, 'Main Course', '2023-05-18 03:02:38.495217', '2023-05-18 03:02:38.495217'), (693976031, 'Dessert', '2023-05-18 03:02:38.495217', '2023-05-18 03:02:38.495217');
INSERT INTO "items" ("id", "name", "price", "callories", "created_at", "updated_at", "restaurant_id", "dish_id") VALUES (920592244, 'Pan', 1000, 150, '2023-05-18 03:02:38.501994', '2023-05-18 03:02:38.501994', 648827877, 122903280), (802574032, 'Hamburguesa', 1500, 200, '2023-05-18 03:02:38.501994', '2023-05-18 03:02:38.501994', 648827877, 509217612), (416382555, 'Papa Frita', 1000, 300, '2023-05-18 03:02:38.501994', '2023-05-18 03:02:38.501994', 648827877, 693976031), (112585724, 'Lechuga', 200, 20, '2023-05-18 03:02:38.501994', '2023-05-18 03:02:38.501994', 1067778657, 122903280), (833805165, 'Tomate', 100, 50, '2023-05-18 03:02:38.501994', '2023-05-18 03:02:38.501994', 1067778657, 509217612), (683379417, 'Queso', 300, 200, '2023-05-18 03:02:38.501994', '2023-05-18 03:02:38.501994', 1067778657, 693976031), (532462148, 'Cebolla', 1000, 100, '2023-05-18 03:02:38.501994', '2023-05-18 03:02:38.501994', 144847564, 122903280), (251897809, 'Frutilla', 1000, 200, '2023-05-18 03:02:38.501994', '2023-05-18 03:02:38.501994', 144847564, 509217612), (939824966, 'Helado', 1000, 200, '2023-05-18 03:02:38.501994', '2023-05-18 03:02:38.501994', 144847564, 693976031);
INSERT INTO "restaurants" ("id", "name", "address", "created_at", "updated_at") VALUES (648827877, 'Nestizo', 'Viacura 4000', '2023-05-18 03:02:38.507726', '2023-05-18 03:02:38.507726'), (1067778657, 'NcDonalds', 'El Salto s/n', '2023-05-18 03:02:38.507726', '2023-05-18 03:02:38.507726'), (144847564, 'Huendis', 'Vitacura 2800', '2023-05-18 03:02:38.507726', '2023-05-18 03:02:38.507726')[0m
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "dishes" ENABLE TRIGGER ALL;ALTER TABLE "items" ENABLE TRIGGER ALL;ALTER TABLE "restaurants" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (10.1ms)[0m  [1m[35mdo $$
  declare r record;
BEGIN
FOR r IN (
  SELECT FORMAT(
    'UPDATE pg_constraint SET convalidated=false WHERE conname = ''%I'' AND connamespace::regnamespace = ''%I''::regnamespace; ALTER TABLE %I.%I VALIDATE CONSTRAINT %I;',
    constraint_name,
    table_schema,
    table_schema,
    table_name,
    constraint_name
  ) AS constraint_check
  FROM information_schema.table_constraints WHERE constraint_type = 'FOREIGN KEY'
)
  LOOP
    EXECUTE (r.constraint_check);
  END LOOP;
END;
$$;
[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------
ItemsControllerTest: test_should_get_index
------------------------------------------
Started GET "/items/index" for 127.0.0.1 at 2023-05-17 23:02:38 -0400
Processing by ItemsController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering items/index.html.erb within layouts/application
  Rendered items/index.html.erb within layouts/application (Duration: 1.6ms | Allocations: 290)
  Rendered layout layouts/application.html.erb (Duration: 3.3ms | Allocations: 953)
Completed 200 OK in 17ms (Views: 8.0ms | ActiveRecord: 0.0ms | Allocations: 4082)
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------
RoutesTest: test_should_route_to_restaurants_show
-------------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------
RoutesTest: test_should_route_to_dishes_index
---------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------
RoutesTest: test_should_route_to_restaurants_index
--------------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------
RoutesTest: test_should_route_to_dishes_show
--------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------
RoutesTest: test_should_route_to_items_index
--------------------------------------------
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------
RoutesTest: test_should_route_to_items_show
-------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------
RestaurantsControllerTest: test_should_get_index
------------------------------------------------
Started GET "/restaurants/index" for 127.0.0.1 at 2023-05-17 23:02:38 -0400
Processing by RestaurantsController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering restaurants/index.html.erb within layouts/application
  Rendered restaurants/index.html.erb within layouts/application (Duration: 0.8ms | Allocations: 103)
  Rendered layout layouts/application.html.erb (Duration: 1.6ms | Allocations: 390)
Completed 200 OK in 4ms (Views: 3.0ms | ActiveRecord: 0.0ms | Allocations: 1035)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------
ItemTest: test_should_validate_presence_of_callories_at_model_level
-------------------------------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------
ItemTest: test_should_validate_presence_of_name_at_model_level
--------------------------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------
ItemTest: test_should_validate_presence_of_name_at_db_level
-----------------------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------
ItemTest: test_item_belongs_to_a_dish
-------------------------------------
  [1m[36mItem Load (0.3ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."name" = $1 LIMIT $2[0m  [["name", "Hamburguesa"], ["LIMIT", 1]]
  [1m[36mDish Load (0.2ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."id" = $1 LIMIT $2[0m  [["id", 509217612], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------
ItemTest: test_should_validate_presence_of_price_at_model_level
---------------------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------
ItemTest: test_item_belongs_to_a_restaurant
-------------------------------------------
  [1m[36mItem Load (0.2ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."name" = $1 LIMIT $2[0m  [["name", "Hamburguesa"], ["LIMIT", 1]]
  [1m[36mRestaurant Load (0.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 648827877], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------
ItemTest: test_should_load_fixtures_correctly
---------------------------------------------
  [1m[36mItem Load (0.3ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."name" = $1 LIMIT $2[0m  [["name", "Hamburguesa"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------
ItemTest: test_should_validate_presence_of_price_at_db_level
------------------------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------
ItemTest: test_should_validate_presence_of_callories_at_db_level
----------------------------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------
DishTest: test_should_have_many_items
-------------------------------------
  [1m[36mDish Load (0.3ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."name" = $1 LIMIT $2[0m  [["name", "Dessert"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------
DishTest: test_should_load_fixtures_correctly
---------------------------------------------
  [1m[36mDish Load (0.3ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."name" = $1 LIMIT $2[0m  [["name", "Dessert"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------
DishTest: test_should_validate_presence_of_name_at_db_level
-----------------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------
DishTest: test_should_validate_presence_of_name_at_model_level
--------------------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------
RestaurantTest: test_should_validate_presence_of_name_at_model_level
--------------------------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------
RestaurantTest: test_should_have_many_items
-------------------------------------------
  [1m[36mRestaurant Load (0.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."name" = $1 LIMIT $2[0m  [["name", "NcDonalds"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------
RestaurantTest: test_should_validate_presence_of_name_at_db_level
-----------------------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------
RestaurantTest: test_should_load_fixtures_correctly
---------------------------------------------------
  [1m[36mRestaurant Load (0.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."name" = $1 LIMIT $2[0m  [["name", "NcDonalds"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------
RestaurantTest: test_should_validate_presence_of_address_at_db_level
--------------------------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------------
RestaurantTest: test_should_validate_presence_of_address_at_model_level
-----------------------------------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------
DishesControllerTest: test_should_get_index
-------------------------------------------
Started GET "/dishes/index" for 127.0.0.1 at 2023-05-17 23:02:38 -0400
Processing by DishesController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering dishes/index.html.erb within layouts/application
  Rendered dishes/index.html.erb within layouts/application (Duration: 1.4ms | Allocations: 106)
  Rendered layout layouts/application.html.erb (Duration: 2.1ms | Allocations: 393)
Completed 200 OK in 4ms (Views: 3.7ms | ActiveRecord: 0.0ms | Allocations: 989)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
